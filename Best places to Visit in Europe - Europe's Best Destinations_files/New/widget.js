(function(window, $, undefined) { window.define&&(window._define_=window.define,window.define=null),function(n){typeof define=="function"?define(n):typeof YUI=="function"?YUI.add("es5",n):n()}(function(){function s(){}function it(n){return n=+n,n!==n?n=0:n!==0&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}function w(n){var t=typeof n;return n===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function vt(n){var t,i,r;if(w(n))return n;if((i=n.valueOf,typeof i=="function"&&(t=i.call(n),w(t)))||(r=n.toString,typeof r=="function"&&(t=r.call(n),w(t))))return t;throw new TypeError;}var l,at,a,v,y,p,g,t,nt,tt,i;Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError("Function.prototype.bind called on incompatible "+t);var f=u.call(arguments,1),o=function(){if(this instanceof r){var i=t.apply(this,f.concat(u.call(arguments)));return Object(i)===i?i:this}return t.apply(n,f.concat(u.call(arguments)))},h=Math.max(0,t.length-f.length),e=[];for(i=0;i<h;i++)e.push("$"+i);return r=Function("binder","return function("+e.join(",")+"){return binder.apply(this,arguments)}")(o),t.prototype&&(s.prototype=t.prototype,r.prototype=new s,s.prototype=null),r});var e=Function.prototype.call,rt=Array.prototype,f=Object.prototype,u=rt.slice,n=e.bind(f.toString),h=e.bind(f.hasOwnProperty),ut,ft,et,ot,st;if((st=h(f,"__defineGetter__"))&&(ut=e.bind(f.__defineGetter__),ft=e.bind(f.__defineSetter__),et=e.bind(f.__lookupGetter__),ot=e.bind(f.__lookupSetter__)),[1,2].splice(0).length!=2){var c=Array.prototype.splice,ht=Array.prototype.push,l=Array.prototype.unshift;Array.prototype.splice=function(){function t(n){for(var t=[];n--;)t.unshift(n);return t}var n=[],i;return n.splice.bind(n,0,0).apply(null,t(20)),n.splice.bind(n,0,0).apply(null,t(26)),i=n.length,n.splice(5,0,"XXX"),i+1==n.length?!0:void 0}()?function(n,t){return arguments.length?c.apply(this,[n===void 0?0:n,t===void 0?this.length-n:t].concat(u.call(arguments,2))):[]}:function(n,t){var r,i=u.call(arguments,2),f=i.length;if(!arguments.length)return[];if(n===void 0&&(n=0),t===void 0&&(t=this.length-n),f>0){if(t<=0){if(n==this.length)return ht.apply(this,i),[];if(n==0)return l.apply(this,i),[]}return r=u.call(this,n,n+t),i.push.apply(i,u.call(this,n+t,this.length)),i.unshift.apply(i,u.call(this,0,n)),i.unshift(0,this.length),c.apply(this,i),r}return c.call(this,n,t)}}[].unshift(0)!=1&&(l=Array.prototype.unshift,Array.prototype.unshift=function(){return l.apply(this,arguments),this.length});Array.isArray||(Array.isArray=function(t){return n(t)=="[object Array]"});var b=Object("a"),r=b[0]!="a"||!(0 in b),o=function(n){var t=!0;return n&&n.call("foo",function(n,i,r){typeof r!="object"&&(t=!1)}),!!n&&t};if(Array.prototype.forEach&&o(Array.prototype.forEach)||(Array.prototype.forEach=function(t){var e=i(this),f=r&&n(this)=="[object String]"?this.split(""):e,o=arguments[1],u=-1,s=f.length>>>0;if(n(t)!="[object Function]")throw new TypeError;while(++u<s)u in f&&t.call(o,f[u],u,e)}),Array.prototype.map&&o(Array.prototype.map)||(Array.prototype.map=function(t){var e=i(this),f=r&&n(this)=="[object String]"?this.split(""):e,o=f.length>>>0,s=Array(o),h=arguments[1],u;if(n(t)!="[object Function]")throw new TypeError(t+" is not a function");for(u=0;u<o;u++)u in f&&(s[u]=t.call(h,f[u],u,e));return s}),Array.prototype.filter&&o(Array.prototype.filter)||(Array.prototype.filter=function(t){var o=i(this),f=r&&n(this)=="[object String]"?this.split(""):o,h=f.length>>>0,s=[],e,c=arguments[1],u;if(n(t)!="[object Function]")throw new TypeError(t+" is not a function");for(u=0;u<h;u++)u in f&&(e=f[u],t.call(c,e,u,o)&&s.push(e));return s}),Array.prototype.every&&o(Array.prototype.every)||(Array.prototype.every=function(t){var e=i(this),f=r&&n(this)=="[object String]"?this.split(""):e,o=f.length>>>0,s=arguments[1],u;if(n(t)!="[object Function]")throw new TypeError(t+" is not a function");for(u=0;u<o;u++)if(u in f&&!t.call(s,f[u],u,e))return!1;return!0}),Array.prototype.some&&o(Array.prototype.some)||(Array.prototype.some=function(t){var e=i(this),f=r&&n(this)=="[object String]"?this.split(""):e,o=f.length>>>0,s=arguments[1],u;if(n(t)!="[object Function]")throw new TypeError(t+" is not a function");for(u=0;u<o;u++)if(u in f&&t.call(s,f[u],u,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var s=i(this),f=r&&n(this)=="[object String]"?this.split(""):s,o=f.length>>>0,u,e;if(n(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!o&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");if(u=0,arguments.length>=2)e=arguments[1];else do{if(u in f){e=f[u++];break}if(++u>=o)throw new TypeError("reduce of empty array with no initial value");}while(1);for(;u<o;u++)u in f&&(e=t.call(void 0,e,f[u],u,s));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var o=i(this),e=r&&n(this)=="[object String]"?this.split(""):o,s=e.length>>>0,f,u;if(n(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!s&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");if(u=s-1,arguments.length>=2)f=arguments[1];else do{if(u in e){f=e[u--];break}if(--u<0)throw new TypeError("reduceRight of empty array with no initial value");}while(1);if(u<0)return f;do u in this&&(f=t.call(void 0,f,e[u],u,o));while(u--);return f}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(t){var f=r&&n(this)=="[object String]"?this.split(""):i(this),e=f.length>>>0,u;if(!e)return-1;for(u=0,arguments.length>1&&(u=it(arguments[1])),u=u>=0?u:Math.max(0,e+u);u<e;u++)if(u in f&&f[u]===t)return u;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(t){var f=r&&n(this)=="[object String]"?this.split(""):i(this),e=f.length>>>0,u;if(!e)return-1;for(u=e-1,arguments.length>1&&(u=Math.min(u,it(arguments[1]))),u=u>=0?u:e-Math.abs(u);u>=0;u--)if(u in f&&t===f[u])return u;return-1}),!Object.keys){var k=!0,ct=function(){}.propertyIsEnumerable("prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],lt=d.length;for(at in{toString:null})k=!1;Object.keys=function(n){var e=toString.call(n)==="[object Function]",c=n!==null&&typeof n=="object",t,o,i,f,s,r,u;if(!c&&!e)throw new TypeError("Object.keys called on a non-object");t=[];o=ct&&e;for(i in n)o&&i==="prototype"||!h(n,i)||t.push(i);if(k)for(f=n.constructor,s=f&&f.prototype===n,r=0;r<lt;r++)u=d[r],s&&u==="constructor"||!h(n,u)||t.push(u);return t}}a=-621987552e5;v="-000001";Date.prototype.toISOString&&new Date(a).toISOString().indexOf(v)!==-1||(Date.prototype.toISOString=function(){var t,r,u,n,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(n=this.getUTCFullYear(),i=this.getUTCMonth(),n+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],n=(n<0?"-":n>9999?"+":"")+("00000"+Math.abs(n)).slice(0<=n&&n<=9999?-4:-6),r=t.length;r--;)u=t[r],u<10&&(t[r]="0"+u);return n+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});y=!1;try{y=Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(a).toJSON().indexOf(v)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(oi){}y||(Date.prototype.toJSON=function(){var n=Object(this),i=vt(n),t;if(typeof i=="number"&&!isFinite(i))return null;if(t=n.toISOString,typeof t!="function")throw new TypeError("toISOString property is not callable");return t.call(n)});(!Date.parse||"Date.parse is buggy")&&(Date=function(n){function t(i,r,u,f,e,o,s){var h=arguments.length,c;return this instanceof n?(c=h==1&&String(i)===i?new n(t.parse(i)):h>=7?new n(i,r,u,f,e,o,s):h>=6?new n(i,r,u,f,e,o):h>=5?new n(i,r,u,f,e):h>=4?new n(i,r,u,f):h>=3?new n(i,r,u):h>=2?new n(i,r):h>=1?new n(i):new n,c.constructor=t,c):n.apply(this,arguments)}function i(n,t){var i=t>1?1:0;return f[t]+Math.floor((n-1969+i)/4)-Math.floor((n-1901+i)/100)+Math.floor((n-1601+i)/400)+365*(n-1970)}function e(t){return Number(new n(1970,0,1,0,0,0,t))}var u=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),f=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var r in n)t[r]=n[r];return t.now=n.now,t.UTC=n.UTC,t.prototype=n.prototype,t.prototype.constructor=t,t.parse=function(t){var r=u.exec(t);if(r){var s=Number(r[1]),o=Number(r[2]||1)-1,h=Number(r[3]||1)-1,v=Number(r[4]||0),c=Number(r[5]||0),l=Number(r[6]||0),a=Math.floor(Number(r[7]||0)*1e3),b=Boolean(r[4]&&!r[8]),y=r[9]==="-"?1:-1,p=Number(r[10]||0),w=Number(r[11]||0),f;return v<(c>0||l>0||a>0?24:25)&&c<60&&l<60&&a<1e3&&o>-1&&o<12&&p<24&&w<60&&h>-1&&h<i(s,o+1)-i(s,o)&&(f=((i(s,o)+h)*24+v+p*y)*60,f=((f+c+w*y)*60+l)*1e3+a,b&&(f=e(f)),-864e13<=f&&f<=864e13)?f:NaN}return n.parse.apply(this,arguments)},t}(Date));Date.now||(Date.now=function(){return(new Date).getTime()});Number.prototype.toFixed&&8e-5.toFixed(3)==="0.000"&&.9.toFixed(0)!=="0"&&1.255.toFixed(2)==="1.25"&&0xde0b6b3a7640080.toFixed(0)==="1000000000000000128"||function(){function t(t,i){for(var f=-1;++f<u;)i+=t*n[f],n[f]=i%r,i=Math.floor(i/r)}function f(t){for(var f=u,i=0;--f>=0;)i+=n[f],n[f]=Math.floor(i/t),i=i%t*r}function e(){for(var i=u,t="",r;--i>=0;)(t!==""||i===0||n[i]!==0)&&(r=String(n[i]),t===""?t=r:t+="0000000".slice(0,7-r.length)+r);return t}function i(n,t,r){return t===0?r:t%2==1?i(n,t-1,r*n):i(n*n,t/2,r)}function o(n){for(var t=0;n>=4096;)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t}var r,u,n;r=1e7;u=6;n=[0,0,0,0,0,0];Number.prototype.toFixed=function(n){var r,u,l,s,h,v,c,a;if(r=Number(n),r=r!==r?0:Math.floor(r),r<0||r>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(u=Number(this),u!==u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(l="",u<0&&(l="-",u=-u),s="0",u>1e-21)if(h=o(u*i(2,69,1))-69,v=h<0?u*i(2,-h,1):u/i(2,h,1),v*=4503599627370496,h=52-h,h>0){for(t(0,v),c=r;c>=7;)t(1e7,0),c-=7;for(t(i(10,c,1),0),c=h-1;c>=23;)f(8388608),c-=23;f(1<<c);t(1,1);f(2);s=e()}else t(0,v),t(1<<-h,0),s=e()+"0.00000000000000000000".slice(2,2+r);return r>0?(a=s.length,s=a<=r?l+"0.0000000000000000000".slice(0,r-a+2)+s:l+s.slice(0,a-r)+"."+s.slice(a-r)):s=l+s,s}}();p=String.prototype.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"".split(/.?/).length||".".split(/()()/).length>1?function(){var n=/()??/.exec("")[1]===void 0;String.prototype.split=function(t,i){var f=this;if(t===void 0&&i===0)return[];if(Object.prototype.toString.call(t)!=="[object RegExp]")return p.apply(this,arguments);var u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),e=0,t=new RegExp(t.source,s+"g"),h,r,o,c;for(f+="",n||(h=new RegExp("^"+t.source+"$(?!\\s)",s)),i=i===void 0?-1>>>0:i>>>0;r=t.exec(f);){if(o=r.index+r[0].length,o>e&&(u.push(f.slice(e,r.index)),!n&&r.length>1&&r[0].replace(h,function(){for(var n=1;n<arguments.length-2;n++)arguments[n]===void 0&&(r[n]=void 0)}),r.length>1&&r.index<f.length&&Array.prototype.push.apply(u,r.slice(1)),c=r[0].length,e=o,u.length>=i))break;t.lastIndex===r.index&&t.lastIndex++}return e===f.length?(c||!t.test(""))&&u.push(""):u.push(f.slice(e)),u.length>i?u.slice(0,i):u}}():"0".split(void 0,0).length&&(String.prototype.split=function(n,t){return n===void 0&&t===0?[]:p.apply(this,arguments)});"".substr&&"0b".substr(-1)!=="b"&&(g=String.prototype.substr,String.prototype.substr=function(n,t){return g.call(this,n<0?(n=this.length+n)<0?0:n:n,t)});t="\t\n\x0b\f\r   ᠎             　\u2028\u2029﻿";(!String.prototype.trim||t.trim())&&(t="["+t+"]",nt=new RegExp("^"+t+t+"*"),tt=new RegExp(t+t+"*$"),String.prototype.trim=function(){if(this===void 0||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(nt,"").replace(tt,"")});(parseInt(t+"08")!==8||parseInt(t+"0x16")!==22)&&(parseInt=function(n){var t=/^0[xX]/;return function(i,r){return i=String(i).trim(),+r||(r=t.test(i)?16:10),n(i,r)}}(parseInt));i=function(n){if(n==null)throw new TypeError("can't convert "+n+" to object");return Object(n)}}),function(n){"use strict";n(["jquery"],function(n){function i(t){return n.isFunction(t)||typeof t=="object"?t:{top:t,left:t}}var t=n.scrollTo=function(t,i,r){return n(window).scrollTo(t,i,r)};return t.defaults={axis:"xy",duration:parseFloat(n.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(){return n(window)._scrollable()},n.fn._scrollable=function(){return this.map(function(){var t=this,r=!t.nodeName||n.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1,i;return r?(i=(t.contentWindow||t).document||t.ownerDocument||t,/webkit/i.test(navigator.userAgent)||i.compatMode=="BackCompat"?i.body:i.documentElement):t})},n.fn.scrollTo=function(r,u,f){return typeof u=="object"&&(f=u,u=0),typeof f=="function"&&(f={onAfter:f}),r=="max"&&(r=9e9),f=n.extend({},t.defaults,f),u=u||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(u/=2),f.offset=i(f.offset),f.over=i(f.over),this._scrollable().each(function(){function v(n){h.animate(o,u,f.easing,n&&function(){n.call(this,e,f)})}var a;if(r!=null){var s=this,h=n(s),e=r,c,o={},l=h.is("html,body");switch(typeof e){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e=i(e);break}if(e=l?n(e):n(e,this),!e.length)return;case"object":(e.is||e.style)&&(c=(e=n(e)).offset())}a=n.isFunction(f.offset)&&f.offset(s,e)||f.offset;n.each(f.axis.split(""),function(n,i){var p=i=="x"?"Left":"Top",u=p.toLowerCase(),r="scroll"+p,w=s[r],b=t.max(s,i),y;c?(o[r]=c[u]+(l?0:w-h.offset()[u]),f.margin&&(o[r]-=parseInt(e.css("margin"+p))||0,o[r]-=parseInt(e.css("border"+p+"Width"))||0),o[r]+=a[u]||0,f.over[u]&&(o[r]+=e[i=="x"?"width":"height"]()*f.over[u])):(y=e[u],o[r]=y.slice&&y.slice(-1)=="%"?parseFloat(y)/100*b:y);f.limit&&/^\d+$/.test(o[r])&&(o[r]=o[r]<=0?0:Math.min(o[r],b));!n&&f.queue&&(w!=o[r]&&v(f.onAfterFirst),delete o[r])});v(f.onAfter)}}).end()},t.max=function(t,i){var r=i=="x"?"Width":"Height",u="scroll"+r;if(!n(t).is("html,body"))return t[u]-n(t)[r.toLowerCase()]();var f="client"+r,e=t.ownerDocument.documentElement,o=t.ownerDocument.body;return Math.max(e[u],o[u])-Math.min(e[f],o[f])},t})}(typeof define=="function"&&define.amd?define:function(n,t){typeof module!="undefined"&&module.exports?module.exports=t(require("jquery")):t(jQuery)}),function(n){typeof define=="function"&&define.amd?define("picker",["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):this.Picker=n(jQuery)}(function(n){function t(e,o,h,c){function k(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",l.component.nodes(a.open),y.box),y.wrap),y.frame),y.holder)}function g(){p.data(o,l).addClass(y.input).val(p.data("value")?l.get("select",v.format):e.value).on("focus."+a.id+" click."+a.id,d);if(!v.editable)p.on("keydown."+a.id,function(n){var t=n.keyCode,i=/^(8|46)$/.test(t);if(t==27)return l.close(),!1;(t==32||i||!a.open&&l.component.key[t])&&(n.preventDefault(),n.stopPropagation(),i?l.clear().close():l.open())});i(e,{haspopup:!0,expanded:!1,readonly:!1,owns:e.id+"_root"+(l._hidden?" "+l._hidden.id:"")})}function nt(){l.$root.on({focusin:function(n){l.$root.removeClass(y.focused);n.stopPropagation()},"mousedown click":function(t){var i=t.target;i!=l.$root.children()[0]&&(t.stopPropagation(),t.type!="mousedown"||n(i).is(":input")||i.nodeName=="OPTION"||(t.preventDefault(),e.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var u=n(this),r=u.data(),f=u.hasClass(y.navDisabled)||u.hasClass(y.disabled),i=document.activeElement;i=i&&(i.type||i.href)&&i;(f||i&&!n.contains(l.$root[0],i))&&e.focus();r.nav&&!f?l.set("highlight",l.component.item.highlight,{nav:r.nav}):t._.isInteger(r.pick)&&!f?l.set("select",r.pick).close(!0):r.clear&&l.clear().close(!0)}).on("click","[data-close]",function(){l.close(!0)});i(l.$root[0],"hidden",!0)}function tt(){var t;v.hiddenName===!0?(t=e.name,e.name=""):(t=[typeof v.hiddenPrefix=="string"?v.hiddenPrefix:"",typeof v.hiddenSuffix=="string"?v.hiddenSuffix:"_submit"],t=t[0]+e.name+t[1]);l._hidden=n('<input type=hidden name="'+t+'"'+(e.id?'id="'+e.id+'_hidden"':"")+(p.data("value")||e.value?' value="'+l.get("select",v.formatSubmit)+'"':"")+">")[0];p.on("change."+a.id,function(){l._hidden.value=e.value?l.get("select",v.formatSubmit):""}).after(l._hidden)}function d(n){n.stopPropagation();n.type=="focus"&&l.$root.addClass(y.focused);l.open()}if(!e)return t;var w=!1,a={id:e.id||"P"+Math.abs(~~(Math.random()*new Date))},v=h?n.extend(!0,{},h.defaults,c):c||{},y=n.extend({},t.klasses(),v.klass),p=n(e),b=function(){return this.start()},l=b.prototype={constructor:b,$node:p,start:function(){if(a&&a.start)return l;a.methods={};a.start=!0;a.open=!1;a.type=e.type;e.autofocus=e==document.activeElement;e.readOnly=!v.editable;e.id=e.id||a.id;e.type!="text"&&(e.type="text");l.component=new h(l,v);l.$root=n(t._.node("div",k(),y.picker,'id="'+e.id+'_root"'));nt();v.formatSubmit&&tt();g();v.container?n(v.container).append(l.$root):p.after(l.$root);l.on({start:l.component.onStart,render:l.component.onRender,stop:l.component.onStop,open:l.component.onOpen,close:l.component.onClose,set:l.component.onSet}).on({start:v.onStart,render:v.onRender,stop:v.onStop,open:v.onOpen,close:v.onClose,set:v.onSet});return w=s(l.$root.children()[0]),e.autofocus&&l.open(),l.trigger("start").trigger("render")},render:function(n){return n?l.$root.html(k()):l.$root.find("."+y.box).html(l.component.nodes(a.open)),l.trigger("render")},stop:function(){return a.start?(l.close(),l._hidden&&l._hidden.parentNode.removeChild(l._hidden),l.$root.remove(),p.removeClass(y.input).removeData(o),setTimeout(function(){p.off("."+a.id)},0),e.type=a.type,e.readOnly=!1,l.trigger("stop"),a.methods={},a.start=!1,l):l},open:function(o){if(a.open)return l;if(p.addClass(y.active),i(e,"expanded",!0),setTimeout(function(){l.$root.addClass(y.opened);i(l.$root[0],"hidden",!1)},0),o!==!1){a.open=!0;w&&r.css("overflow","hidden").css("padding-right","+="+f());p.trigger("focus");u.on("click."+a.id+" focusin."+a.id,function(n){var t=n.target;t!=e&&t!=document&&n.which!=3&&l.close(t===l.$root.children()[0])}).on("keydown."+a.id,function(i){var r=i.keyCode,u=l.component.key[r],f=i.target;r==27?l.close(!0):f==e&&(u||r==13)?(i.preventDefault(),u?t._.trigger(l.component.key.go,l,[t._.trigger(u)]):l.$root.find("."+y.highlighted).hasClass(y.disabled)||l.set("select",l.component.item.highlight).close()):n.contains(l.$root[0],f)&&r==13&&(i.preventDefault(),f.click())})}return l.trigger("open")},close:function(n){return(n&&(p.off("focus."+a.id).trigger("focus"),setTimeout(function(){p.on("focus."+a.id,d)},0)),p.removeClass(y.active),i(e,"expanded",!1),setTimeout(function(){l.$root.removeClass(y.opened+" "+y.focused);i(l.$root[0],"hidden",!0)},0),!a.open)?l:(a.open=!1,w&&r.css("overflow","").css("padding-right","-="+f()),u.off("."+a.id),l.trigger("close"))},clear:function(n){return l.set("clear",null,n)},set:function(t,i,r){var u,f,o=n.isPlainObject(t),e=o?t:{};if(r=o&&n.isPlainObject(i)?i:r||{},t){o||(e[t]=i);for(u in e)f=e[u],u in l.component.item&&(f===undefined&&(f=null),l.component.set(u,f,r)),(u=="select"||u=="clear")&&p.val(u=="clear"?"":l.get(u,v.format)).trigger("change");l.render()}return r.muted?l:l.trigger("set",e)},get:function(n,i){if(n=n||"value",a[n]!=null)return a[n];if(n=="value")return e.value;if(n in l.component.item){if(typeof i=="string"){var r=l.component.get(n);return r?t._.trigger(l.component.formats.toString,l.component,[i,r]):""}return l.component.get(n)}},on:function(t,i,r){var u,e,o=n.isPlainObject(t),f=o?t:{};if(t){o||(f[t]=i);for(u in f)e=f[u],r&&(u="_"+u),a.methods[u]=a.methods[u]||[],a.methods[u].push(e)}return l},off:function(){var n,t,i=arguments;for(n=0,namesCount=i.length;n<namesCount;n+=1)t=i[n],t in a.methods&&delete a.methods[t];return l},trigger:function(n,i){var r=function(n){var r=a.methods[n];r&&r.map(function(n){t._.trigger(n,l,[i])})};return r("_"+n),r(n),l}};return new b}function s(n){var t,i="position";return n.currentStyle?t=n.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(n)[i]),t=="fixed"}function f(){var t,i,u,f;return r.height()<=o.height()?0:(t=n('<div style="visibility:hidden;width:100px" />').appendTo("body"),i=t[0].offsetWidth,t.css("overflow","scroll"),u=n('<div style="width:100%" />').appendTo(t),f=u[0].offsetWidth,t.remove(),i-f)}function i(t,i,r){if(n.isPlainObject(i))for(var u in i)e(t,u,i[u]);else e(t,i,r)}function e(n,t,i){n.setAttribute((t=="role"?"":"aria-")+t,i)}function h(t,i){var r,u,f;n.isPlainObject(t)||(t={attribute:i});i="";for(r in t)u=(r=="role"?"":"aria-")+r,f=t[r],i+=f==null?"":u+'="'+t[r]+'"';return i}var o=n(window),u=n(document),r=n(document.documentElement);return t.klasses=function(n){return n=n||"picker",{picker:n,opened:n+"--opened",focused:n+"--focused",input:n+"__input",active:n+"__input--active",holder:n+"__holder",frame:n+"__frame",wrap:n+"__wrap",box:n+"__box"}},t._={group:function(n){for(var i,u="",r=t._.trigger(n.min,n);r<=t._.trigger(n.max,n,[r]);r+=n.i)i=t._.trigger(n.item,n,[r]),u+=t._.node(n.node,i[0],i[1],i[2]);return u},node:function(t,i,r,u){return i?(i=n.isArray(i)?i.join(""):i,r=r?' class="'+r+'"':"",u=u?" "+u:"","<"+t+r+u+">"+i+"<\/"+t+">"):""},lead:function(n){return(n<10?"0":"")+n},trigger:function(n,t,i){return typeof n=="function"?n.apply(t,i||[]):n},digits:function(n){return/\d/.test(n[1])?2:1},isDate:function(n){return{}.toString.call(n).indexOf("Date")>-1&&this.isInteger(n.getDate())},isInteger:function(n){return{}.toString.call(n).indexOf("Number")>-1&&n%1==0},ariaAttr:h},t.extend=function(i,r){n.fn[i]=function(u,f){var e=this.data(i);return u=="picker"?e:e&&typeof u=="string"?t._.trigger(e[u],e,[f]):this.each(function(){var f=n(this);f.data(i)||new t(this,i,r,u)})};n.fn[i].defaults=r.defaults},t}),function(n){typeof define=="function"&&define.amd?define(["picker","jquery"],n):typeof exports=="object"?module.exports=n(require("./picker.js"),require("jquery")):n(Picker,jQuery)}(function(n,t){function r(n,t){var i=this,r=n.$node[0],o=r.value,u=n.$node.data("value"),f=u||o,s=u?t.formatSubmit:t.format,e=function(){return r.currentStyle?r.currentStyle.direction=="rtl":getComputedStyle(n.$root[0]).direction=="rtl"};i.settings=t;i.$node=n.$node;i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"};i.item={};i.item.clear=null;i.item.disable=(t.disable||[]).slice(0);i.item.enable=-function(n){return n[0]===!0?n.shift():-1}(i.item.disable);i.set("min",t.min).set("max",t.max).set("now");f?i.set("select",f,{format:s}):i.set("select",null).set("highlight",i.item.now);i.key={40:7,38:-7,39:function(){return e()?-1:1},37:function(){return e()?1:-1},go:function(n){var t=i.item.highlight,r=new Date(t.year,t.month,t.date+n);i.set("highlight",[r.getFullYear(),r.getMonth(),r.getDate()],{interval:n});this.render()}};n.on("render",function(){n.$root.find("."+t.klass.selectMonth).on("change",function(){var i=this.value;i&&(n.set("highlight",[n.get("view").year,i,n.get("highlight").date]),n.$root.find("."+t.klass.selectMonth).trigger("focus"))});n.$root.find("."+t.klass.selectYear).on("change",function(){var i=this.value;i&&(n.set("highlight",[i,n.get("view").month,n.get("highlight").date]),n.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var r="";i.disabled(i.get("now"))&&(r=":not(."+t.klass.buttonToday+")");n.$root.find("button"+r+", select").attr("disabled",!1)},1).on("close",function(){n.$root.find("button, select").attr("disabled",!0)},1)}var u=7,f=6,i=n._;r.prototype.set=function(n,t,i){var r=this,u=r.item;return t===null?(n=="clear"&&(n="select"),u[n]=t,r):(u[n=="enable"?"disable":n=="flip"?"enable":n]=r.queue[n].split(" ").map(function(u){return t=r[u](n,t,i)}).pop(),n=="select"?r.set("highlight",u.select,i):n=="highlight"?r.set("view",u.highlight,i):n.match(/^(flip|min|max|disable|enable)$/)&&(u.select&&r.disabled(u.select)&&r.set("select",u.select,i),u.highlight&&r.disabled(u.highlight)&&r.set("highlight",u.highlight,i)),r)};r.prototype.get=function(n){return this.item[n]};r.prototype.create=function(n,r,u){var f,e=this;return r=r===undefined?n:r,r==-Infinity||r==Infinity?f=r:t.isPlainObject(r)&&i.isInteger(r.pick)?r=r.obj:t.isArray(r)?(r=new Date(r[0],r[1],r[2]),r=i.isDate(r)?r:e.create().obj):r=i.isInteger(r)||i.isDate(r)?e.normalize(new Date(r),u):e.now(n,r,u),{year:f||r.getFullYear(),month:f||r.getMonth(),date:f||r.getDate(),day:f||r.getDay(),obj:f||r,pick:f||r.getTime()}};r.prototype.createRange=function(n,r){var f=this,u=function(n){return n===!0||t.isArray(n)||i.isDate(n)?f.create(n):n};return i.isInteger(n)||(n=u(n)),i.isInteger(r)||(r=u(r)),i.isInteger(n)&&t.isPlainObject(r)?n=[r.year,r.month,r.date+n]:i.isInteger(r)&&t.isPlainObject(n)&&(r=[n.year,n.month,n.date+r]),{from:u(n),to:u(r)}};r.prototype.withinRange=function(n,t){return n=this.createRange(n.from,n.to),t.pick>=n.from.pick&&t.pick<=n.to.pick};r.prototype.overlapRanges=function(n,t){var i=this;return n=i.createRange(n.from,n.to),t=i.createRange(t.from,t.to),i.withinRange(n,t.from)||i.withinRange(n,t.to)||i.withinRange(t,n.from)||i.withinRange(t,n.to)};r.prototype.now=function(n,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)};r.prototype.navigate=function(n,i,r){var s,f,u,e,c=t.isArray(i),h=t.isPlainObject(i),o=this.item.view;if(c||h){for(h?(f=i.year,u=i.month,e=i.date):(f=+i[0],u=+i[1],e=+i[2]),r&&r.nav&&o&&o.month!==u&&(f=o.year,u=o.month),s=new Date(f,u+(r&&r.nav?r.nav:0),1),f=s.getFullYear(),u=s.getMonth();new Date(f,u,e).getMonth()!==u;)e-=1;i=[f,u,e]}return i};r.prototype.normalize=function(n){return n.setHours(0,0,0,0),n};r.prototype.measure=function(n,t){var r=this;return t?typeof t=="string"?t=r.parse(n,t):i.isInteger(t)&&(t=r.now(n,t,{rel:t})):t=n=="min"?-Infinity:Infinity,t};r.prototype.viewset=function(n,t){return this.create([t.year,t.month,1])};r.prototype.validate=function(n,r,u){var f=this,c=r,e=u&&u.interval?u.interval:1,h=f.item.enable===-1,l,a,o=f.item.min,s=f.item.max,v,y,p=h&&f.item.disable.filter(function(n){if(t.isArray(n)){var u=f.create(n).pick;u<r.pick?l=!0:u>r.pick&&(a=!0)}return i.isInteger(n)}).length;if((!u||!u.nav)&&(!h&&f.disabled(r)||h&&f.disabled(r)&&(p||l||a)||!h&&(r.pick<=o.pick||r.pick>=s.pick)))for(h&&!p&&(!a&&e>0||!l&&e<0)&&(e*=-1);f.disabled(r);){if(Math.abs(e)>1&&(r.month<c.month||r.month>c.month)&&(r=c,e=e>0?1:-1),r.pick<=o.pick?(v=!0,e=1,r=f.create([o.year,o.month,o.date+(r.pick===o.pick?0:-1)])):r.pick>=s.pick&&(y=!0,e=-1,r=f.create([s.year,s.month,s.date+(r.pick===s.pick?0:1)])),v&&y)break;r=f.create([r.year,r.month,r.date+e])}return r};r.prototype.disabled=function(n){var r=this,u=r.item.disable.filter(function(u){return i.isInteger(u)?n.day===(r.settings.firstDay?u:u-1)%7:t.isArray(u)||i.isDate(u)?n.pick===r.create(u).pick:t.isPlainObject(u)?r.withinRange(u,n):void 0});return u=u.length&&!u.filter(function(n){return t.isArray(n)&&n[3]=="inverted"||t.isPlainObject(n)&&n.inverted}).length,r.item.enable===-1?!u:u||n.pick<r.item.min.pick||n.pick>r.item.max.pick};r.prototype.parse=function(n,t,r){var f=this,u={};return!t||typeof t!="string"?t:(r&&r.format||(r=r||{},r.format=f.settings.format),f.formats.toArray(r.format).map(function(n){var r=f.formats[n],e=r?i.trigger(r,f,[t,u]):n.replace(/^!/,"").length;r&&(u[n]=t.substr(0,e));t=t.substr(e)}),[u.yyyy||u.yy,+(u.mm||u.m)-1,u.dd||u.d])};r.prototype.formats=function(){function n(n,t,i){var r=n.match(/\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(r)+1),r.length}function t(n){return n.match(/\w+/)[0].length}return{d:function(n,t){return n?i.digits(n):t.date},dd:function(n,t){return n?2:i.lead(t.date)},ddd:function(n,i){return n?t(n):this.settings.weekdaysShort[i.day]},dddd:function(n,i){return n?t(n):this.settings.weekdaysFull[i.day]},m:function(n,t){return n?i.digits(n):t.month+1},mm:function(n,t){return n?2:i.lead(t.month+1)},mmm:function(t,i){var r=this.settings.monthsShort;return t?n(t,r,i):r[i.month]},mmmm:function(t,i){var r=this.settings.monthsFull;return t?n(t,r,i):r[i.month]},yy:function(n,t){return n?2:(""+t.year).slice(2)},yyyy:function(n,t){return n?4:t.year},toArray:function(n){return n.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(n,t){var r=this;return r.formats.toArray(n).map(function(n){return i.trigger(r.formats[n],r,[0,t])||n.replace(/^!/,"")}).join("")}}}();r.prototype.isDateExact=function(n,r){var u=this;return i.isInteger(n)&&i.isInteger(r)||typeof n=="boolean"&&typeof r=="boolean"?n===r:(i.isDate(n)||t.isArray(n))&&(i.isDate(r)||t.isArray(r))?u.create(n).pick===u.create(r).pick:t.isPlainObject(n)&&t.isPlainObject(r)?u.isDateExact(n.from,r.from)&&u.isDateExact(n.to,r.to):!1};r.prototype.isDateOverlap=function(n,r){var u=this,f=u.settings.firstDay?1:0;return i.isInteger(n)&&(i.isDate(r)||t.isArray(r))?(n=n%7+f,n===u.create(r).day+1):i.isInteger(r)&&(i.isDate(n)||t.isArray(n))?(r=r%7+f,r===u.create(n).day+1):t.isPlainObject(n)&&t.isPlainObject(r)?u.overlapRanges(n,r):!1};r.prototype.flipEnable=function(n){var t=this.item;t.enable=n||(t.enable==-1?1:-1)};r.prototype.deactivate=function(n,r){var f=this,u=f.item.disable.slice(0);return r=="flip"?f.flipEnable():r===!1?(f.flipEnable(1),u=[]):r===!0?(f.flipEnable(-1),u=[]):r.map(function(n){for(var e,r=0;r<u.length;r+=1)if(f.isDateExact(n,u[r])){e=!0;break}e||(i.isInteger(n)||i.isDate(n)||t.isArray(n)||t.isPlainObject(n)&&n.from&&n.to)&&u.push(n)}),u};r.prototype.activate=function(n,r){var f=this,u=f.item.disable,e=u.length;return r=="flip"?f.flipEnable():r===!0?(f.flipEnable(1),u=[]):r===!1?(f.flipEnable(-1),u=[]):r.map(function(n){for(var o,s,h,r=0;r<e;r+=1)if(s=u[r],f.isDateExact(s,n)){o=u[r]=null;h=!0;break}else if(f.isDateOverlap(s,n)){t.isPlainObject(n)?(n.inverted=!0,o=n):t.isArray(n)?(o=n,o[3]||o.push("inverted")):i.isDate(n)&&(o=[n.getFullYear(),n.getMonth(),n.getDate(),"inverted"]);break}if(o)for(r=0;r<e;r+=1)if(f.isDateExact(u[r],n)){u[r]=null;break}if(h)for(r=0;r<e;r+=1)if(f.isDateOverlap(u[r],n)){u[r]=null;break}o&&u.push(o)}),u.filter(function(n){return n!=null})};r.prototype.nodes=function(n){var r=this,t=r.settings,o=r.item,c=o.now,l=o.select,a=o.highlight,e=o.view,w=o.disable,s=o.min,h=o.max,b=function(n,r){return t.firstDay&&(n.push(n.shift()),r.push(r.shift())),i.node("thead",i.node("tr",i.group({min:0,max:u-1,i:1,node:"th",item:function(i){return[n[i],t.klass.weekdays,'scope=col title="'+r[i]+'"']}})))}((t.showWeekdaysFull?t.weekdaysFull:t.weekdaysShort).slice(0),t.weekdaysFull.slice(0)),v=function(n){return i.node("div"," ",t.klass["nav"+(n?"Next":"Prev")]+(n&&e.year>=h.year&&e.month>=h.month||!n&&e.year<=s.year&&e.month<=s.month?" "+t.klass.navDisabled:""),"data-nav="+(n||-1)+" "+i.ariaAttr({role:"button",controls:r.$node[0].id+"_table"})+' title="'+(n?t.labelMonthNext:t.labelMonthPrev)+'"')},y=function(){var u=t.showMonthsShort?t.monthsShort:t.monthsFull;return t.selectMonths?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(n){return[u[n],0,"value="+n+(e.month==n?" selected":"")+(e.year==s.year&&n<s.month||e.year==h.year&&n>h.month?" disabled":"")]}}),t.klass.selectMonth,(n?"":"disabled")+" "+i.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+t.labelMonthSelect+'"'):i.node("div",u[e.month],t.klass.month)},p=function(){var o=e.year,l=t.selectYears===!0?5:~~(t.selectYears/2),v,y;if(l){var c=s.year,a=h.year,u=o-l,f=o+l;return c>u&&(f+=c-u,u=c),a<f&&(v=u-c,y=f-a,u-=v>y?y:v,f=a),i.node("select",i.group({min:u,max:f,i:1,node:"option",item:function(n){return[n,0,"value="+n+(o==n?" selected":"")]}}),t.klass.selectYear,(n?"":"disabled")+" "+i.ariaAttr({controls:r.$node[0].id+"_table"})+' title="'+t.labelYearSelect+'"')}return i.node("div",o,t.klass.year)};return i.node("div",(t.selectYears?p()+y():y()+p())+v()+v(1),t.klass.header)+i.node("table",b+i.node("tbody",i.group({min:0,max:f-1,i:1,node:"tr",item:function(n){var f=t.firstDay&&r.create([e.year,e.month,1]).day===0?-7:0;return[i.group({min:u*n-e.day+f+1,max:function(){return this.min+u-1},i:1,node:"td",item:function(n){n=r.create([e.year,e.month,n+(t.firstDay?1:0)]);var u=l&&l.pick==n.pick,f=a&&a.pick==n.pick,o=w&&r.disabled(n)||n.pick<s.pick||n.pick>h.pick;return[i.node("div",n.date,function(i){return i.push(e.month==n.month?t.klass.infocus:t.klass.outfocus),c.pick==n.pick&&i.push(t.klass.now),u&&i.push(t.klass.selected),f&&i.push(t.klass.highlighted),o&&i.push(t.klass.disabled),i.join(" ")}([t.klass.day]),"data-pick="+n.pick+" "+i.ariaAttr({role:"gridcell",selected:u&&r.$node.val()===i.trigger(r.formats.toString,r,[t.format,n])?!0:null,activedescendant:f?!0:null,disabled:o?!0:null})),"",i.ariaAttr({role:"presentation"})]}})]}})),t.klass.table,'id="'+r.$node[0].id+'_table" '+i.ariaAttr({role:"grid",controls:r.$node[0].id,readonly:!0}))+i.node("div",i.node("button",t.today,t.klass.buttonToday,"type=button data-pick="+c.pick+(n&&!r.disabled(c)?"":" disabled")+" "+i.ariaAttr({controls:r.$node[0].id}))+i.node("button",t.clear,t.klass.buttonClear,"type=button data-clear=1"+(n?"":" disabled")+" "+i.ariaAttr({controls:r.$node[0].id}))+i.node("button",t.close,t.klass.buttonClose,"type=button data-close=true "+(n?"":" disabled")+" "+i.ariaAttr({controls:r.$node[0].id})),t.klass.footer)};r.defaults=function(n){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:n+"table",header:n+"header",navPrev:n+"nav--prev",navNext:n+"nav--next",navDisabled:n+"nav--disabled",month:n+"month",year:n+"year",selectMonth:n+"select--month",selectYear:n+"select--year",weekdays:n+"weekday",day:n+"day",disabled:n+"day--disabled",selected:n+"day--selected",highlighted:n+"day--highlighted",now:n+"day--today",infocus:n+"day--infocus",outfocus:n+"day--outfocus",footer:n+"footer",buttonClear:n+"button--clear",buttonToday:n+"button--today",buttonClose:n+"button--close"}}}(n.klasses().picker+"__");n.extend("pickadate",r)}),function(n,t){var i,g,nt,tt,it,r,h,v,c,rt,y,f,u,p,e,l,w,b,ut,k,o,a,d,s;i=function(n){return new i.prototype.init(n)};typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?module.exports=i:n.Globalize=i;i.cultures={};i.prototype={constructor:i,init:function(n){return this.cultures=i.cultures,this.cultureSelector=n,this}};i.prototype.init.prototype=i.prototype;i.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm a",T:"h:mm:ss a",f:"dddd, MMMM dd, yyyy h:mm a",F:"dddd, MMMM dd, yyyy h:mm:ss a",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",MonthYear:"YYYY MMMM",ShortDate:"DD MMM",ShortDateWithDOW:"ddd DD MMM"}}},messages:{}};i.cultures["default"].calendar=i.cultures["default"].calendars.standard;i.cultures.en=i.cultures["default"];i.cultureSelector="en";g=/^0x[a-f0-9]+$/i;nt=/^[+\-]?infinity$/i;tt=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;it=/^\s+|\s+$/g;r=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1};h=function(n,t){return n.substr(n.length-t.length)===t};v=function(){var e,u,r,i,o,s,n=arguments[0]||{},f=1,l=arguments.length,h=!1;for(typeof n=="boolean"&&(h=n,n=arguments[1]||{},f=2),typeof n=="object"||rt(n)||(n={});f<l;f++)if((e=arguments[f])!=null)for(u in e)(r=n[u],i=e[u],n!==i)&&(h&&i&&(y(i)||(o=c(i)))?(o?(o=!1,s=r&&c(r)?r:[]):s=r&&y(r)?r:{},n[u]=v(h,s,i)):i!==t&&(n[u]=i));return n};c=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};rt=function(n){return Object.prototype.toString.call(n)==="[object Function]"};y=function(n){return Object.prototype.toString.call(n)==="[object Object]"};f=function(n,t){return n.indexOf(t)===0};u=function(n){return(n+"").replace(it,"")};p=function(n){return isNaN(n)?NaN:Math[n<0?"ceil":"floor"](n)};e=function(n,t,i){for(var r=n.length;r<t;r+=1)n=i?"0"+n:n+"0";return n};l=function(n,t){for(var u,f=0,i=!1,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.push("'"):f++;i=!1;break;case"\\":i&&t.push("\\");i=!i;break;default:t.push(u);i=!1}}return f};w=function(n,t){t=t||"F";var i,u=n.patterns,r=t.length;if(r===1){if(i=u[t],!i)throw"Invalid date format string '"+t+"'.";t=i}else r===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t};b=function(n,t,i){function e(n,t){var i,r=n+"";return t>1&&r.length<t?(i=st[t-2]+r,i.substr(i.length-t,t)):r}function ct(){return c||ut?c:(c=ht.test(t),ut=!0,c)}function it(n,t){if(v)return v[t];switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();default:throw"Invalid part value "+t;}}var u=i.calendar,d=u.convert,r,g,rt,nt,tt,p,f,ot,h;if(!t||!t.length||t==="i")return i&&i.name.length?d?r=b(n,u.patterns.F,i):(g=new Date(n.getTime()),rt=o(n,u.eras),g.setFullYear(a(n,u,rt)),r=g.toLocaleString()):r=n.toString(),r;nt=u.eras;tt=t==="s";t=w(u,t);r=[];var s,st=["0","00","000"],c,ut,ht=/([^d]|^)(d|dd)([^d]|$)/g,ft=0,et=k(),v;for(!tt&&d&&(v=d.fromGregorian(n));;){var lt=et.lastIndex,y=et.exec(t),at=t.slice(lt,y?y.index:t.length);if(ft+=l(at,r),!y)break;if(ft%2){r.push(y[0]);continue}p=y[0];f=p.length;switch(p){case"ddd":case"dddd":ot=f===3?u.days.namesAbbr:u.days.names;r.push(ot[n.getDay()]);break;case"d":case"dd":c=!0;r.push(e(it(n,2),f));break;case"MMM":case"MMMM":h=it(n,1);r.push(u.monthsGenitive&&ct()?u.monthsGenitive[f===3?"namesAbbr":"names"][h]:u.months[f===3?"namesAbbr":"names"][h]);break;case"M":case"MM":r.push(e(it(n,1)+1,f));break;case"y":case"yy":case"yyyy":h=v?v[0]:a(n,u,o(n,nt),tt);f<4&&(h=h%100);r.push(e(h,f));break;case"h":case"hh":s=n.getHours()%12;s===0&&(s=12);r.push(e(s,f));break;case"H":case"HH":r.push(e(n.getHours(),f));break;case"m":case"mm":r.push(e(n.getMinutes(),f));break;case"s":case"ss":r.push(e(n.getSeconds(),f));break;case"t":case"tt":h=n.getHours()<12?u.AM?u.AM[0]:" ":u.PM?u.PM[0]:" ";r.push(f===1?h.charAt(0):h);break;case"f":case"ff":case"fff":r.push(e(n.getMilliseconds(),3).substr(0,f));break;case"z":case"zz":s=n.getTimezoneOffset()/60;r.push((s<=0?"+":"-")+e(Math.floor(Math.abs(s)),f));break;case"zzz":s=n.getTimezoneOffset()/60;r.push((s<=0?"+":"-")+e(Math.floor(Math.abs(s)),2)+":"+e(Math.abs(n.getTimezoneOffset()%60),2));break;case"g":case"gg":u.eras&&r.push(u.eras[o(n,nt)].name);break;case"/":r.push(u["/"]);break;default:throw"Invalid date format pattern '"+p+"'.";}}return r.join("")},function(){var n;n=function(n,t,i){var l=i.groupSizes,c=l[0],a=1,p=Math.pow(10,t),v=Math.round(n*p)/p;isFinite(v)||(v=n);n=v;var r=n+"",u="",o=r.split(/e/i),f=o.length>1?parseInt(o[1],10):0;r=o[0];o=r.split(".");r=o[0];u=o.length>1?o[1]:"";f>0?(u=e(u,f,!1),r+=u.slice(0,f),u=u.substr(f)):f<0&&(f=-f,r=e(r,f+1,!0),u=r.slice(-f,r.length)+u,r=r.slice(0,-f));u=t>0?i["."]+(u.length>t?u.slice(0,t):e(u,t)):"";for(var s=r.length-1,y=i[","],h="";s>=0;){if(c===0||c>s)return r.slice(0,s+1)+(h.length?y+h+u:u);h=r.slice(s-c+1,s+1)+(h.length?y+h:"");s-=c;a<l.length&&(c=l[a],a++)}return r.slice(0,s+1)+y+h+u};ut=function(t,i,r){var a,f,v,o,y,l;if(!isFinite(t))return t===Infinity?r.numberFormat.positiveInfinity:t===-Infinity?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!i||i==="i")return r.name.length?t.toLocaleString():t.toString();i=i||"D";var s=r.numberFormat,u=Math.abs(t),h=-1,c;i.length>1&&(h=parseInt(i.slice(1),10));a=i.charAt(0).toUpperCase();switch(a){case"D":c="n";u=p(u);h!==-1&&(u=e(""+u,h,!0));t<0&&(u="-"+u);break;case"N":f=s;case"C":f=f||s.currency;case"P":f=f||s.percent;c=t<0?f.pattern[0]:f.pattern[1]||"n";h===-1&&(h=f.decimals);u=n(u*(a==="P"?100:1),h,f);break;default:throw"Bad number format specifier: "+a;}for(v=/n|\$|-|%/g,o="";;){if(y=v.lastIndex,l=v.exec(c),o+=c.slice(y,l?l.index:c.length),!l)break;switch(l[0]){case"n":o+=u;break;case"$":o+=s.currency.symbol;break;case"-":/[1-9]/.test(u)&&(o+=s["-"]);break;case"%":o+=s.percent.symbol}}return o}}();k=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};o=function(n,t){var r,u,i,f;if(!t)return 0;for(u=n.getTime(),i=0,f=t.length;i<f;i++)if(r=t[i].start,r===null||u>=r)return i;return 0};a=function(n,t,i,r){var u=n.getFullYear();return!r&&t.eras&&(u-=t.eras[i].offset),u},function(){var e,s,h,c,n,i,t;e=function(n,t){if(t<100){var r=new Date,f=o(r),u=a(r,n,f),i=n.twoDigitYearMax;i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i;t+=u-u%100;t>i&&(t-=100)}return t};s=function(n,u,f){var e,s=n.days,o=n._upperDays;return o||(n._upperDays=o=[t(s.names),t(s.namesAbbr),t(s.namesShort)]),u=i(u),f?(e=r(o[1],u),e===-1&&(e=r(o[2],u))):e=r(o[0],u),e};h=function(n,u,f){var h=n.months,c=n.monthsGenitive||n.months,e=n._upperMonths,s=n._upperMonthsGen,o;return e||(n._upperMonths=e=[t(h.names),t(h.namesAbbr)],n._upperMonthsGen=s=[t(c.names),t(c.namesAbbr)]),u=i(u),o=r(f?e[1]:e[0],u),o<0&&(o=r(f?s[1]:s[0],u)),o};c=function(n,t){var f=n._parseRegExp,o,y,e,p,i,b,d;if(f){if(o=f[t],o)return o}else n._parseRegExp=f={};for(var s=w(n,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],c=[],h=0,a=0,v=k(),u;(u=v.exec(s))!==null;){if(y=s.slice(h,u.index),h=v.lastIndex,a+=l(y,r),a%2){r.push(u[0]);continue}e=u[0];p=e.length;switch(e){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":i="(\\D+)";break;case"tt":case"t":i="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":i="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i="(\\d\\d?)";break;case"zzz":i="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":i="([+-]?\\d\\d?)";break;case"/":i="(\\/)";break;default:throw"Invalid date format pattern '"+e+"'.";}i&&r.push(i);c.push(u[0])}return l(s.slice(h),r),r.push("$"),b=r.join("").replace(/\s+/g,"\\s+"),d={regExp:b,groups:c},f[t]=d};n=function(n,t,i){return n<t||n>i};i=function(n){return n.split(" ").join(" ").toUpperCase()};t=function(n){for(var r=[],t=0,u=n.length;t<u;t++)r[t]=i(n[t]);return r};d=function(t,i,r){var d,wt,l,ft,et,g,nt,kt,a,dt,tt,at;t=u(t);var o=r.calendar,vt=c(o,i),yt=new RegExp(vt.regExp).exec(t);if(yt===null)return null;var pt=vt.groups,ot=null,w=null,p=null,b=null,it=null,y=0,k,st=0,ht=0,ct=0,rt=null,lt=!1;for(d=0,wt=pt.length;d<wt;d++)if(l=yt[d+1],l){var bt=pt[d],ut=bt.length,v=parseInt(l,10);switch(bt){case"dd":case"d":if(b=v,n(b,1,31))return null;break;case"MMM":case"MMMM":if(p=h(o,l,ut===3),n(p,0,11))return null;break;case"M":case"MM":if(p=v-1,n(p,0,11))return null;break;case"y":case"yy":case"yyyy":if(w=ut<4?e(o,v):v,n(w,0,9999))return null;break;case"h":case"hh":if(y=v,y===12&&(y=0),n(y,0,11))return null;break;case"H":case"HH":if(y=v,n(y,0,23))return null;break;case"m":case"mm":if(st=v,n(st,0,59))return null;break;case"s":case"ss":if(ht=v,n(ht,0,59))return null;break;case"tt":case"t":if(lt=o.PM&&(l===o.PM[0]||l===o.PM[1]||l===o.PM[2]),!lt&&(!o.AM||l!==o.AM[0]&&l!==o.AM[1]&&l!==o.AM[2]))return null;break;case"f":case"ff":case"fff":if(ct=v*Math.pow(10,3-ut),n(ct,0,999))return null;break;case"ddd":case"dddd":if(it=s(o,l,ut===3),n(it,0,6))return null;break;case"zzz":if((ft=l.split(/:/),ft.length!==2)||(k=parseInt(ft[0],10),n(k,-12,13))||(et=parseInt(ft[1],10),n(et,0,59)))return null;rt=k*60+(f(l,"-")?-et:et);break;case"z":case"zz":if(k=v,n(k,-12,13))return null;rt=k*60;break;case"g":case"gg":if(g=l,!g||!o.eras)return null;for(g=u(g.toLowerCase()),nt=0,kt=o.eras.length;nt<kt;nt++)if(g===o.eras[nt].name.toLowerCase()){ot=nt;break}if(ot===null)return null}}if(a=new Date,tt=o.convert,dt=tt?tt.fromGregorian(a)[0]:a.getFullYear(),w===null?w=dt:o.eras&&(w+=o.eras[ot||0].offset),p===null&&(p=0),b===null&&(b=1),tt){if(a=tt.toGregorian(w,p,b),a===null)return null}else if((a.setFullYear(w,p,b),a.getDate()!==b)||it!==null&&a.getDay()!==it)return null;return lt&&y<12&&(y+=12),a.setHours(y,st,ht,ct),rt!==null&&(at=a.getMinutes()-(rt+a.getTimezoneOffset()),a.setHours(a.getHours()+parseInt(at/60,10),at%60)),a}}();s=function(n,t,i){var r=t["-"],u=t["+"],e;switch(i){case"n -":r=" "+r;u=" "+u;case"n-":h(n,r)?e=["-",n.substr(0,n.length-r.length)]:h(n,u)&&(e=["+",n.substr(0,n.length-u.length)]);break;case"- n":r+=" ";u+=" ";case"-n":f(n,r)?e=["-",n.substr(r.length)]:f(n,u)&&(e=["+",n.substr(u.length)]);break;case"(n)":f(n,"(")&&h(n,")")&&(e=["-",n.substr(1,n.length-2)])}return e||["",n]};i.prototype.findClosestCulture=function(n){return i.findClosestCulture.call(this,n)};i.prototype.format=function(n,t,r){return i.format.call(this,n,t,r)};i.prototype.localize=function(n,t){return i.localize.call(this,n,t)};i.prototype.parseInt=function(n,t,r){return i.parseInt.call(this,n,t,r)};i.prototype.parseFloat=function(n,t,r){return i.parseFloat.call(this,n,t,r)};i.prototype.culture=function(n){return i.culture.call(this,n)};i.addCultureInfo=function(n,t,i){var r={},u=!1;typeof n!="string"?(i=n,n=this.culture().name,r=this.cultures[n]):typeof t!="string"?(i=t,u=this.cultures[n]==null,r=this.cultures[n]||this.cultures["default"]):(u=!0,r=this.cultures[t]);this.cultures[n]=v(!0,{},r,i);u&&(this.cultures[n].calendar=this.cultures[n].calendars.standard)};i.findClosestCulture=function(n){var r,f,h,l,y,a;if(!n)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if(typeof n=="string"&&(n=n.split(",")),c(n)){for(var i,o=this.cultures,v=n,s=v.length,e=[],t=0;t<s;t++)n=u(v[t]),h=n.split(";"),i=u(h[0]),h.length===1?f=1:(n=u(h[1]),n.indexOf("q=")===0?(n=n.substr(2),f=parseFloat(n),f=isNaN(f)?0:f):f=1),e.push({lang:i,pri:f});for(e.sort(function(n,t){return n.pri<t.pri?1:n.pri>t.pri?-1:0}),t=0;t<s;t++)if(i=e[t].lang,r=o[i],r)return r;for(t=0;t<s;t++){i=e[t].lang;do{if(l=i.lastIndexOf("-"),l===-1)break;if(i=i.substr(0,l),r=o[i],r)return r}while(1)}for(t=0;t<s;t++){i=e[t].lang;for(y in o)if(a=o[y],a.language===i)return a}}else if(typeof n=="object")return n;return r||null};i.format=function(n,t,i){var r=this.findClosestCulture(i);return n instanceof Date?n=b(n,t,r):typeof n=="number"&&(n=ut(n,t,r)),n};i.localize=function(n,t){return this.findClosestCulture(t).messages[n]||this.cultures["default"].messages[n]};i.parseDate=function(n,t,i){var r,o,f,u,s,e;if(i=this.findClosestCulture(i),t){if(typeof t=="string"&&(t=[t]),t.length)for(u=0,s=t.length;u<s;u++)if(e=t[u],e&&(r=d(n,e,i),r))break}else{f=i.calendar.patterns;for(o in f)if(r=d(n,f[o],i),r)break}return r||null};i.parseInt=function(n,t,r){return p(i.parseFloat(n,t,r))};i.parseFloat=function(n,t,i){var y,c,l,h,p,k,w,b,d,a,it;typeof t!="number"&&(i=t,t=10);var f=this.findClosestCulture(i),v=NaN,r=f.numberFormat;if(n.indexOf(f.numberFormat.currency.symbol)>-1&&(n=n.replace(f.numberFormat.currency.symbol,""),n=n.replace(f.numberFormat.currency["."],f.numberFormat["."])),n.indexOf(f.numberFormat.percent.symbol)>-1&&(n=n.replace(f.numberFormat.percent.symbol,"")),n=n.replace(/ /g,""),nt.test(n))v=parseFloat(n);else if(!t&&g.test(n))v=parseInt(n,16);else{var u=s(n,r,r.pattern[0]),e=u[0],o=u[1];e===""&&r.pattern[0]!=="(n)"&&(u=s(n,r,"(n)"),e=u[0],o=u[1]);e===""&&r.pattern[0]!=="-n"&&(u=s(n,r,"-n"),e=u[0],o=u[1]);e=e||"+";l=o.indexOf("e");l<0&&(l=o.indexOf("E"));l<0?(c=o,y=null):(c=o.substr(0,l),y=o.substr(l+1));k=r["."];w=c.indexOf(k);w<0?(h=c,p=null):(h=c.substr(0,w),p=c.substr(w+k.length));b=r[","];h=h.split(b).join("");d=b.replace(/\u00A0/g," ");b!==d&&(h=h.split(d).join(""));a=e+h;p!==null&&(a+="."+p);y!==null&&(it=s(y,r,"-n"),a+="e"+(it[0]||"+")+it[1]);tt.test(a)&&(v=parseFloat(a))}return v};i.culture=function(n){return typeof n!="undefined"&&(this.cultureSelector=n),this.findClosestCulture(n)||this.cultures["default"]}}(this),function(n){function it(n,t,i){switch(arguments.length){case 2:return null!=n?n:t;case 3:return null!=n?n:null!=t?t:i;default:throw new Error("Implement me");}}function p(n,t){return nf.call(n,t)}function ot(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ni(n){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+n)}function o(n,t){var i=!0;return w(function(){return i&&(ni(n),i=!1),t.apply(this,arguments)},t)}function kr(n,t){wr[n]||(ni(t),wr[n]=!0)}function ti(n,t){return function(i){return r(n.call(this,i),t)}}function dr(n,t){return function(i){return this.localeData().ordinal(n.call(this,i),t)}}function ii(){}function rt(n,t){t!==!1&&vi(n);ri(this,n);this._d=new Date(+n._d)}function st(n){var i=hi(n),r=i.year||0,u=i.quarter||0,f=i.month||0,e=i.week||0,o=i.day||0,s=i.hour||0,h=i.minute||0,c=i.second||0,l=i.millisecond||0;this._milliseconds=+l+1e3*c+6e4*h+36e5*s;this._days=+o+7*e;this._months=+f+3*u+12*r;this._data={};this._locale=t.localeData();this._bubble()}function w(n,t){for(var i in t)p(t,i)&&(n[i]=t[i]);return p(t,"toString")&&(n.toString=t.toString),p(t,"valueOf")&&(n.valueOf=t.valueOf),n}function ri(n,t){var u,i,r;if("undefined"!=typeof t._isAMomentObject&&(n._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(n._i=t._i),"undefined"!=typeof t._f&&(n._f=t._f),"undefined"!=typeof t._l&&(n._l=t._l),"undefined"!=typeof t._strict&&(n._strict=t._strict),"undefined"!=typeof t._tzm&&(n._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(n._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(n._offset=t._offset),"undefined"!=typeof t._pf&&(n._pf=t._pf),"undefined"!=typeof t._locale&&(n._locale=t._locale),ft.length>0)for(u in ft)i=ft[u],r=t[i],"undefined"!=typeof r&&(n[i]=r);return n}function s(n){return 0>n?Math.ceil(n):Math.floor(n)}function r(n,t,i){for(var r=""+Math.abs(n),u=n>=0;r.length<t;)r="0"+r;return(u?i?"+":"":"-")+r}function ui(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+12*(t.year()-n.year()),n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function gr(n,t){var i;return t=ct(t,n),n.isBefore(t)?i=ui(n,t):(i=ui(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function fi(n,i){return function(r,u){var f,e;return null===u||isNaN(+u)||(kr(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period)."),e=r,r=u,u=e),r="string"==typeof r?+r:r,f=t.duration(r,u),ei(this,f,n),this}}function ei(n,i,r,u){var o=i._milliseconds,f=i._days,e=i._months;u=null==u?!0:u;o&&n._d.setTime(+n._d+o*r);f&&ir(n,"Date",pt(n,"Date")+f*r);e&&tr(n,pt(n,"Month")+e*r);u&&t.updateOffset(n,f||e)}function ut(n){return"[object Array]"===Object.prototype.toString.call(n)}function oi(n){return"[object Date]"===Object.prototype.toString.call(n)||n instanceof Date}function si(n,t,r){for(var e=Math.min(n.length,t.length),o=Math.abs(n.length-t.length),f=0,u=0;e>u;u++)(r&&n[u]!==t[u]||!r&&i(n[u])!==i(t[u]))&&f++;return f+o}function e(n){if(n){var t=n.toLowerCase().replace(/(.)s$/,"$1");n=kf[n]||df[t]||t}return n}function hi(n){var i,t,r={};for(t in n)p(n,t)&&(i=e(t),i&&(r[i]=n[t]));return r}function nu(i){var r,u;if(0===i.indexOf("week"))r=7,u="day";else{if(0!==i.indexOf("month"))return;r=12;u="month"}t[i]=function(f,e){var o,s,c=t._locale[i],h=[];if("number"==typeof f&&(e=f,f=n),s=function(n){var i=t().utc().set(u,n);return c.call(t._locale,i,f||"")},null!=e)return s(e);for(o=0;r>o;o++)h.push(s(o));return h}}function i(n){var t=+n,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function ht(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function ci(n,i,r){return b(t([n,11,31+i-r]),i,r).week}function li(n){return ai(n)?366:365}function ai(n){return n%4==0&&n%100!=0||n%400==0}function vi(n){var t;n._a&&-2===n._pf.overflow&&(t=n._a[a]<0||n._a[a]>11?a:n._a[h]<1||n._a[h]>ht(n._a[l],n._a[a])?h:n._a[f]<0||n._a[f]>24||24===n._a[f]&&(0!==n._a[d]||0!==n._a[g]||0!==n._a[nt])?f:n._a[d]<0||n._a[d]>59?d:n._a[g]<0||n._a[g]>59?g:n._a[nt]<0||n._a[nt]>999?nt:-1,n._pf._overflowDayOfYear&&(l>t||t>h)&&(t=h),n._pf.overflow=t)}function yi(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===n)),t._isValid}function pi(n){return n?n.toLowerCase().replace("_","-"):n}function tu(n){for(var i,t,f,r,u=0;u<n.length;){for(r=pi(n[u]).split("-"),i=r.length,t=pi(n[u+1]),t=t?t.split("-"):null;i>0;){if(f=wi(r.slice(0,i).join("-")))return f;if(t&&t.length>=i&&si(r,t,!0)>=i-1)break;i--}u++}return null}function wi(n){var i=null;if(!tt[n]&&or)try{i=t.locale();require("./locale/"+n);t.locale(i)}catch(r){}return tt[n]}function ct(n,i){var r,u;return i._isUTC?(r=i.clone(),u=(t.isMoment(n)||oi(n)?+n:+t(n))-+r,r._d.setTime(+r._d+u),t.updateOffset(r,!1),r):t(n).local()}function iu(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function ru(n){for(var i=n.match(sr),t=0,r=i.length;r>t;t++)i[t]=v[i[t]]?v[i[t]]:iu(i[t]);return function(u){var f="";for(t=0;r>t;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function lt(n,t){return n.isValid()?(t=bi(t,n.localeData()),gt[t]||(gt[t]=ru(t)),gt[t](n)):n.localeData().invalidDate()}function bi(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(et.lastIndex=0;i>=0&&et.test(n);)n=n.replace(et,r),et.lastIndex=0,i-=1;return n}function uu(n,t){var i=t._strict;switch(n){case"Q":return cr;case"DDDD":return ar;case"YYYY":case"GGGG":case"gggg":return i?vf:ef;case"Y":case"G":case"g":return pf;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?yf:of;case"S":if(i)return cr;case"SS":if(i)return lr;case"SSS":if(i)return ar;case"DDD":return ff;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return hf;case"a":case"A":return t._locale._meridiemParse;case"x":return lf;case"X":return af;case"Z":case"ZZ":return bt;case"T":return cf;case"SSSS":return sf;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?lr:hr;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return hr;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(cu(hu(n.replace("\\","")),"i"))}}function ki(n){n=n||"";var r=n.match(bt)||[],f=r[r.length-1]||[],t=(f+"").match(bf)||["-",0,0],u=+(60*t[1])+i(t[2]);return"+"===t[0]?-u:u}function fu(n,r,u){var o,e=u._a;switch(n){case"Q":null!=r&&(e[a]=3*(i(r)-1));break;case"M":case"MM":null!=r&&(e[a]=i(r)-1);break;case"MMM":case"MMMM":o=u._locale.monthsParse(r,n,u._strict);null!=o?e[a]=o:u._pf.invalidMonth=r;break;case"D":case"DD":null!=r&&(e[h]=i(r));break;case"Do":null!=r&&(e[h]=i(parseInt(r.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=r&&(u._dayOfYear=i(r));break;case"YY":e[l]=t.parseTwoDigitYear(r);break;case"YYYY":case"YYYYY":case"YYYYYY":e[l]=i(r);break;case"a":case"A":u._isPm=u._locale.isPM(r);break;case"h":case"hh":u._pf.bigHour=!0;case"H":case"HH":e[f]=i(r);break;case"m":case"mm":e[d]=i(r);break;case"s":case"ss":e[g]=i(r);break;case"S":case"SS":case"SSS":case"SSSS":e[nt]=i(1e3*("0."+r));break;case"x":u._d=new Date(i(r));break;case"X":u._d=new Date(1e3*parseFloat(r));break;case"Z":case"ZZ":u._useUTC=!0;u._tzm=ki(r);break;case"dd":case"ddd":case"dddd":o=u._locale.weekdaysParse(r);null!=o?(u._w=u._w||{},u._w.d=o):u._pf.invalidWeekday=r;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":n=n.substr(0,1);case"gggg":case"GGGG":case"GGGGG":n=n.substr(0,2);r&&(u._w=u._w||{},u._w[n]=i(r));break;case"gg":case"GG":u._w=u._w||{};u._w[n]=t.parseTwoDigitYear(r)}}function eu(n){var i,o,f,u,r,e,s;i=n._w;null!=i.GG||null!=i.W||null!=i.E?(r=1,e=4,o=it(i.GG,n._a[l],b(t(),1,4).year),f=it(i.W,1),u=it(i.E,1)):(r=n._locale._week.dow,e=n._locale._week.doy,o=it(i.gg,n._a[l],b(t(),r,e).year),f=it(i.w,1),null!=i.d?(u=i.d,r>u&&++f):u=null!=i.e?i.e+r:r);s=du(o,f,u,e,r);n._a[l]=s.year;n._dayOfYear=s.dayOfYear}function at(n){var t,i,r,u,e=[];if(!n._d){for(r=su(n),n._w&&null==n._a[h]&&null==n._a[a]&&eu(n),n._dayOfYear&&(u=it(n._a[l],r[l]),n._dayOfYear>li(u)&&(n._pf._overflowDayOfYear=!0),i=yt(u,0,n._dayOfYear),n._a[a]=i.getUTCMonth(),n._a[h]=i.getUTCDate()),t=0;3>t&&null==n._a[t];++t)n._a[t]=e[t]=r[t];for(;7>t;t++)n._a[t]=e[t]=null==n._a[t]?2===t?1:0:n._a[t];24===n._a[f]&&0===n._a[d]&&0===n._a[g]&&0===n._a[nt]&&(n._nextDay=!0,n._a[f]=0);n._d=(n._useUTC?yt:pu).apply(null,e);null!=n._tzm&&n._d.setUTCMinutes(n._d.getUTCMinutes()+n._tzm);n._nextDay&&(n._a[f]=24)}}function ou(n){var t;n._d||(t=hi(n._i),n._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],at(n))}function su(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function vt(i){if(i._f===t.ISO_8601)return void di(i);i._a=[];i._pf.empty=!0;for(var r,e,h,u=""+i._i,l=u.length,c=0,s=bi(i._f,i._locale).match(sr)||[],o=0;o<s.length;o++)e=s[o],r=(u.match(uu(e,i))||[])[0],r&&(h=u.substr(0,u.indexOf(r)),h.length>0&&i._pf.unusedInput.push(h),u=u.slice(u.indexOf(r)+r.length),c+=r.length),v[e]?(r?i._pf.empty=!1:i._pf.unusedTokens.push(e),fu(e,r,i)):i._strict&&!r&&i._pf.unusedTokens.push(e);i._pf.charsLeftOver=l-c;u.length>0&&i._pf.unusedInput.push(u);i._pf.bigHour===!0&&i._a[f]<=12&&(i._pf.bigHour=n);i._isPm&&i._a[f]<12&&(i._a[f]+=12);i._isPm===!1&&12===i._a[f]&&(i._a[f]=0);at(i);vi(i)}function hu(n){return n.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u})}function cu(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function lu(n){var t,f,u,r,i;if(0===n._f.length)return n._pf.invalidFormat=!0,void(n._d=new Date(NaN));for(r=0;r<n._f.length;r++)i=0,t=ri({},n),null!=n._useUTC&&(t._useUTC=n._useUTC),t._pf=ot(),t._f=n._f[r],vt(t),yi(t)&&(i+=t._pf.charsLeftOver,i+=10*t._pf.unusedTokens.length,t._pf.score=i,(null==u||u>i)&&(u=i,f=t));w(n,f||t)}function di(n){var t,i,r=n._i,u=wf.exec(r);if(u){for(n._pf.iso=!0,t=0,i=kt.length;i>t;t++)if(kt[t][1].exec(r)){n._f=kt[t][0]+(u[6]||" ");break}for(t=0,i=dt.length;i>t;t++)if(dt[t][1].exec(r)){n._f+=dt[t][0];break}r.match(bt)&&(n._f+="Z");vt(n)}else n._isValid=!1}function au(n){di(n);n._isValid===!1&&(delete n._isValid,t.createFromInputFallback(n))}function vu(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function yu(i){var u,r=i._i;r===n?i._d=new Date:oi(r)?i._d=new Date(+r):null!==(u=tf.exec(r))?i._d=new Date(+u[1]):"string"==typeof r?au(i):ut(r)?(i._a=vu(r.slice(0),function(n){return parseInt(n,10)}),at(i)):"object"==typeof r?ou(i):"number"==typeof r?i._d=new Date(r):t.createFromInputFallback(i)}function pu(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return 1970>n&&o.setFullYear(n),o}function yt(n){var t=new Date(Date.UTC.apply(null,arguments));return 1970>n&&t.setUTCFullYear(n),t}function wu(n,t){if("string"==typeof n)if(isNaN(n)){if(n=t.weekdaysParse(n),"number"!=typeof n)return null}else n=parseInt(n,10);return n}function bu(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function ku(n,i,r){var u=t.duration(n).abs(),c=k(u.as("s")),e=k(u.as("m")),o=k(u.as("h")),s=k(u.as("d")),h=k(u.as("M")),l=k(u.as("y")),f=c<y.s&&["s",c]||1===e&&["m"]||e<y.m&&["mm",e]||1===o&&["h"]||o<y.h&&["hh",o]||1===s&&["d"]||s<y.d&&["dd",s]||1===h&&["M"]||h<y.M&&["MM",h]||1===l&&["y"]||["yy",l];return f[2]=i,f[3]=+n>0,f[4]=r,bu.apply({},f)}function b(n,i,r){var f,e=r-i,u=r-n.day();return u>e&&(u-=7),e-7>u&&(u+=7),f=t(n).add(u,"d"),{week:Math.ceil(f.dayOfYear()/7),year:f.year()}}function du(n,t,i,r,u){var o,e,f=yt(n,0,1).getUTCDay();return f=0===f?7:f,i=null!=i?i:u,o=u-f+(f>r?7:0)-(u>f?7:0),e=7*(t-1)+(i-u)+o+1,{year:e>0?n:n-1,dayOfYear:e>0?e:li(n-1)+e}}function gi(i){var u,r=i._i,f=i._f;return i._locale=i._locale||t.localeData(i._l),null===r||f===n&&""===r?t.invalid({nullInput:!0}):("string"==typeof r&&(i._i=r=i._locale.preparse(r)),t.isMoment(r)?new rt(r,!0):(f?ut(f)?lu(i):vt(i):yu(i),u=new rt(i),u._nextDay&&(u.add(1,"d"),u._nextDay=n),u))}function nr(n,i){var u,r;if(1===i.length&&ut(i[0])&&(i=i[0]),!i.length)return t();for(u=i[0],r=1;r<i.length;++r)i[r][n](u)&&(u=i[r]);return u}function tr(n,t){var i;return"string"==typeof t&&(t=n.localeData().monthsParse(t),"number"!=typeof t)?n:(i=Math.min(n.date(),ht(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function pt(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function ir(n,t,i){return"Month"===t?tr(n,i):n._d["set"+(n._isUTC?"UTC":"")+t](i)}function c(n,i){return function(r){return null!=r?(ir(this,n,r),t.updateOffset(this,i),this):pt(this,n)}}function rr(n){return 400*n/146097}function ur(n){return 146097*n/400}function gu(n){t.duration.fn[n]=function(){return this._data[n]}}function fr(n){"undefined"==typeof ender&&(er=wt.moment,wt.moment=n?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",t):t)}for(var t,er,u,wt="undefined"!=typeof global?global:this,k=Math.round,nf=Object.prototype.hasOwnProperty,l=0,a=1,h=2,f=3,d=4,g=5,nt=6,tt={},ft=[],or="undefined"!=typeof module&&module&&module.exports,tf=/^\/?Date\((\-?\d+)/i,rf=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,uf=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,sr=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,et=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,hr=/\d\d?/,ff=/\d{1,3}/,ef=/\d{1,4}/,of=/[+\-]?\d{1,6}/,sf=/\d+/,hf=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,bt=/Z|[\+\-]\d\d:?\d\d/gi,cf=/T/i,lf=/[\+\-]?\d+/,af=/[\+\-]?\d+(\.\d{1,3})?/,cr=/\d/,lr=/\d\d/,ar=/\d{3}/,vf=/\d{4}/,yf=/[+-]?\d{6}/,pf=/[+-]?\d+/,wf=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bf=/([\+\-]|\d\d)/gi,vr=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),kf={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},df={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},gt={},y={s:45,m:45,h:22,d:26,M:11},yr="DDD w W M D d".split(" "),pr="M D H h m s w W".split(" "),v={M:function(){return this.month()+1},MMM:function(n){return this.localeData().monthsShort(this,n)},MMMM:function(n){return this.localeData().months(this,n)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(n){return this.localeData().weekdaysMin(this,n)},ddd:function(n){return this.localeData().weekdaysShort(this,n)},dddd:function(n){return this.localeData().weekdays(this,n)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var n=this.year(),t=n>=0?"+":"-";return t+r(Math.abs(n),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return r(i(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var n=-this.zone(),t="+";return 0>n&&(n=-n,t="-"),t+r(i(n/60),2)+":"+r(i(n)%60,2)},ZZ:function(){var n=-this.zone(),t="+";return 0>n&&(n=-n,t="-"),t+r(i(n/60),2)+r(i(n)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},wr={},br=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];yr.length;)u=yr.pop(),v[u+"o"]=dr(v[u],u);for(;pr.length;)u=pr.pop(),v[u+u]=ti(v[u],2);for(v.DDDD=ti(v.DDD,3),w(ii.prototype,{set:function(n){var t;for(var i in n)t=n[i],"function"==typeof t?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(n){return this._months[n.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(n){return this._monthsShort[n.month()]},monthsParse:function(n,i,r){var u,f,e;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),u=0;12>u;u++)if((f=t.utc([2e3,u]),r&&!this._longMonthsParse[u]&&(this._longMonthsParse[u]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[u]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),r||this._monthsParse[u]||(e="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[u]=new RegExp(e.replace(".",""),"i")),r&&"MMMM"===i&&this._longMonthsParse[u].test(n))||r&&"MMM"===i&&this._shortMonthsParse[u].test(n)||!r&&this._monthsParse[u].test(n))return u},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(n){return this._weekdays[n.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(n){return this._weekdaysShort[n.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(n){return this._weekdaysMin[n.day()]},weekdaysParse:function(n){var i,r,u;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;7>i;i++)if(this._weekdaysParse[i]||(r=t([2e3,1]).day(i),u="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(u.replace(".",""),"i")),this._weekdaysParse[i].test(n))return i},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(n){var t=this._longDateFormat[n];return!t&&this._longDateFormat[n.toUpperCase()]&&(t=this._longDateFormat[n.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n]=t),t},isPM:function(n){return"p"===(n+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(n,t,i){var r=this._calendar[n];return"function"==typeof r?r.apply(t,[i]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(n,t,i,r){var u=this._relativeTime[i];return"function"==typeof u?u(n,t,i,r):u.replace(/%d/i,n)},pastFuture:function(n,t){var i=this._relativeTime[n>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(n){return this._ordinal.replace("%d",n)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(n){return n},postformat:function(n){return n},week:function(n){return b(n,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,i,r,u){var f;return"boolean"==typeof r&&(u=r,r=n),f={},f._isAMomentObject=!0,f._i=t,f._f=i,f._l=r,f._strict=u,f._isUTC=!1,f._pf=ot(),gi(f)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),t.min=function(){var n=[].slice.call(arguments,0);return nr("isBefore",n)},t.max=function(){var n=[].slice.call(arguments,0);return nr("isAfter",n)},t.utc=function(t,i,r,u){var f;return"boolean"==typeof r&&(u=r,r=n),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=r,f._i=t,f._f=i,f._strict=u,f._pf=ot(),gi(f).utc()},t.unix=function(n){return t(1e3*n)},t.duration=function(n,r){var o,c,s,l,e=n,u=null;return t.isDuration(n)?e={ms:n._milliseconds,d:n._days,M:n._months}:"number"==typeof n?(e={},r?e[r]=n:e.milliseconds=n):(u=rf.exec(n))?(o="-"===u[1]?-1:1,e={y:0,d:i(u[h])*o,h:i(u[f])*o,m:i(u[d])*o,s:i(u[g])*o,ms:i(u[nt])*o}):(u=uf.exec(n))?(o="-"===u[1]?-1:1,s=function(n){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*o},e={y:s(u[2]),M:s(u[3]),d:s(u[4]),h:s(u[5]),m:s(u[6]),s:s(u[7]),w:s(u[8])}):"object"==typeof e&&("from"in e||"to"in e)&&(l=gr(t(e.from),t(e.to)),e={},e.ms=l.milliseconds,e.M=l.months),c=new st(e),t.isDuration(n)&&p(n,"_locale")&&(c._locale=n._locale),c},t.version="2.8.4",t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.ISO_8601=function(){},t.momentProperties=ft,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,i){return y[t]===n?!1:i===n?y[t]:(y[t]=i,!0)},t.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(n,i){return t.locale(n,i)}),t.locale=function(n,i){var r;return n&&(r="undefined"!=typeof i?t.defineLocale(n,i):t.localeData(n),r&&(t.duration._locale=t._locale=r)),t._locale._abbr},t.defineLocale=function(n,i){return null!==i?(i.abbr=n,tt[n]||(tt[n]=new ii),tt[n].set(i),t.locale(n),tt[n]):(delete tt[n],null)},t.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(n){return t.localeData(n)}),t.localeData=function(n){var i;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return t._locale;if(!ut(n)){if(i=wi(n))return i;n=[n]}return tu(n)},t.isMoment=function(n){return n instanceof rt||null!=n&&p(n,"_isAMomentObject")},t.isDuration=function(n){return n instanceof st},u=br.length-1;u>=0;--u)nu(br[u]);t.normalizeUnits=function(n){return e(n)};t.invalid=function(n){var i=t.utc(NaN);return null!=n?w(i._pf,n):i._pf.userInvalidated=!0,i};t.parseZone=function(){return t.apply(null,arguments).parseZone()};t.parseTwoDigitYear=function(n){return i(n)+(i(n)>68?1900:2e3)};w(t.fn=rt.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var n=t(this).utc();return 0<n.year()&&n.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():lt(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):lt(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var n=this;return[n.year(),n.month(),n.date(),n.hours(),n.minutes(),n.seconds(),n.milliseconds()]},isValid:function(){return yi(this)},isDSTShifted:function(){return this._a?this.isValid()&&si(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return w({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(n){return this.zone(0,n)},local:function(n){return this._isUTC&&(this.zone(0,n),this._isUTC=!1,n&&this.add(this._dateTzOffset(),"m")),this},format:function(n){var i=lt(this,n||t.defaultFormat);return this.localeData().postformat(i)},add:fi(1,"add"),subtract:fi(-1,"subtract"),diff:function(n,i,r){var u,o,h,f=ct(n,this),c=6e4*(this.zone()-f.zone());return i=e(i),"year"===i||"month"===i?(u=432e5*(this.daysInMonth()+f.daysInMonth()),o=12*(this.year()-f.year())+(this.month()-f.month()),h=this-t(this).startOf("month")-(f-t(f).startOf("month")),h-=6e4*(this.zone()-t(this).startOf("month").zone()-(f.zone()-t(f).startOf("month").zone())),o+=h/u,"year"===i&&(o/=12)):(u=this-f,o="second"===i?u/1e3:"minute"===i?u/6e4:"hour"===i?u/36e5:"day"===i?(u-c)/864e5:"week"===i?(u-c)/6048e5:u),r?o:s(o)},from:function(n,i){return t.duration({to:this,from:n}).locale(this.locale()).humanize(!i)},fromNow:function(n){return this.from(t(),n)},calendar:function(n){var r=n||t(),u=ct(r,this).startOf("day"),i=this.diff(u,"days",!0),f=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(f,this,t(r)))},isLeapYear:function(){return ai(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=n?(n=wu(n,this.localeData()),this.add(n-t,"d")):t},month:c("Month",!0),startOf:function(n){switch(n=e(n)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===n?this.weekday(0):"isoWeek"===n&&this.isoWeekday(1),"quarter"===n&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=e(t),t===n||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(n,i){var r;return i=e("undefined"!=typeof i?i:"millisecond"),"millisecond"===i?(n=t.isMoment(n)?n:t(n),+this>+n):(r=t.isMoment(n)?+n:+t(n),r<+this.clone().startOf(i))},isBefore:function(n,i){var r;return i=e("undefined"!=typeof i?i:"millisecond"),"millisecond"===i?(n=t.isMoment(n)?n:t(n),+n>+this):(r=t.isMoment(n)?+n:+t(n),+this.clone().endOf(i)<r)},isSame:function(n,i){var r;return i=e(i||"millisecond"),"millisecond"===i?(n=t.isMoment(n)?n:t(n),+this==+n):(r=+t(n),+this.clone().startOf(i)<=r&&r<=+this.clone().endOf(i))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(n){return n=t.apply(null,arguments),this>n?this:n}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(n){return n=t.apply(null,arguments),n>this?this:n}),zone:function(n,i){var r,u=this._offset||0;return null==n?this._isUTC?u:this._dateTzOffset():("string"==typeof n&&(n=ki(n)),Math.abs(n)<16&&(n=60*n),!this._isUTC&&i&&(r=this._dateTzOffset()),this._offset=n,this._isUTC=!0,null!=r&&this.subtract(r,"m"),u!==n&&(!i||this._changeInProgress?ei(this,t.duration(u-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(n){return n=n?t(n).zone():0,(this.zone()-n)%60==0},daysInMonth:function(){return ht(this.year(),this.month())},dayOfYear:function(n){var i=k((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return null==n?i:this.add(n-i,"d")},quarter:function(n){return null==n?Math.ceil((this.month()+1)/3):this.month(3*(n-1)+this.month()%3)},weekYear:function(n){var t=b(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==n?t:this.add(n-t,"y")},isoWeekYear:function(n){var t=b(this,1,4).year;return null==n?t:this.add(n-t,"y")},week:function(n){var t=this.localeData().week(this);return null==n?t:this.add(7*(n-t),"d")},isoWeek:function(n){var t=b(this,1,4).week;return null==n?t:this.add(7*(n-t),"d")},weekday:function(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==n?t:this.add(n-t,"d")},isoWeekday:function(n){return null==n?this.day()||7:this.day(this.day()%7?n:n-7)},isoWeeksInYear:function(){return ci(this.year(),1,4)},weeksInYear:function(){var n=this.localeData()._week;return ci(this.year(),n.dow,n.doy)},get:function(n){return n=e(n),this[n]()},set:function(n,t){return n=e(n),"function"==typeof this[n]&&this[n](t),this},locale:function(i){var r;return i===n?this._locale._abbr:(r=t.localeData(i),null!=r&&(this._locale=r),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===n?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}});t.fn.millisecond=t.fn.milliseconds=c("Milliseconds",!1);t.fn.second=t.fn.seconds=c("Seconds",!1);t.fn.minute=t.fn.minutes=c("Minutes",!1);t.fn.hour=t.fn.hours=c("Hours",!0);t.fn.date=c("Date",!0);t.fn.dates=o("dates accessor is deprecated. Use date instead.",c("Date",!0));t.fn.year=c("FullYear",!0);t.fn.years=o("years accessor is deprecated. Use year instead.",c("FullYear",!0));t.fn.days=t.fn.day;t.fn.months=t.fn.month;t.fn.weeks=t.fn.week;t.fn.isoWeeks=t.fn.isoWeek;t.fn.quarters=t.fn.quarter;t.fn.toJSON=t.fn.toISOString;w(t.duration.fn=st.prototype,{_bubble:function(){var u,f,e,o=this._milliseconds,t=this._days,i=this._months,n=this._data,r=0;n.milliseconds=o%1e3;u=s(o/1e3);n.seconds=u%60;f=s(u/60);n.minutes=f%60;e=s(f/60);n.hours=e%24;t+=s(e/24);r=s(rr(t));t-=s(ur(r));i+=s(t/30);t%=30;r+=s(i/12);i%=12;n.days=t;n.months=i;n.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return s(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*i(this._months/12)},humanize:function(n){var t=ku(this,!n,this.localeData());return n&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(n,i){var r=t.duration(n,i);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(n,i){var r=t.duration(n,i);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(n){return n=e(n),this[n.toLowerCase()+"s"]()},as:function(n){var t,i;if(n=e(n),"month"===n||"year"===n)return t=this._days+this._milliseconds/864e5,i=this._months+12*rr(t),"month"===n?i:i/12;switch(t=this._days+Math.round(ur(this._months/12)),n){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 1440*t+this._milliseconds/6e4;case"second":return 86400*t+this._milliseconds/1e3;case"millisecond":return Math.floor(864e5*t)+this._milliseconds;default:throw new Error("Unknown unit "+n);}},lang:t.fn.lang,locale:t.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var r=Math.abs(this.years()),u=Math.abs(this.months()),f=Math.abs(this.days()),n=Math.abs(this.hours()),t=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(r?r+"Y":"")+(u?u+"M":"")+(f?f+"D":"")+(n||t||i?"T":"")+(n?n+"H":"")+(t?t+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale}});t.duration.fn.toString=t.duration.fn.toISOString;for(u in vr)p(vr,u)&&gu(u.toLowerCase());t.duration.fn.asMilliseconds=function(){return this.as("ms")};t.duration.fn.asSeconds=function(){return this.as("s")};t.duration.fn.asMinutes=function(){return this.as("m")};t.duration.fn.asHours=function(){return this.as("h")};t.duration.fn.asDays=function(){return this.as("d")};t.duration.fn.asWeeks=function(){return this.as("weeks")};t.duration.fn.asMonths=function(){return this.as("M")};t.duration.fn.asYears=function(){return this.as("y")};t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,r=1===i(n%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return n+r}});or?module.exports=t:"function"==typeof define&&define.amd?(define("moment",function(n,i,r){return r.config&&r.config()&&r.config().noGlobal===!0&&(wt.moment=er),t}),fr(!0)):fr()}.call(this),function(){function ht(n,t){if(!t||typeof t=="function")return n;for(var i in t)n[i]=t[i];return n}function tt(n,t){for(var i in t)i in n?tt(n[i],t[i]):n[i]=t[i];return n}function ct(n,t,i){var r,u=0,f=n.length,e=f===undefined||Object.prototype.toString.apply(n)!=="[object Array]"||typeof n=="function";if(i){if(e){for(r in n)if(t.apply(n[r],i)===!1)break}else for(;u<f;)if(t.apply(n[u++],i)===!1)break}else if(e){for(r in n)if(t.call(n[r],r,n[r])===!1)break}else for(;u<f;)if(t.call(n[u],u,n[u++])===!1)break;return n}function lt(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(n){return it[n]}):n}function at(n){var r=function(n){if(window.XMLHttpRequest)return n(null,new XMLHttpRequest);if(window.ActiveXObject)try{return n(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return n(null,new ActiveXObject("Microsoft.XMLHTTP"))}return n(new Error)},u=function(n){var i,t;if(typeof n=="string")return n;i=[];for(t in n)n.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return i.join("&")},f=function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},e=function(n){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h,o,t,i,c,l,s,r,u;n=f(n);h="";u=0;do o=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),c=o>>2,l=(o&3)<<4|t>>4,s=(t&15)<<2|i>>6,r=i&63,isNaN(t)?s=r=64:isNaN(i)&&(r=64),h+=e.charAt(c)+e.charAt(l)+e.charAt(s)+e.charAt(r),o=t=i="",c=l=s=r="";while(u<n.length);return h},o=function(){for(var n,t,r=arguments[0],i=1;i<arguments.length;i++){n=arguments[i];for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t])}return r},i=function(n,f,e,s){var c,l,h,v,a;if(typeof e=="function"&&(s=e,e={}),e.cache=e.cache||!1,e.data=e.data||{},e.headers=e.headers||{},e.jsonp=e.jsonp||!1,e.async=e.async===undefined?!0:e.async,c=o({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},i.headers,e.headers),l=c["content-type"]==="application/json"?JSON.stringify(e.data):u(e.data),n==="GET"&&(h=[],l&&(h.push(l),l=null),e.cache||h.push("_="+(new Date).getTime()),e.jsonp&&(h.push("callback="+e.jsonp),h.push("jsonp="+e.jsonp)),h=h.join("&"),h.length>1&&(f+=f.indexOf("?")>-1?"&"+h:"?"+h),e.jsonp)){v=document.getElementsByTagName("head")[0];a=document.createElement("script");a.type="text/javascript";a.src=f;v.appendChild(a);return}r(function(i,r){if(i)return s(i);r.open(n,f,e.async);for(var u in c)c.hasOwnProperty(u)&&r.setRequestHeader(u,c[u]);r.onreadystatechange=function(){if(r.readyState===4){var n=r.responseText||"";if(!s)return;s(r.status,{text:function(){return n},json:function(){try{return JSON.parse(n)}catch(i){return t.error("Can not parse JSON. URL: "+f),{}}}})}};r.send(l)})},s={authBasic:function(n,t){i.headers.Authorization="Basic "+e(n+":"+t)},connect:function(n,t,r){return i("CONNECT",n,t,r)},del:function(n,t,r){return i("DELETE",n,t,r)},get:function(n,t,r){return i("GET",n,t,r)},head:function(n,t,r){return i("HEAD",n,t,r)},headers:function(n){i.headers=n||{}},isAllowed:function(n,t,i){this.options(n,function(n,r){i(r.text().indexOf(t)!==-1)})},options:function(n,t,r){return i("OPTIONS",n,t,r)},patch:function(n,t,r){return i("PATCH",n,t,r)},post:function(n,t,r){return i("POST",n,t,r)},put:function(n,t,r){return i("PUT",n,t,r)},trace:function(n,t,r){return i("TRACE",n,t,r)}},h=n.type?n.type.toLowerCase():"get";s[h](n.url,n,function(t,i){t===200||t===0&&i.text()?n.success(i.json(),t,null):n.error(i.text(),t,null)})}function d(e,h){var l,c,y,p,b,w,a,d;if(typeof e=="function"&&(h=e,e={}),e=e||{},t.extend(n,e),delete n.fixLng,n.functions&&(delete n.functions,t.extend(t,e.functions)),typeof n.ns=="string"&&(n.ns={namespaces:[n.ns],defaultNs:n.ns}),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),(typeof n.fallbackLng=="string"||typeof n.fallbackLng=="boolean")&&(n.fallbackLng=[n.fallbackLng]),n.interpolationPrefixEscaped=t.regexEscape(n.interpolationPrefix),n.interpolationSuffixEscaped=t.regexEscape(n.interpolationSuffix),n.lng||(n.lng=t.detectLanguage()),v=t.toLanguages(n.lng),s=v[0],t.log("currentLng set to: "+s),n.useCookie&&t.cookie.read(n.cookieName)!==s&&t.cookie.create(n.cookieName,s,n.cookieExpirationTime,n.cookieDomain),n.detectLngFromLocalStorage&&typeof document!="undefined"&&window.localStorage&&t.localStorage.setItem("i18next_lng",s),l=o,e.fixLng&&(l=function(n,t){return t=t||{},t.lng=t.lng||l.lng,o(n,t)},l.lng=s),f.setCurrentLng(s),i&&n.setJqueryExt&&ri(),i&&i.Deferred&&(c=i.Deferred()),n.resStore)return(r=n.resStore,k=!0,h&&h(l),c&&c.resolve(l),c)?c.promise():void 0;for(y=t.toLanguages(n.lng),typeof n.preload=="string"&&(n.preload=[n.preload]),p=0,b=n.preload.length;p<b;p++)for(w=t.toLanguages(n.preload[p]),a=0,d=w.length;a<d;a++)y.indexOf(w[a])<0&&y.push(w[a]);return u.sync.load(y,n,function(n,t){r=t;k=!0;h&&h(l);c&&c.resolve(l)}),c?c.promise():void 0}function pt(t,i){typeof t=="string"&&(t=[t]);for(var r=0,u=t.length;r<u;r++)n.preload.indexOf(t[r])<0&&n.preload.push(t[r]);return d(i)}function wt(i,u,f,e){typeof u!="string"?(f=u,u=n.ns.defaultNs):n.ns.namespaces.indexOf(u)<0&&n.ns.namespaces.push(u);r[i]=r[i]||{};r[i][u]=r[i][u]||{};e?t.deepExtend(r[i][u],f):t.extend(r[i][u],f)}function bt(t,i){var u,f,e;typeof i!="string"&&(i=n.ns.defaultNs);r[t]=r[t]||{};u=r[t][i]||{};f=!1;for(e in u)u.hasOwnProperty(e)&&(f=!0);return f}function kt(t,i){typeof i!="string"&&(i=n.ns.defaultNs);r[t]=r[t]||{};r[t][i]={}}function rt(t,i,u,f){typeof i!="string"?(resource=i,i=n.ns.defaultNs):n.ns.namespaces.indexOf(i)<0&&n.ns.namespaces.push(i);r[t]=r[t]||{};r[t][i]=r[t][i]||{};for(var o=u.split(n.keyseparator),e=0,s=r[t][i],h=s;o[e];)e==o.length-1?s[o[e]]=f:(s[o[e]]==null&&(s[o[e]]={}),s=s[o[e]]),e++}function dt(t,i,r){typeof i!="string"?(resource=i,i=n.ns.defaultNs):n.ns.namespaces.indexOf(i)<0&&n.ns.namespaces.push(i);for(var u in r)typeof r[u]=="string"&&rt(t,i,u,r[u])}function gt(t){n.ns.defaultNs=t}function ni(n,t){ut([n],t)}function ut(i,f){var d={dynamicLoad:n.dynamicLoad,resGetPath:n.resGetPath,getAsync:n.getAsync,customLoad:n.customLoad,ns:{namespaces:i,defaultNs:""}},o=t.toLanguages(n.lng),c,p,l,s,w,e,h,b,a,y,v,k;for(typeof n.preload=="string"&&(n.preload=[n.preload]),c=0,p=n.preload.length;c<p;c++)for(l=t.toLanguages(n.preload[c]),s=0,w=l.length;s<w;s++)o.indexOf(l[s])<0&&o.push(l[s]);for(e=[],h=0,b=o.length;h<b;h++){if(a=!1,y=r[o[h]],y)for(v=0,k=i.length;v<k;v++)y[i[v]]||(a=!0);else a=!0;a&&e.push(o[h])}e.length?u.sync._fetch(e,d,function(o,s){var h=i.length*e.length;t.each(i,function(i,o){n.ns.namespaces.indexOf(o)<0&&n.ns.namespaces.push(o);t.each(e,function(t,i){r[i]=r[i]||{};r[i][o]=s[i][o];h--;h===0&&f&&(n.useLocalStorage&&u.sync._storeLocal(r),f())})})}):f&&f()}function ft(n,t,i){return typeof t=="function"?(i=t,t={}):t||(t={}),t.lng=n,d(t,i)}function ti(){return s}function ii(n){r={};ft(s,n)}function ri(){function t(t,r,u){var e,o,f,s,h;r.length!==0&&(e="text",r.indexOf("[")===0&&(o=r.split("]"),r=o[1],e=o[0].substr(1,o[0].length-1)),r.indexOf(";")===r.length-1&&(r=r.substr(0,r.length-2)),e==="html"?(f=n.defaultValueFromContent?i.extend({defaultValue:t.html()},u):u,t.html(i.t(r,f))):e==="text"?(f=n.defaultValueFromContent?i.extend({defaultValue:t.text()},u):u,t.text(i.t(r,f))):e==="prepend"?(f=n.defaultValueFromContent?i.extend({defaultValue:t.html()},u):u,t.prepend(i.t(r,f))):e==="append"?(f=n.defaultValueFromContent?i.extend({defaultValue:t.html()},u):u,t.append(i.t(r,f))):e.indexOf("data-")===0?(s=e.substr(5),f=n.defaultValueFromContent?i.extend({defaultValue:t.data(s)},u):u,h=i.t(r,f),t.data(s,h),t.attr(e,h)):(f=n.defaultValueFromContent?i.extend({defaultValue:t.attr(e)},u):u,t.attr(e,i.t(r,f))))}function r(r,u){var f=r.attr(n.selectorAttr),e,o,s;(f||typeof f=="undefined"||f===!1||(f=r.text()||r.val()),f)&&(e=r,o=r.data("i18n-target"),o&&(e=r.find(o)||r),u||n.useDataAttrOptions!==!0||(u=r.data("i18n-options")),u=u||{},f.indexOf(";")>=0?(s=f.split(";"),i.each(s,function(n,i){i!==""&&t(e,i,u)})):t(e,f,u),n.useDataAttrOptions===!0&&r.data("i18n-options",u))}i.t=i.t||o;i.fn.i18n=function(t){return this.each(function(){r(i(this),t);var u=i(this).find("["+n.selectorAttr+"]");u.each(function(){r(i(this),t)})})}}function e(i,r,u,f){if(!i||(f=f||r,i.indexOf(f.interpolationPrefix||n.interpolationPrefix)<0))return i;var o=f.interpolationPrefix?t.regexEscape(f.interpolationPrefix):n.interpolationPrefixEscaped,s=f.interpolationSuffix?t.regexEscape(f.interpolationSuffix):n.interpolationSuffixEscaped,h="HTML"+s,c=r.replace&&typeof r.replace=="object"?r.replace:r;return t.each(c,function(r,c){var l=u?u+n.keyseparator+r:r;typeof c=="object"&&c!==null?i=e(i,c,l,f):f.escapeInterpolation||n.escapeInterpolation?(i=i.replace(new RegExp([o,l,h].join(""),"g"),t.regexReplacementEscape(c)),i=i.replace(new RegExp([o,l,s].join(""),"g"),t.regexReplacementEscape(t.escape(c)))):i=i.replace(new RegExp([o,l,s].join(""),"g"),t.regexReplacementEscape(c))}),i}function g(i,r){var c=",",l="{",o="}",e=t.extend({},r),f,h,y,p;for(delete e.postProcess;i.indexOf(n.reusePrefix)!=-1;){if(b++,b>n.maxRecursion)break;var s=i.lastIndexOf(n.reusePrefix),a=i.indexOf(n.reuseSuffix,s)+n.reuseSuffix.length,v=i.substring(s,a),u=v.replace(n.reusePrefix,"").replace(n.reuseSuffix,"");if(a<=s)return t.error("there is an missing closing in following translation value",i),"";if(u.indexOf(c)!=-1&&(f=u.indexOf(c),u.indexOf(l,f)!=-1&&u.indexOf(o,f)!=-1)){h=u.indexOf(l,f);y=u.indexOf(o,h)+o.length;try{e=t.extend(e,JSON.parse(u.substring(h,y)));u=u.substring(0,f)}catch(w){}}p=nt(u,e);i=i.replace(v,t.regexReplacementEscape(p))}return i}function ui(n){return n.context&&(typeof n.context=="string"||typeof n.context=="number")}function et(n){return n.count!==undefined&&typeof n.count!="string"}function fi(n){return n.indefinite_article!==undefined&&typeof n.indefinite_article!="string"&&n.indefinite_article}function ot(n,t){t=t||{};var r=y(n,t),i=p(n,t);return i!==undefined||i===r}function o(n,i){return(i=i||{},!k)?(t.log("i18next not finished initialization. you might have called t function before loading resources finished."),i.defaultValue||""):(b=0,nt.apply(null,arguments))}function y(n,t){return t.defaultValue!==undefined?t.defaultValue:n}function ei(){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return{postProcess:"sprintf",sprintf:t}}function nt(i,r){var u,c,s,b,k;if(r&&typeof r!="object"?n.shortcutFunction==="sprintf"?r=ei.apply(null,arguments):n.shortcutFunction==="defaultValue"&&(r={defaultValue:r}):r=r||{},typeof n.defaultVariables=="object"&&(r=t.extend({},n.defaultVariables,r)),i===undefined||i===null||i==="")return"";if(typeof i=="string"&&(i=[i]),u=i[0],i.length>1)for(c=0;c<i.length;c++)if(u=i[c],ot(u,r))break;var f=y(u,r),o=p(u,r),a=r.lng?t.toLanguages(r.lng,r.fallbackLng):v,w=r.ns||n.ns.defaultNs,h;return u.indexOf(n.nsseparator)>-1&&(h=u.split(n.nsseparator),w=h[0],u=h[1]),o===undefined&&n.sendMissing&&typeof n.missingKeyHandler=="function"&&(r.lng?n.missingKeyHandler(a[0],w,u,f,a):n.missingKeyHandler(n.lng,w,u,f,a)),s=r.postProcess||n.postProcess,o!==undefined&&s&&l[s]&&(o=l[s](o,u,r)),b=f,f.indexOf(n.nsseparator)>-1&&(h=f.split(n.nsseparator),b=h[1]),b===u&&n.parseMissingKey&&(f=n.parseMissingKey(f)),o===undefined&&(f=e(f,r),f=g(f,r),s&&l[s]&&(k=y(u,r),o=l[s](k,u,r))),o!==undefined?o:f}function p(i,s){var b,c,tt,l,vt,a,st,yt,k,it,ht,rt,pt,w,ct,ut,wt,d,at,ot,bt,kt,dt;if((s=s||{},tt=y(i,s),l=v,!r)||l[0].toLowerCase()==="cimode")return tt;if(s.lngs&&(l=s.lngs),s.lng&&(l=t.toLanguages(s.lng,s.fallbackLng),r[l[0]]||(vt=n.getAsync,n.getAsync=!1,u.sync.load(l,n,function(i,u){t.extend(r,u);n.getAsync=vt}))),a=s.ns||n.ns.defaultNs,i.indexOf(n.nsseparator)>-1&&(st=i.split(n.nsseparator),a=st[0],i=st[1]),ui(s)&&(b=t.extend({},s),delete b.context,b.defaultValue=n.contextNotFound,yt=a+n.nsseparator+i+"_"+s.context,c=o(yt,b),c!=n.contextNotFound))return e(c,{context:s.context});if(et(s,l[0])){if(b=t.extend({lngs:[l[0]]},s),delete b.count,delete b.lng,b.defaultValue=n.pluralNotFound,f.needsPlural(l[0],s.count)?(k=a+n.nsseparator+i+n.pluralSuffix,it=f.get(l[0],s.count),it>=0?k=k+"_"+it:it===1&&(k=a+n.nsseparator+i)):k=a+n.nsseparator+i,c=o(k,b),c===n.pluralNotFound&&(k=it>=0?a+n.nsseparator+i+n.pluralSuffix:a+n.nsseparator+i,c=o(k,b)),c!=n.pluralNotFound)return e(c,{count:s.count,interpolationPrefix:s.interpolationPrefix,interpolationSuffix:s.interpolationSuffix});if(l.length>1){if(ht=l.slice(),ht.shift(),s=t.extend(s,{lngs:ht}),delete s.lng,c=o(a+n.nsseparator+i,s),c!=n.pluralNotFound)return c}else return c}if(fi(s)&&(rt=t.extend({},s),delete rt.indefinite_article,rt.defaultValue=n.indefiniteNotFound,pt=a+n.nsseparator+i+(s.count&&!et(s,l[0])||!s.count?n.indefiniteSuffix:""),c=o(pt,rt),c!=n.indefiniteNotFound))return c;for(ct=i.split(n.keyseparator),ut=0,wt=l.length;ut<wt;ut++){if(w!==undefined)break;for(var ft=l[ut],lt=0,h=r[ft]&&r[ft][a];ct[lt];)h=h&&h[ct[lt]],lt++;h!==undefined&&(d=Object.prototype.toString.apply(h),typeof h=="string"?(h=e(h,s),h=g(h,s)):d!=="[object Array]"||n.returnObjectTrees||s.returnObjectTrees?h===null&&n.fallbackOnNull===!0?h=undefined:h!==null&&(n.returnObjectTrees||s.returnObjectTrees?d!=="[object Number]"&&d!=="[object Function]"&&d!=="[object RegExp]"&&(at=d==="[object Array]"?[]:{},t.each(h,function(t){at[t]=nt(a+n.nsseparator+i+n.keyseparator+t,s)}),h=at):n.objectTreeKeyHandler&&typeof n.objectTreeKeyHandler=="function"?h=n.objectTreeKeyHandler(i,h,ft,a,s):(h="key '"+a+":"+i+" ("+ft+")' returned an object instead of string.",t.log(h))):(h=h.join("\n"),h=e(h,s),h=g(h,s)),typeof h=="string"&&h.trim()===""&&n.fallbackOnEmpty===!0&&(h=undefined),w=h)}if(w===undefined&&!s.isFallbackLookup&&(n.fallbackToDefaultNS===!0||n.fallbackNS&&n.fallbackNS.length>0)){if(s.isFallbackLookup=!0,n.fallbackNS.length){for(ot=0,bt=n.fallbackNS.length;ot<bt;ot++)if(w=p(n.fallbackNS[ot]+n.nsseparator+i,s),(w||w===""&&n.fallbackOnEmpty===!1)&&(kt=w.indexOf(n.nsseparator)>-1?w.split(n.nsseparator)[1]:w,dt=tt.indexOf(n.nsseparator)>-1?tt.split(n.nsseparator)[1]:tt,kt!==dt))break}else w=p(i,s);s.isFallbackLookup=!1}return w}function oi(){var r,e=n.lngWhitelist||[],i=[],f,u;if(typeof window!="undefined"&&function(){for(var u,f,e=window.location.search.substring(1),r=e.split("&"),t=0;t<r.length;t++)u=r[t].indexOf("="),u>0&&(f=r[t].substring(0,u),f==n.detectLngQS&&i.push(r[t].substring(u+1)))}(),n.useCookie&&typeof document!="undefined"&&(f=t.cookie.read(n.cookieName),f&&i.push(f)),n.detectLngFromLocalStorage&&typeof window!="undefined"&&window.localStorage&&i.push(window.localStorage.getItem("i18next_lng")),typeof navigator!="undefined"){if(navigator.languages)for(u=0;u<navigator.languages.length;u++)i.push(navigator.languages[u]);navigator.userLanguage&&i.push(navigator.userLanguage);navigator.language&&i.push(navigator.language)}return function(){for(var t,u,f=0;f<i.length;f++)if(t=i[f],t.indexOf("-")>-1&&(u=t.split("-"),t=n.lowerCaseLng?u[0].toLowerCase()+"-"+u[1].toLowerCase():u[0].toLowerCase()+"-"+u[1].toUpperCase()),e.length===0||e.indexOf(t)>-1){r=t;break}}(),r||(r=n.fallbackLng[0]),r}var n,it;Array.prototype.indexOf||(Array.prototype.indexOf=function(n){"use strict";var u,r,t,i;if(this==null)throw new TypeError;if((u=Object(this),r=u.length>>>0,r===0)||(t=0,arguments.length>0&&(t=Number(arguments[1]),t!=t?t=0:t!=0&&t!=Infinity&&t!=-Infinity&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);i<r;i++)if(i in u&&u[i]===n)return i;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(n){"use strict";var u,r,t,i;if(this==null)throw new TypeError;if(u=Object(this),r=u.length>>>0,r===0)return-1;for(t=r,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:t!=0&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),i=t>=0?Math.min(t,r-1):r-Math.abs(t);i>=0;i--)if(i in u&&u[i]===n)return i;return-1});typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var a=this,i=a.jQuery||a.Zepto,u={},r={},s,b=0,v=[],k=!1,h={};if(typeof module!="undefined"&&module.exports){if(!i)try{i=require("jquery")}catch(ci){}i&&(i.i18n=i.i18n||u);module.exports=u}else i&&(i.i18n=i.i18n||u),a.i18n=a.i18n||u;h={load:function(n,i,r){i.useLocalStorage?h._loadLocal(n,i,function(u,f){for(var o=[],e=0,s=n.length;e<s;e++)f[n[e]]||o.push(n[e]);o.length>0?h._fetch(o,i,function(n,i){t.extend(f,i);h._storeLocal(i);r(null,f)}):r(null,f)}):h._fetch(n,i,function(n,t){r(null,t)})},_loadLocal:function(n,i,r){var f={},e=(new Date).getTime(),u;window.localStorage&&(u=n.length,t.each(n,function(n,t){var o=window.localStorage.getItem("res_"+t);o&&(o=JSON.parse(o),o.i18nStamp&&o.i18nStamp+i.localStorageExpirationTime>e&&(f[t]=o));u--;u===0&&r(null,f)}))},_storeLocal:function(n){if(window.localStorage)for(var i in n)n[i].i18nStamp=(new Date).getTime(),t.localStorage.setItem("res_"+i,JSON.stringify(n[i]));return},_fetch:function(n,i,r){var u=i.ns,f={},l,o,s,c;i.dynamicLoad?(s=function(n,t){r(null,t)},typeof i.customLoad=="function"?i.customLoad(n,u.namespaces,i,s):(c=e(i.resGetPath,{lng:n.join("+"),ns:u.namespaces.join("+")}),t.ajax({url:c,success:function(n){t.log("loaded: "+c);s(null,n)},error:function(n,i,r){t.log("failed loading: "+c);s("failed loading resource.json error: "+r)},dataType:"json",async:i.getAsync}))):(l=u.namespaces.length*n.length,t.each(u.namespaces,function(u,e){t.each(n,function(n,t){var u=function(n,i){n&&(o=o||[],o.push(n));f[t]=f[t]||{};f[t][e]=i;l--;l===0&&r(o,f)};typeof i.customLoad=="function"?i.customLoad(t,e,i,u):h._fetchOne(t,e,i,u)})}))},_fetchOne:function(n,i,r,u){var f=e(r.resGetPath,{lng:n,ns:i});t.ajax({url:f,success:function(n){t.log("loaded: "+f);u(null,n)},error:function(n,i,r){if(i&&i==200||n&&n.status&&n.status==200)t.error("There is a typo in: "+f);else if(i&&i==404||n&&n.status&&n.status==404)t.log("Does not exist: "+f);else{var e=i?i:n&&n.status?n.status:null;t.log(e+" when loading "+f)}u(r,{})},dataType:"json",async:r.getAsync})},postMissing:function(i,u,f,o,s){var v={},c,h,y,a,p,l;if(v[f]=o,c=[],n.sendMissingTo==="fallback"&&n.fallbackLng[0]!==!1)for(h=0;h<n.fallbackLng.length;h++)c.push({lng:n.fallbackLng[h],url:e(n.resPostPath,{lng:n.fallbackLng[h],ns:u})});else if(n.sendMissingTo==="current"||n.sendMissingTo==="fallback"&&n.fallbackLng[0]===!1)c.push({lng:i,url:e(n.resPostPath,{lng:i,ns:u})});else if(n.sendMissingTo==="all")for(h=0,y=s.length;h<y;h++)c.push({lng:s[h],url:e(n.resPostPath,{lng:s[h],ns:u})});for(a=0,p=c.length;a<p;a++)l=c[a],t.ajax({url:l.url,type:n.sendType,data:v,success:function(){t.log("posted missing key '"+f+"' to: "+l.url);for(var i=f.split("."),n=0,e=r[l.lng][u];i[n];)e=n===i.length-1?e[i[n]]=o:e[i[n]]=e[i[n]]||{},n++},error:function(){t.log("failed posting missing key '"+f+"' to: "+l.url)},dataType:"json",async:n.postAsync})},reload:ii};n={lng:undefined,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",detectLngFromLocalStorage:!1,ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:undefined,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",defaultVariables:!1,reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,indefiniteSuffix:"_indefinite",indefiniteNotFound:["indefinite_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:undefined,useCookie:!0,cookieName:"i18next",cookieDomain:undefined,objectTreeKeyHandler:undefined,postProcess:undefined,parseMissingKey:undefined,missingKeyHandler:h.postMissing,shortcutFunction:"sprintf"};it={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};var vt={create:function(n,t,i,r){var f,u;i?(u=new Date,u.setTime(u.getTime()+i*6e4),f="; expires="+u.toGMTString()):f="";r=r?"domain="+r+";":"";document.cookie=n+"="+t+f+";"+r+"path=/"},read:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return null},remove:function(n){this.create(n,"",-1)}},yt={create:function(){},read:function(){return null},remove:function(){}},t={extend:i?i.extend:ht,deepExtend:tt,each:i?i.each:ct,ajax:i?i.ajax:typeof document!="undefined"?at:function(){},cookie:typeof document!="undefined"?vt:yt,detectLanguage:oi,escape:lt,log:function(t){n.debug&&typeof console!="undefined"&&console.log(t)},error:function(n){typeof console!="undefined"&&console.error(n)},getCountyIndexOfLng:function(n){var t=0;return(n==="nb-NO"||n==="nn-NO"||n==="nb-no"||n==="nn-no")&&(t=1),t},toLanguages:function(t){function r(t){var r=t,i;return typeof t=="string"&&t.indexOf("-")>-1?(i=t.split("-"),r=n.lowerCaseLng?i[0].toLowerCase()+"-"+i[1].toLowerCase():i[0].toLowerCase()+"-"+i[1].toUpperCase()):r=n.lowerCaseLng?t.toLowerCase():t,r}var s=this.log,u=[],e=n.lngWhitelist||!1,f=function(n){!e||e.indexOf(n)>-1?u.push(n):s("rejecting non-whitelisted language: "+n)},o,i;for(typeof t=="string"&&t.indexOf("-")>-1?(o=t.split("-"),n.load!=="unspecific"&&f(r(t)),n.load!=="current"&&f(r(o[this.getCountyIndexOfLng(t)]))):f(r(t)),i=0;i<n.fallbackLng.length;i++)u.indexOf(n.fallbackLng[i])===-1&&n.fallbackLng[i]&&u.push(r(n.fallbackLng[i]));return u},regexEscape:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regexReplacementEscape:function(n){return typeof n=="string"?n.replace(/\$/g,"$$$$"):n},localStorage:{setItem:function(n,i){if(window.localStorage)try{window.localStorage.setItem(n,i)}catch(r){t.log('failed to set value for key "'+n+'" to localStorage.')}}}};t.applyReplacement=e;var c=[["ach","Acholi",[1,2],1],["af","Afrikaans",[1,2],2],["ak","Akan",[1,2],1],["am","Amharic",[1,2],1],["an","Aragonese",[1,2],2],["ar","Arabic",[0,1,2,3,11,100],5],["arn","Mapudungun",[1,2],1],["ast","Asturian",[1,2],2],["ay","Aymará",[1],3],["az","Azerbaijani",[1,2],2],["be","Belarusian",[1,2,5],4],["bg","Bulgarian",[1,2],2],["bn","Bengali",[1,2],2],["bo","Tibetan",[1],3],["br","Breton",[1,2],1],["bs","Bosnian",[1,2,5],4],["ca","Catalan",[1,2],2],["cgg","Chiga",[1],3],["cs","Czech",[1,2,5],6],["csb","Kashubian",[1,2,5],7],["cy","Welsh",[1,2,3,8],8],["da","Danish",[1,2],2],["de","German",[1,2],2],["dev","Development Fallback",[1,2],2],["dz","Dzongkha",[1],3],["el","Greek",[1,2],2],["en","English",[1,2],2],["eo","Esperanto",[1,2],2],["es","Spanish",[1,2],2],["es_ar","Argentinean Spanish",[1,2],2],["et","Estonian",[1,2],2],["eu","Basque",[1,2],2],["fa","Persian",[1],3],["fi","Finnish",[1,2],2],["fil","Filipino",[1,2],1],["fo","Faroese",[1,2],2],["fr","French",[1,2],9],["fur","Friulian",[1,2],2],["fy","Frisian",[1,2],2],["ga","Irish",[1,2,3,7,11],10],["gd","Scottish Gaelic",[1,2,3,20],11],["gl","Galician",[1,2],2],["gu","Gujarati",[1,2],2],["gun","Gun",[1,2],1],["ha","Hausa",[1,2],2],["he","Hebrew",[1,2],2],["hi","Hindi",[1,2],2],["hr","Croatian",[1,2,5],4],["hu","Hungarian",[1,2],2],["hy","Armenian",[1,2],2],["ia","Interlingua",[1,2],2],["id","Indonesian",[1],3],["is","Icelandic",[1,2],12],["it","Italian",[1,2],2],["ja","Japanese",[1],3],["jbo","Lojban",[1],3],["jv","Javanese",[0,1],13],["ka","Georgian",[1],3],["kk","Kazakh",[1],3],["km","Khmer",[1],3],["kn","Kannada",[1,2],2],["ko","Korean",[1],3],["ku","Kurdish",[1,2],2],["kw","Cornish",[1,2,3,4],14],["ky","Kyrgyz",[1],3],["lb","Letzeburgesch",[1,2],2],["ln","Lingala",[1,2],1],["lo","Lao",[1],3],["lt","Lithuanian",[1,2,10],15],["lv","Latvian",[1,2,0],16],["mai","Maithili",[1,2],2],["mfe","Mauritian Creole",[1,2],1],["mg","Malagasy",[1,2],1],["mi","Maori",[1,2],1],["mk","Macedonian",[1,2],17],["ml","Malayalam",[1,2],2],["mn","Mongolian",[1,2],2],["mnk","Mandinka",[0,1,2],18],["mr","Marathi",[1,2],2],["ms","Malay",[1],3],["mt","Maltese",[1,2,11,20],19],["nah","Nahuatl",[1,2],2],["nap","Neapolitan",[1,2],2],["nb","Norwegian Bokmal",[1,2],2],["ne","Nepali",[1,2],2],["nl","Dutch",[1,2],2],["nn","Norwegian Nynorsk",[1,2],2],["no","Norwegian",[1,2],2],["nso","Northern Sotho",[1,2],2],["oc","Occitan",[1,2],1],["or","Oriya",[2,1],2],["pa","Punjabi",[1,2],2],["pap","Papiamento",[1,2],2],["pl","Polish",[1,2,5],7],["pms","Piemontese",[1,2],2],["ps","Pashto",[1,2],2],["pt","Portuguese",[1,2],2],["pt_br","Brazilian Portuguese",[1,2],2],["rm","Romansh",[1,2],2],["ro","Romanian",[1,2,20],20],["ru","Russian",[1,2,5],4],["sah","Yakut",[1],3],["sco","Scots",[1,2],2],["se","Northern Sami",[1,2],2],["si","Sinhala",[1,2],2],["sk","Slovak",[1,2,5],6],["sl","Slovenian",[5,1,2,3],21],["so","Somali",[1,2],2],["son","Songhay",[1,2],2],["sq","Albanian",[1,2],2],["sr","Serbian",[1,2,5],4],["su","Sundanese",[1],3],["sv","Swedish",[1,2],2],["sw","Swahili",[1,2],2],["ta","Tamil",[1,2],2],["te","Telugu",[1,2],2],["tg","Tajik",[1,2],1],["th","Thai",[1],3],["ti","Tigrinya",[1,2],1],["tk","Turkmen",[1,2],2],["tr","Turkish",[1,2],1],["tt","Tatar",[1],3],["ug","Uyghur",[1],3],["uk","Ukrainian",[1,2,5],4],["ur","Urdu",[1,2],2],["uz","Uzbek",[1,2],1],["vi","Vietnamese",[1],3],["wa","Walloon",[1,2],1],["wo","Wolof",[1],3],["yo","Yoruba",[1,2],2],["zh","Chinese",[1],3]],si={1:function(n){return Number(n>1)},2:function(n){return Number(n!=1)},3:function(){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},5:function(n){return Number(n===0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5)},6:function(n){return Number(n==1?0:n>=2&&n<=4?1:2)},7:function(n){return Number(n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},8:function(n){return Number(n==1?0:n==2?1:n!=8&&n!=11?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(n==1?0:n==2?1:n<7?2:n<11?3:4)},11:function(n){return Number(n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(n!==0)},14:function(n){return Number(n==1?0:n==2?1:n==3?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:n!==0?1:2)},17:function(n){return Number(n==1||n%10==1?0:1)},18:function(n){return Number(n==1?1:2)},19:function(n){return Number(n==1?0:n===0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3)},20:function(n){return Number(n==1?0:n===0||n%100>0&&n%100<20?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)}},f={rules:function(){for(var t={},n=c.length;n--;)t[c[n][0]]={name:c[n][1],numbers:c[n][2],plurals:si[c[n][3]]};return t}(),addRule:function(n,t){f.rules[n]=t},setCurrentLng:function(n){if(!f.currentRule||f.currentRule.lng!==n){var t=n.split("-");f.currentRule={lng:n,rule:f.rules[t[0]]}}},needsPlural:function(n,i){var u=n.split("-"),r;return r=f.currentRule&&f.currentRule.lng===n?f.currentRule.rule:f.rules[u[t.getCountyIndexOfLng(n)]],r&&r.numbers.length<=1?!1:this.get(n,i)!==1},get:function(n,i){function u(t,i){var r,e,u;return r=f.currentRule&&f.currentRule.lng===n?f.currentRule.rule:f.rules[t],r?(e=r.noAbs?r.plurals(i):r.plurals(Math.abs(i)),u=r.numbers[e],r.numbers.length===2&&r.numbers[0]===1&&(u===2?u=-1:u===1&&(u=1)),u):i===1?"1":"-1"}var r=n.split("-");return u(r[t.getCountyIndexOfLng(n)],i)}},l={},st=function(n,t){l[n]=t},w=function(){function t(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function i(n,t){for(var i=[];t>0;i[--t]=n);return i.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){for(var l=1,y=n.length,s="",u,h=[],o,f,c,a,v,e=0;e<y;e++)if(s=t(n[e]),s==="string")h.push(n[e]);else if(s==="array"){if(f=n[e],f[2])for(u=r[l],o=0;o<f[2].length;o++){if(!u.hasOwnProperty(f[2][o]))throw w('[sprintf] property "%s" does not exist',f[2][o]);u=u[f[2][o]]}else u=f[1]?r[f[1]]:r[l++];if(/[^s]/.test(f[8])&&t(u)!="number")throw w("[sprintf] expecting number but found %s",t(u));switch(f[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=f[7]?u.toExponential(f[7]):u.toExponential();break;case"f":u=f[7]?parseFloat(u).toFixed(f[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&f[7]?u.substring(0,f[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(f[8])&&f[3]&&u>=0?"+"+u:u;a=f[4]?f[4]=="0"?"0":f[4].charAt(1):" ";v=f[6]-String(u).length;c=f[6]?i(a,v):"";h.push(f[5]?u+c:c+u)}return h.join("")},n.cache={},n.parse=function(n){for(var r=n,t=[],f=[],o=0;r;){if((t=/^[^\x25]+/.exec(r))!==null)f.push(t[0]);else if((t=/^\x25{2}/.exec(r))!==null)f.push("%");else if((t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r))!==null){if(t[2]){o|=1;var e=[],u=t[2],i=[];if((i=/^([a-z_][a-z_\d]*)/i.exec(u))!==null)for(e.push(i[1]);(u=u.substring(i[0].length))!=="";)if((i=/^\.([a-z_][a-z_\d]*)/i.exec(u))!==null)e.push(i[1]);else if((i=/^\[(\d+)\]/.exec(u))!==null)e.push(i[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";t[2]=e}else o|=2;if(o===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";f.push(t)}else throw"[sprintf] huh?";r=r.substring(t[0].length)}return f},n}(),hi=function(n,t){return t.unshift(n),w.apply(null,t)};st("sprintf",function(n,t,i){return i.sprintf?Object.prototype.toString.apply(i.sprintf)==="[object Array]"?hi(n,i.sprintf):typeof i.sprintf=="object"?w(n,i.sprintf):n:n});u.init=d;u.setLng=ft;u.preload=pt;u.addResourceBundle=wt;u.hasResourceBundle=bt;u.addResource=rt;u.addResources=dt;u.removeResourceBundle=kt;u.loadNamespace=ni;u.loadNamespaces=ut;u.setDefaultNamespace=gt;u.t=o;u.translate=o;u.exists=ot;u.detectLanguage=t.detectLanguage;u.pluralExtensions=f;u.sync=h;u.functions=t;u.lng=ti;u.addPostProcessor=st;u.options=n}(),function(){var y=this,at=y._,e={},r=Array.prototype,g=Object.prototype,vt=Function.prototype,nt=r.push,i=r.slice,o=r.concat,f=g.toString,yt=g.hasOwnProperty,tt=r.forEach,it=r.map,rt=r.reduce,ut=r.reduceRight,ft=r.filter,et=r.every,ot=r.some,s=r.indexOf,st=r.lastIndexOf,pt=Array.isArray,ht=Object.keys,p=vt.bind,n=function(t){return t instanceof n?t:this instanceof n?void(this._wrapped=t):new n(t)},t,w,b,h,c,k,l,a,u,ct,lt,v;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports._=n):y._=n;n.VERSION="1.6.0";t=n.each=n.forEach=function(t,i,r){var u,f;if(null==t)return t;if(tt&&t.forEach===tt)t.forEach(i,r);else if(t.length===+t.length){for(u=0,f=t.length;f>u;u++)if(i.call(r,t[u],u,t)===e)return}else for(var o=n.keys(t),u=0,f=o.length;f>u;u++)if(i.call(r,t[o[u]],o[u],t)===e)return;return t};n.map=n.collect=function(n,i,r){var u=[];return null==n?u:it&&n.map===it?n.map(i,r):(t(n,function(n,t,f){u.push(i.call(r,n,t,f))}),u)};w="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(i,r,u,f){var e=arguments.length>2;if(null==i&&(i=[]),rt&&i.reduce===rt)return f&&(r=n.bind(r,f)),e?i.reduce(r,u):i.reduce(r);if(t(i,function(n,t,i){e?u=r.call(f,u,n,t,i):(u=n,e=!0)}),!e)throw new TypeError(w);return u};n.reduceRight=n.foldr=function(i,r,u,f){var o=arguments.length>2,e,s;if(null==i&&(i=[]),ut&&i.reduceRight===ut)return f&&(r=n.bind(r,f)),o?i.reduceRight(r,u):i.reduceRight(r);if(e=i.length,e!==+e&&(s=n.keys(i),e=s.length),t(i,function(n,t,h){t=s?s[--e]:--e;o?u=r.call(f,u,i[t],t,h):(u=i[t],o=!0)}),!o)throw new TypeError(w);return u};n.find=n.detect=function(n,t,i){var r;return b(n,function(n,u,f){if(t.call(i,n,u,f))return(r=n,!0)}),r};n.filter=n.select=function(n,i,r){var u=[];return null==n?u:ft&&n.filter===ft?n.filter(i,r):(t(n,function(n,t,f){i.call(r,n,t,f)&&u.push(n)}),u)};n.reject=function(t,i,r){return n.filter(t,function(n,t,u){return!i.call(r,n,t,u)},r)};n.every=n.all=function(i,r,u){r||(r=n.identity);var f=!0;return null==i?f:et&&i.every===et?i.every(r,u):(t(i,function(n,t,i){if(!(f=f&&r.call(u,n,t,i)))return e}),!!f)};b=n.some=n.any=function(i,r,u){r||(r=n.identity);var f=!1;return null==i?f:ot&&i.some===ot?i.some(r,u):(t(i,function(n,t,i){if(f||(f=r.call(u,n,t,i)))return e}),!!f)};n.contains=n.include=function(n,t){return null==n?!1:s&&n.indexOf===s?n.indexOf(t)!=-1:b(n,function(n){return n===t})};n.invoke=function(t,r){var u=i.call(arguments,2),f=n.isFunction(r);return n.map(t,function(n){return(f?r:n[r]).apply(n,u)})};n.pluck=function(t,i){return n.map(t,n.property(i))};n.where=function(t,i){return n.filter(t,n.matches(i))};n.findWhere=function(t,i){return n.find(t,n.matches(i))};n.max=function(i,r,u){if(!r&&n.isArray(i)&&i[0]===+i[0]&&i.length<65535)return Math.max.apply(Math,i);var f=-1/0,e=-1/0;return t(i,function(n,t,i){var o=r?r.call(u,n,t,i):n;o>e&&(f=n,e=o)}),f};n.min=function(i,r,u){if(!r&&n.isArray(i)&&i[0]===+i[0]&&i.length<65535)return Math.min.apply(Math,i);var f=1/0,e=1/0;return t(i,function(n,t,i){var o=r?r.call(u,n,t,i):n;e>o&&(f=n,e=o)}),f};n.shuffle=function(i){var u,f=0,r=[];return t(i,function(t){u=n.random(f++);r[f-1]=r[u];r[u]=t}),r};n.sample=function(t,i,r){return null==i||r?(t.length!==+t.length&&(t=n.values(t)),t[n.random(t.length-1)]):n.shuffle(t).slice(0,Math.max(0,i))};h=function(t){return null==t?n.identity:n.isFunction(t)?t:n.property(t)};n.sortBy=function(t,i,r){return i=h(i),n.pluck(n.map(t,function(n,t,u){return{value:n,index:t,criteria:i.call(r,n,t,u)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(r>i||r===void 0)return-1}return n.index-t.index}),"value")};c=function(n){return function(i,r,u){var f={};return r=h(r),t(i,function(t,e){var o=r.call(u,t,e,i);n(f,o,t)}),f}};n.groupBy=c(function(t,i,r){n.has(t,i)?t[i].push(r):t[i]=[r]});n.indexBy=c(function(n,t,i){n[t]=i});n.countBy=c(function(t,i){n.has(t,i)?t[i]++:t[i]=1});n.sortedIndex=function(n,t,i,r){var f;i=h(i);for(var o=i.call(r,t),u=0,e=n.length;e>u;)f=u+e>>>1,i.call(r,n[f])<o?u=f+1:e=f;return u};n.toArray=function(t){return t?n.isArray(t)?i.call(t):t.length===+t.length?n.map(t,n.identity):n.values(t):[]};n.size=function(t){return null==t?0:t.length===+t.length?t.length:n.keys(t).length};n.first=n.head=n.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:0>t?[]:i.call(n,0,t)};n.initial=function(n,t,r){return i.call(n,0,n.length-(null==t||r?1:t))};n.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:i.call(n,Math.max(n.length-t,0))};n.rest=n.tail=n.drop=function(n,t,r){return i.call(n,null==t||r?1:t)};n.compact=function(t){return n.filter(t,n.identity)};k=function(i,r,u){return r&&n.every(i,n.isArray)?o.apply(u,i):(t(i,function(t){n.isArray(t)||n.isArguments(t)?r?nt.apply(u,t):k(t,r,u):u.push(t)}),u)};n.flatten=function(n,t){return k(n,t,[])};n.without=function(t){return n.difference(t,i.call(arguments,1))};n.partition=function(n,i){var r=[],u=[];return t(n,function(n){(i(n)?r:u).push(n)}),[r,u]};n.uniq=n.unique=function(i,r,u,f){n.isFunction(r)&&(f=u,u=r,r=!1);var s=u?n.map(i,u,f):i,o=[],e=[];return t(s,function(t,u){(r?u&&e[e.length-1]===t:n.contains(e,t))||(e.push(t),o.push(i[u]))}),o};n.union=function(){return n.uniq(n.flatten(arguments,!0))};n.intersection=function(t){var r=i.call(arguments,1);return n.filter(n.uniq(t),function(t){return n.every(r,function(i){return n.contains(i,t)})})};n.difference=function(t){var u=o.apply(r,i.call(arguments,1));return n.filter(t,function(t){return!n.contains(u,t)})};n.zip=function(){for(var i=n.max(n.pluck(arguments,"length").concat(0)),r=new Array(i),t=0;i>t;t++)r[t]=n.pluck(arguments,""+t);return r};n.object=function(n,t){if(null==n)return{};for(var r={},i=0,u=n.length;u>i;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r};n.indexOf=function(t,i,r){if(null==t)return-1;var u=0,f=t.length;if(r){if("number"!=typeof r)return u=n.sortedIndex(t,i),t[u]===i?u:-1;u=0>r?Math.max(0,f+r):r}if(s&&t.indexOf===s)return t.indexOf(i,r);for(;f>u;u++)if(t[u]===i)return u;return-1};n.lastIndexOf=function(n,t,i){var u,r;if(null==n)return-1;if(u=null!=i,st&&n.lastIndexOf===st)return u?n.lastIndexOf(t,i):n.lastIndexOf(t);for(r=u?i:n.length;r--;)if(n[r]===t)return r;return-1};n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0);i=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/i),0),u=0,f=new Array(r);r>u;)f[u++]=n,n+=i;return f};l=function(){};n.bind=function(t,r){var u,f;if(p&&t.bind===p)return p.apply(t,i.call(arguments,1));if(!n.isFunction(t))throw new TypeError;return u=i.call(arguments,2),f=function(){var e,n;return(this instanceof f)?(l.prototype=t.prototype,e=new l,l.prototype=null,n=t.apply(e,u.concat(i.call(arguments))),Object(n)===n?n:e):t.apply(r,u.concat(i.call(arguments)))}};n.partial=function(t){var r=i.call(arguments,1);return function(){for(var f=0,i=r.slice(),u=0,e=i.length;e>u;u++)i[u]===n&&(i[u]=arguments[f++]);for(;f<arguments.length;)i.push(arguments[f++]);return t.apply(this,i)}};n.bindAll=function(r){var u=i.call(arguments,1);if(0===u.length)throw new Error("bindAll must be passed function names");return t(u,function(t){r[t]=n.bind(r[t],r)}),r};n.memoize=function(t,i){var r={};return i||(i=n.identity),function(){var u=i.apply(this,arguments);return n.has(r,u)?r[u]:r[u]=t.apply(this,arguments)}};n.delay=function(n,t){var r=i.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)};n.defer=function(t){return n.delay.apply(n,[t,1].concat(i.call(arguments,1)))};n.throttle=function(t,i,r){var u,f,s,e=null,o=0,h;return r||(r={}),h=function(){o=r.leading===!1?0:n.now();e=null;s=t.apply(u,f);u=f=null},function(){var c=n.now(),l;return o||r.leading!==!1||(o=c),l=i-(c-o),u=this,f=arguments,0>=l?(clearTimeout(e),e=null,o=c,s=t.apply(u,f),u=f=null):e||r.trailing===!1||(e=setTimeout(h,l)),s}};n.debounce=function(t,i,r){var u,f,e,s,o,h=function(){var c=n.now()-s;i>c?u=setTimeout(h,i-c):(u=null,r||(o=t.apply(e,f),e=f=null))};return function(){e=this;f=arguments;s=n.now();var c=r&&!u;return u||(u=setTimeout(h,i)),c&&(o=t.apply(e,f),e=f=null),o}};n.once=function(n){var t,i=!1;return function(){return i?t:(i=!0,t=n.apply(this,arguments),n=null,t)}};n.wrap=function(t,i){return n.partial(i,t)};n.compose=function(){var n=arguments;return function(){for(var t=arguments,i=n.length-1;i>=0;i--)t=[n[i].apply(this,t)];return t[0]}};n.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}};n.keys=function(t){var i,r;if(!n.isObject(t))return[];if(ht)return ht(t);i=[];for(r in t)n.has(t,r)&&i.push(r);return i};n.values=function(t){for(var r=n.keys(t),u=r.length,f=new Array(u),i=0;u>i;i++)f[i]=t[r[i]];return f};n.pairs=function(t){for(var r=n.keys(t),u=r.length,f=new Array(u),i=0;u>i;i++)f[i]=[r[i],t[r[i]]];return f};n.invert=function(t){for(var u={},r=n.keys(t),i=0,f=r.length;f>i;i++)u[t[r[i]]]=r[i];return u};n.functions=n.methods=function(t){var i=[];for(var r in t)n.isFunction(t[r])&&i.push(r);return i.sort()};n.extend=function(n){return t(i.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n};n.pick=function(n){var u={},f=o.apply(r,i.call(arguments,1));return t(f,function(t){t in n&&(u[t]=n[t])}),u};n.omit=function(t){var f={},e=o.apply(r,i.call(arguments,1));for(var u in t)n.contains(e,u)||(f[u]=t[u]);return f};n.defaults=function(n){return t(i.call(arguments,1),function(t){if(t)for(var i in t)n[i]===void 0&&(n[i]=t[i])}),n};n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t};n.tap=function(n,t){return t(n),n};a=function(t,i,r,u){var l,v,h,c,e,o,s;if(t===i)return 0!==t||1/t==1/i;if(null==t||null==i)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),l=f.call(t),l!=f.call(i))return!1;switch(l){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:0==t?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if("object"!=typeof t||"object"!=typeof i)return!1;for(v=r.length;v--;)if(r[v]==t)return u[v]==i;if(h=t.constructor,c=i.constructor,h!==c&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in i)return!1;if(r.push(t),u.push(i),e=0,o=!0,"[object Array]"==l){if(e=t.length,o=e==i.length)for(;e--&&(o=a(t[e],i[e],r,u)););}else{for(s in t)if(n.has(t,s)&&(e++,!(o=n.has(i,s)&&a(t[s],i[s],r,u))))break;if(o){for(s in i)if(n.has(i,s)&&!e--)break;o=!e}}return r.pop(),u.pop(),o};n.isEqual=function(n,t){return a(n,t,[],[])};n.isEmpty=function(t){if(null==t)return!0;if(n.isArray(t)||n.isString(t))return 0===t.length;for(var i in t)if(n.has(t,i))return!1;return!0};n.isElement=function(n){return!(!n||1!==n.nodeType)};n.isArray=pt||function(n){return"[object Array]"==f.call(n)};n.isObject=function(n){return n===Object(n)};t(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}});n.isArguments(arguments)||(n.isArguments=function(t){return!(!t||!n.has(t,"callee"))});"function"!=typeof/./&&(n.isFunction=function(n){return"function"==typeof n});n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))};n.isNaN=function(t){return n.isNumber(t)&&t!=+t};n.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)};n.isNull=function(n){return null===n};n.isUndefined=function(n){return n===void 0};n.has=function(n,t){return yt.call(n,t)};n.noConflict=function(){return y._=at,this};n.identity=function(n){return n};n.constant=function(n){return function(){return n}};n.property=function(n){return function(t){return t[n]}};n.matches=function(n){return function(t){if(t===n)return!0;for(var i in n)if(n[i]!==t[i])return!1;return!0}};n.times=function(n,t,i){for(var u=Array(Math.max(0,n)),r=0;n>r;r++)u[r]=t.call(i,r);return u};n.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};n.now=Date.now||function(){return(new Date).getTime()};u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};u.unescape=n.invert(u.escape);ct={escape:new RegExp("["+n.keys(u.escape).join("")+"]","g"),unescape:new RegExp("("+n.keys(u.unescape).join("|")+")","g")};n.each(["escape","unescape"],function(t){n[t]=function(n){return null==n?"":(""+n).replace(ct[t],function(n){return u[t][n]})}});n.result=function(t,i){if(null==t)return void 0;var r=t[i];return n.isFunction(r)?r.call(t):r};n.mixin=function(i){t(n.functions(i),function(t){var r=n[t]=i[t];n.prototype[t]=function(){var t=[this._wrapped];return nt.apply(t,arguments),v.call(this,r.apply(n,t))}})};lt=0;n.uniqueId=function(n){var t=++lt+"";return n?n+t:t};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var d=/(.)^/,wt={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},bt=/\\|'|\r|\n|\t|\u2028|\u2029/g;n.template=function(t,i,r){var f,e;r=n.defaults({},r,n.templateSettings);var h=new RegExp([(r.escape||d).source,(r.interpolate||d).source,(r.evaluate||d).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(o,e).replace(bt,function(n){return"\\"+wt[n]}),i&&(u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),f&&(u+="';\n"+f+"\n__p+='"),o=e+n.length,n});u+="';\n";r.variable||(u="with(obj||{}){\n"+u+"}\n");u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{f=new Function(r.variable||"obj","_",u)}catch(s){throw s.source=u,s;}return i?f(i,n):(e=function(t){return f.call(this,t,n)},e.source="function("+(r.variable||"obj")+"){\n"+u+"}",e)};n.chain=function(t){return n(t).chain()};v=function(t){return this._chain?n(t).chain():t};n.mixin(n);t(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],v.call(this,n)}});t(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return v.call(this,i.apply(this._wrapped,arguments))}});n.extend(n.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}});"function"==typeof define&&define.amd&&define("underscore",[],function(){return n})}.call(this),function(n,t){if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(i,r,u){n.Backbone=t(n,u,i,r)});else if(typeof exports!="undefined"){var i=require("underscore");t(n,exports,i)}else n.Backbone=t(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(this,function(n,t,i,r){var rt=n.Backbone,l=[],wt=l.push,s=l.slice,bt=l.splice,e,p,w,b,d,g,it,a,o;t.VERSION="1.1.2";t.$=r;t.noConflict=function(){return n.Backbone=rt,this};t.emulateHTTP=!1;t.emulateJSON=!1;var u=t.Events={on:function(n,t,i){if(!h(this,"on",n,[t,i])||!t)return this;this._events||(this._events={});var r=this._events[n]||(this._events[n]=[]);return r.push({callback:t,context:i,ctx:i||this}),this},once:function(n,t,r){if(!h(this,"once",n,[t,r])||!t)return this;var f=this,u=i.once(function(){f.off(n,u);t.apply(this,arguments)});u._callback=t;return this.on(n,u,r)},off:function(n,t,r){var o,u,s,c,f,l,e,a;if(!this._events||!h(this,"off",n,[t,r]))return this;if(!n&&!t&&!r)return this._events=void 0,this;for(c=n?[n]:i.keys(this._events),f=0,l=c.length;f<l;f++)if(n=c[f],s=this._events[n]){if(this._events[n]=o=[],t||r)for(e=0,a=s.length;e<a;e++)u=s[e],(t&&t!==u.callback&&t!==u.callback._callback||r&&r!==u.context)&&o.push(u);o.length||delete this._events[n]}return this},trigger:function(n){var t,i,r;return this._events?(t=s.call(arguments,1),!h(this,"trigger",n,t))?this:(i=this._events[n],r=this._events.all,i&&y(i,t),r&&y(r,arguments),this):this},stopListening:function(n,t,r){var u=this._listeningTo,e,f;if(!u)return this;e=!t&&!r;r||typeof t!="object"||(r=this);n&&((u={})[n._listenId]=n);for(f in u)n=u[f],n.off(t,r,this),(e||i.isEmpty(n._events))&&delete this._listeningTo[f];return this}},v=/\s+/,h=function(n,t,i,r){var f,e,u,o;if(!i)return!0;if(typeof i=="object"){for(f in i)n[t].apply(n,[f,i[f]].concat(r));return!1}if(v.test(i)){for(e=i.split(v),u=0,o=e.length;u<o;u++)n[t].apply(n,[e[u]].concat(r));return!1}return!0},y=function(n,t){var i,r=-1,u=n.length,f=t[0],e=t[1],o=t[2];switch(t.length){case 0:while(++r<u)(i=n[r]).callback.call(i.ctx);return;case 1:while(++r<u)(i=n[r]).callback.call(i.ctx,f);return;case 2:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e);return;case 3:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e,o);return;default:while(++r<u)(i=n[r]).callback.apply(i.ctx,t);return}};i.each({listenTo:"on",listenToOnce:"once"},function(n,t){u[t]=function(t,r,u){var f=this._listeningTo||(this._listeningTo={}),e=t._listenId||(t._listenId=i.uniqueId("l"));return f[e]=t,u||typeof r!="object"||(u=this),t[n](r,u,this),this}});u.bind=u.on;u.unbind=u.off;i.extend(t,u);e=t.Model=function(n,t){var r=n||{};t||(t={});this.cid=i.uniqueId("c");this.attributes={};t.collection&&(this.collection=t.collection);t.parse&&(r=this.parse(r,t)||{});r=i.defaults({},r,i.result(this,"defaults"));this.set(r,t);this.changed={};this.initialize.apply(this,arguments)};i.extend(e.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(n){return this.attributes[n]},escape:function(n){return i.escape(this.get(n))},has:function(n){return this.get(n)!=null},set:function(n,t,r){var u,f,l,e,h,c,a,o,s,v;if(n==null)return this;if(typeof n=="object"?(f=n,r=t):(f={})[n]=t,r||(r={}),!this._validate(f,r))return!1;l=r.unset;h=r.silent;e=[];c=this._changing;this._changing=!0;c||(this._previousAttributes=i.clone(this.attributes),this.changed={});o=this.attributes;a=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);for(u in f)t=f[u],i.isEqual(o[u],t)||e.push(u),i.isEqual(a[u],t)?delete this.changed[u]:this.changed[u]=t,l?delete o[u]:o[u]=t;if(!h)for(e.length&&(this._pending=r),s=0,v=e.length;s<v;s++)this.trigger("change:"+e[s],this,o[e[s]],r);if(c)return this;if(!h)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(n,t){return this.set(n,void 0,i.extend({},t,{unset:!0}))},clear:function(n){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,i.extend({},n,{unset:!0}))},hasChanged:function(n){return n==null?!i.isEmpty(this.changed):i.has(this.changed,n)},changedAttributes:function(n){var u,t,f,r;if(!n)return this.hasChanged()?i.clone(this.changed):!1;t=!1;f=this._changing?this._previousAttributes:this.attributes;for(r in n)i.isEqual(f[r],u=n[r])||((t||(t={}))[r]=u);return t},previous:function(n){return n==null||!this._previousAttributes?null:this._previousAttributes[n]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(n){n=n?i.clone(n):{};n.parse===void 0&&(n.parse=!0);var t=this,r=n.success;return n.success=function(i){if(!t.set(t.parse(i,n),n))return!1;r&&r(t,i,n);t.trigger("sync",t,i,n)},o(this,n),this.sync("read",this,n)},save:function(n,t,r){var u,e,c,s=this.attributes,f,h;if(n==null||typeof n=="object"?(u=n,r=t):(u={})[n]=t,r=i.extend({validate:!0},r),u&&!r.wait){if(!this.set(u,r))return!1}else if(!this._validate(u,r))return!1;return u&&r.wait&&(this.attributes=i.extend({},s,u)),r.parse===void 0&&(r.parse=!0),f=this,h=r.success,r.success=function(n){f.attributes=s;var t=f.parse(n,r);if(r.wait&&(t=i.extend(u||{},t)),i.isObject(t)&&!f.set(t,r))return!1;h&&h(f,n,r);f.trigger("sync",f,n,r)},o(this,r),e=this.isNew()?"create":r.patch?"patch":"update",e==="patch"&&(r.attrs=u),c=this.sync(e,this,r),u&&r.wait&&(this.attributes=s),c},destroy:function(n){var f;n=n?i.clone(n):{};var t=this,r=n.success,u=function(){t.trigger("destroy",t,t.collection,n)};return(n.success=function(i){(n.wait||t.isNew())&&u();r&&r(t,i,n);t.isNew()||t.trigger("sync",t,i,n)},this.isNew())?(n.success(),!1):(o(this,n),f=this.sync("delete",this,n),n.wait||u(),f)},url:function(){var n=i.result(this,"urlRoot")||i.result(this.collection,"url")||a();return this.isNew()?n:n.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(n){return n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(n){return this._validate({},i.extend(n||{},{validate:!0}))},_validate:function(n,t){if(!t.validate||!this.validate)return!0;n=i.extend({},this.attributes,n);var r=this.validationError=this.validate(n,t)||null;return r?(this.trigger("invalid",this,r,i.extend(t,{validationError:r})),!1):!0}});p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(n){e.prototype[n]=function(){var t=s.call(arguments);return t.unshift(this.attributes),i[n].apply(i,t)}});var c=t.Collection=function(n,t){t||(t={});t.model&&(this.model=t.model);t.comparator!==void 0&&(this.comparator=t.comparator);this._reset();this.initialize.apply(this,arguments);n&&this.reset(n,i.extend({silent:!0},t))},ut={add:!0,remove:!0,merge:!0},ft={add:!0,remove:!1};i.extend(c.prototype,u,{model:e,initialize:function(){},toJSON:function(n){return this.map(function(t){return t.toJSON(n)})},sync:function(){return t.sync.apply(this,arguments)},add:function(n,t){return this.set(n,i.extend({merge:!1},t,ft))},remove:function(n,t){var e=!i.isArray(n),u,o,f,r;for(n=e?[n]:i.clone(n),t||(t={}),u=0,o=n.length;u<o;u++)(r=n[u]=this.get(n[u]),r)&&(delete this._byId[r.id],delete this._byId[r.cid],f=this.indexOf(r),this.models.splice(f,1),this.length--,t.silent||(t.index=f,r.trigger("remove",r,this,t)),this._removeReference(r,t));return e?n[0]:n},set:function(n,t){var v,k;t=i.defaults({},t,ut);t.parse&&(n=this.parse(n,t));v=!i.isArray(n);n=v?n?[n]:[]:i.clone(n);for(var d,u,f,c,l,y=t.at,nt=this.model,p=this.comparator&&y==null&&t.sort!==!1,tt=i.isString(this.comparator)?this.comparator:null,s=[],w=[],a={},g=t.add,it=t.merge,b=t.remove,h=!p&&g&&b?[]:!1,r=0,o=n.length;r<o;r++){if(f=n[r]||{},d=f instanceof e?u=f:f[nt.prototype.idAttribute||"id"],c=this.get(d))b&&(a[c.cid]=!0),it&&(f=f===u?u.attributes:f,t.parse&&(f=c.parse(f,t)),c.set(f,t),p&&!l&&c.hasChanged(tt)&&(l=!0)),n[r]=c;else if(g){if(u=n[r]=this._prepareModel(f,t),!u)continue;s.push(u);this._addReference(u,t)}u=c||u;h&&(u.isNew()||!a[u.id])&&h.push(u);a[u.id]=!0}if(b){for(r=0,o=this.length;r<o;++r)a[(u=this.models[r]).cid]||w.push(u);w.length&&this.remove(w,t)}if(s.length||h&&h.length)if(p&&(l=!0),this.length+=s.length,y!=null)for(r=0,o=s.length;r<o;r++)this.models.splice(y+r,0,s[r]);else for(h&&(this.models.length=0),k=h||s,r=0,o=k.length;r<o;r++)this.models.push(k[r]);if(l&&this.sort({silent:!0}),!t.silent){for(r=0,o=s.length;r<o;r++)(u=s[r]).trigger("add",u,this,t);(l||h&&h.length)&&this.trigger("sort",this,t)}return v?n[0]:n},reset:function(n,t){t||(t={});for(var r=0,u=this.models.length;r<u;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),n=this.add(n,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),n},push:function(n,t){return this.add(n,i.extend({at:this.length},t))},pop:function(n){var t=this.at(this.length-1);return this.remove(t,n),t},unshift:function(n,t){return this.add(n,i.extend({at:0},t))},shift:function(n){var t=this.at(0);return this.remove(t,n),t},slice:function(){return s.apply(this.models,arguments)},get:function(n){if(n!=null)return this._byId[n]||this._byId[n.id]||this._byId[n.cid]},at:function(n){return this.models[n]},where:function(n,t){return i.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in n)if(n[i]!==t.get(i))return!1;return!0})},findWhere:function(n){return this.where(n,!0)},sort:function(n){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return n||(n={}),i.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),n.silent||this.trigger("sort",this,n),this},pluck:function(n){return i.invoke(this.models,"get",n)},fetch:function(n){n=n?i.clone(n):{};n.parse===void 0&&(n.parse=!0);var r=n.success,t=this;return n.success=function(i){var u=n.reset?"reset":"set";t[u](i,n);r&&r(t,i,n);t.trigger("sync",t,i,n)},o(this,n),this.sync("read",this,n)},create:function(n,t){if(t=t?i.clone(t):{},!(n=this._prepareModel(n,t)))return!1;t.wait||this.add(n,t);var u=this,r=t.success;return t.success=function(n,i){t.wait&&u.add(n,t);r&&r(n,i,t)},n.save(null,t),n},parse:function(n){return n},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(n,t){if(n instanceof e)return n;t=t?i.clone(t):{};t.collection=this;var r=new this.model(n,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(n){this._byId[n.cid]=n;n.id!=null&&(this._byId[n.id]=n);n.collection||(n.collection=this);n.on("all",this._onModelEvent,this)},_removeReference:function(n){this===n.collection&&delete n.collection;n.off("all",this._onModelEvent,this)},_onModelEvent:function(n,t,i,r){(n!=="add"&&n!=="remove"||i===this)&&(n==="destroy"&&this.remove(t,r),t&&n==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(w,function(n){c.prototype[n]=function(){var t=s.call(arguments);return t.unshift(this.models),i[n].apply(i,t)}});b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(n){c.prototype[n]=function(t,r){var u=i.isFunction(t)?t:function(n){return n.get(t)};return i[n](this.models,u,r)}});var k=t.View=function(n){this.cid=i.uniqueId("view");n||(n={});i.extend(this,i.pick(n,ot));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},et=/^(\S+)\s*(.*)$/,ot=["model","collection","el","id","attributes","className","tagName","events"];i.extend(k.prototype,u,{tagName:"div",$:function(n){return this.$el.find(n)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(n,i){return this.$el&&this.undelegateEvents(),this.$el=n instanceof t.$?n:t.$(n),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(n){var r,t;if(!(n||(n=i.result(this,"events"))))return this;this.undelegateEvents();for(r in n)if(t=n[r],i.isFunction(t)||(t=this[n[r]]),t){var f=r.match(et),u=f[1],e=f[2];if(t=i.bind(t,this),u+=".delegateEvents"+this.cid,e==="")this.$el.on(u,t);else this.$el.on(u,e,t)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){var n,r;this.el?this.setElement(i.result(this,"el"),!1):(n=i.extend({},i.result(this,"attributes")),this.id&&(n.id=i.result(this,"id")),this.className&&(n["class"]=i.result(this,"className")),r=t.$("<"+i.result(this,"tagName")+">").attr(n),this.setElement(r,!1))}});t.sync=function(n,r,u){var e=g[n],f,o,s;return i.defaults(u||(u={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON}),f={type:e,dataType:"json"},u.url||(f.url=i.result(r,"url")||a()),u.data==null&&r&&(n==="create"||n==="update"||n==="patch")&&(f.contentType="application/json",f.data=JSON.stringify(u.attrs||r.toJSON(u))),u.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),u.emulateHTTP&&(e==="PUT"||e==="DELETE"||e==="PATCH")&&(f.type="POST",u.emulateJSON&&(f.data._method=e),o=u.beforeSend,u.beforeSend=function(n){return n.setRequestHeader("X-HTTP-Method-Override",e),o?o.apply(this,arguments):void 0}),f.type==="GET"||u.emulateJSON||(f.processData=!1),f.type==="PATCH"&&d&&(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),s=u.xhr=t.ajax(i.extend(f,u)),r.trigger("request",r,s,u),s};d=typeof window!="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);g={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var nt=t.Router=function(n){n||(n={});n.routes&&(this.routes=n.routes);this._bindRoutes();this.initialize.apply(this,arguments)},st=/\((.*?)\)/g,ht=/(\(\?)?:\w+/g,ct=/\*\w+/g,lt=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(nt.prototype,u,{initialize:function(){},route:function(n,r,u){i.isRegExp(n)||(n=this._routeToRegExp(n));i.isFunction(r)&&(u=r,r="");u||(u=this[r]);var f=this;return t.history.route(n,function(i){var e=f._extractParameters(n,i);f.execute(u,e);f.trigger.apply(f,["route:"+r].concat(e));f.trigger("route",r,e);t.history.trigger("route",f,r,e)}),this},execute:function(n,t){n&&n.apply(this,t)},navigate:function(n,i){return t.history.navigate(n,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var n,t=i.keys(this.routes);(n=t.pop())!=null;)this.route(n,this.routes[n])}},_routeToRegExp:function(n){return n=n.replace(lt,"\\$&").replace(st,"(?:$1)?").replace(ht,function(n,t){return t?n:"([^/?]+)"}).replace(ct,"([^?]*?)"),new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(n,t){var r=n.exec(t).slice(1);return i.map(r,function(n,t){return t===r.length-1?n||null:n?decodeURIComponent(n):null})}});var f=t.History=function(){this.handlers=[];i.bindAll(this,"checkUrl");typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},tt=/^[#\/]|\s+$/g,at=/^\/+|\/+$/g,vt=/msie [\w.]+/,yt=/\/$/,pt=/#.*$/;return f.started=!1,i.extend(f.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(n){var t=(n||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(n,t){if(n==null)if(this._hasPushState||!this._wantsHashChange||t){n=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(yt,"");n.indexOf(i)||(n=n.slice(i.length))}else n=this.getHash();return n.replace(tt,"")},start:function(n){var o,s;if(f.started)throw new Error("Backbone.history has already been started");f.started=!0;this.options=i.extend({root:"/"},this.options,n);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==!1;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),u=document.documentMode,e=vt.exec(navigator.userAgent.toLowerCase())&&(!u||u<=7);if(this.root=("/"+this.root+"/").replace(at,"/"),e&&this._wantsHashChange&&(o=t.$('<iframe src="javascript:0" tabindex="-1">'),this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)),this._hasPushState)t.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!e)t.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(this.fragment=r,s=this.location,this._wantsHashChange&&this._wantsPushState)if(this._hasPushState||this.atRoot())this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(tt,""),this.history.replaceState({},document.title,this.root+this.fragment));else return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);f.started=!1},route:function(n,t){this.handlers.unshift({route:n,callback:t})},checkUrl:function(){var n=this.getFragment();if(n===this.fragment&&this.iframe&&(n=this.getFragment(this.getHash(this.iframe))),n===this.fragment)return!1;this.iframe&&this.navigate(n);this.loadUrl()},loadUrl:function(n){return n=this.fragment=this.getFragment(n),i.any(this.handlers,function(t){if(t.route.test(n))return t.callback(n),!0})},navigate:function(n,t){if(!f.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(n=this.getFragment(n||""));if(n=n.replace(pt,""),this.fragment!==n){if(this.fragment=n,n===""&&i!=="/"&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else if(this._wantsHashChange)this._updateHash(this.location,n,t.replace),this.iframe&&n!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace));else return this.location.assign(i);if(t.trigger)return this.loadUrl(n)}},_updateHash:function(n,t,i){if(i){var r=n.href.replace(/(javascript:|#).*$/,"");n.replace(r+"#"+t)}else n.hash="#"+t}}),t.history=new f,it=function(n,t){var u=this,r,f;return r=n&&i.has(n,"constructor")?n.constructor:function(){return u.apply(this,arguments)},i.extend(r,u,t),f=function(){this.constructor=r},f.prototype=u.prototype,r.prototype=new f,n&&i.extend(r.prototype,n),r.__super__=u.prototype,r},e.extend=c.extend=nt.extend=k.extend=f.extend=it,a=function(){throw new Error('A "url" property or function must be specified');},o=function(n,t){var i=t.error;t.error=function(r){i&&i(n,r,t);n.trigger("error",n,r,t)}},t});!function(n,t){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,r){return n.Marionette=t(n,i,r)});else if("undefined"!=typeof exports){var i=require("backbone"),r=require("underscore");module.exports=t(n,i,r)}else n.Marionette=t(n,n.Backbone,n._)}(this,function(n,t,i){"use strict";function u(n,t){var i=new Error(n);throw i.name=t||"Error",i;}var e,r,f;return!function(n,t){var i=n.ChildViewContainer;return n.ChildViewContainer=function(n,t){var i=function(n){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();t.each(n,this.add,this)},r;return t.extend(i.prototype,{add:function(n,t){var i=n.cid;return this._views[i]=n,n.model&&(this._indexByModel[n.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(n){return this.findByModelCid(n.cid)},findByModelCid:function(n){var t=this._indexByModel[n];return this.findByCid(t)},findByCustom:function(n){var t=this._indexByCustom[n];return this.findByCid(t)},findByIndex:function(n){return t.values(this._views)[n]},findByCid:function(n){return this._views[n]},remove:function(n){var i=n.cid;return n.model&&delete this._indexByModel[n.model.cid],t.any(this._indexByCustom,function(n,t){if(n===i)return(delete this._indexByCustom[t],!0)},this),delete this._views[i],this._updateLength(),this},call:function(n){this.apply(n,t.tail(arguments))},apply:function(n,i){t.each(this._views,function(r){t.isFunction(r[n])&&r[n].apply(r,i||[])})},_updateLength:function(){this.length=t.size(this._views)}}),r=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],t.each(r,function(n){i.prototype[n]=function(){var i=t.values(this._views),r=[i].concat(t.toArray(arguments));return t[n].apply(t,r)}}),i}(n,t),n.ChildViewContainer.VERSION="0.1.4",n.ChildViewContainer.noConflict=function(){return n.ChildViewContainer=i,this},n.ChildViewContainer}(t,i),function(n,t){var r=n.Wreqr,i=n.Wreqr={};return n.Wreqr.VERSION="1.3.1",n.Wreqr.noConflict=function(){return n.Wreqr=r,this},i.Handlers=function(n,t){var i=function(n){this.options=n;this._wreqrHandlers={};t.isFunction(this.initialize)&&this.initialize(n)};return i.extend=n.Model.extend,t.extend(i.prototype,n.Events,{setHandlers:function(n){t.each(n,function(n,i){var r=null;t.isObject(n)&&!t.isFunction(n)&&(r=n.context,n=n.callback);this.setHandler(i,n,r)},this)},setHandler:function(n,t,i){var r={callback:t,context:i};this._wreqrHandlers[n]=r;this.trigger("handler:add",n,t,i)},hasHandler:function(n){return!!this._wreqrHandlers[n]},getHandler:function(n){var t=this._wreqrHandlers[n];if(t)return function(){var n=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,n)}},removeHandler:function(n){delete this._wreqrHandlers[n]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(n,t),i.CommandStorage=function(){var i=function(n){this.options=n;this._commands={};t.isFunction(this.initialize)&&this.initialize(n)};return t.extend(i.prototype,n.Events,{getCommands:function(n){var t=this._commands[n];return t||(t={command:n,instances:[]},this._commands[n]=t),t},addCommand:function(n,t){var i=this.getCommands(n);i.instances.push(t)},clearCommands:function(n){var t=this.getCommands(n);t.instances=[]}}),i}(),i.Commands=function(n){return n.Handlers.extend({storageType:n.CommandStorage,constructor:function(t){this.options=t||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);n.Handlers.prototype.constructor.apply(this,i)},execute:function(n,t){n=arguments[0];t=Array.prototype.slice.call(arguments,1);this.hasHandler(n)?this.getHandler(n).apply(this,t):this.storage.addCommand(n,t)},_executeCommands:function(n,i,r){var u=this.storage.getCommands(n);t.each(u.instances,function(n){i.apply(r,n)});this.storage.clearCommands(n)},_initializeStorage:function(n){var r,i=n.storageType||this.storageType;r=t.isFunction(i)?new i:i;this.storage=r}})}(i),i.RequestResponse=function(n){return n.Handlers.extend({request:function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);if(this.hasHandler(n))return this.getHandler(n).apply(this,t)}})}(i),i.EventAggregator=function(n,t){var i=function(){};return i.extend=n.Model.extend,t.extend(i.prototype,n.Events),i}(n,t),i.Channel=function(){var i=function(t){this.vent=new n.Wreqr.EventAggregator;this.reqres=new n.Wreqr.RequestResponse;this.commands=new n.Wreqr.Commands;this.channelName=t};return t.extend(i.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(n,t){return this._connect("vent",n,t),this},connectCommands:function(n,t){return this._connect("commands",n,t),this},connectRequests:function(n,t){return this._connect("reqres",n,t),this},_connect:function(n,i,r){if(i){r=r||this;var u="vent"===n?"on":"setHandler";t.each(i,function(i,f){this[n][u](f,t.bind(i,r))},this)}}}),i}(i),i.radio=function(n){var i=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()},r,u;return t.extend(i.prototype,{channel:function(n){if(!n)throw new Error("Channel must receive a name");return this._getChannel(n)},_getChannel:function(t){var i=this._channels[t];return i||(i=new n.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(n){t.each(r[n],function(t){this[n][t]=u(this,n,t)},this)},this)}}),r={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},u=function(n,t,i){return function(r){var u=n._getChannel(r)[t],f=Array.prototype.slice.call(arguments,1);return u[i].apply(u,f)}},new i}(i),n.Wreqr}(t,i),e=n.Marionette,r=t.Marionette={},r.VERSION="2.0.3",r.noConflict=function(){return n.Marionette=e,this},t.Marionette=r,r.Deferred=t.$.Deferred,f=Array.prototype.slice,r.extend=t.Model.extend,r.getOption=function(n,t){if(n&&t)return n.options&&void 0!==n.options[t]?n.options[t]:n[t]},r.proxyGetOption=function(n){return r.getOption(this,n)},r.normalizeMethods=function(n){var t,r={};return i.each(n,function(n,u){t=n;i.isFunction(t)||(t=this[t]);t&&(r[u]=t)},this),r},r.normalizeUIKeys=function(n,t){if("undefined"!=typeof n)return(i.each(i.keys(n),function(i){var r=/@ui.[a-zA-Z_$0-9]*/g;i.match(r)&&(n[i.replace(r,function(n){return t[n.slice(4)]})]=n[i],delete n[i])}),n)},r.actAsCollection=function(n,t){i.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],function(r){n[r]=function(){var n=i.values(i.result(this,t)),u=[n].concat(i.toArray(arguments));return i[r].apply(i,u)}})},r.triggerMethod=function(){function n(n,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi;return function(r){var u,e="on"+r.replace(t,n),f=this[e];return i.isFunction(f)&&(u=f.apply(this,i.tail(arguments))),i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),u}}(),r.MonitorDOMRefresh=function(n){function r(n){n._isShown=!0;t(n)}function u(n){n._isRendered=!0;t(n)}function t(n){n._isShown&&n._isRendered&&f(n)&&i.isFunction(n.triggerMethod)&&n.triggerMethod("dom:refresh")}function f(t){return n.contains(t.el)}return function(n){n.listenTo(n,"show",function(){r(n)});n.listenTo(n,"render",function(){u(n)})}}(document.documentElement),function(n){function r(n,t,r,f){var e=f.split(/\s+/);i.each(e,function(i){var f=n[i];f||u('Method "'+i+'" was configured as an event handler, but does not exist.');n.listenTo(t,r,f)})}function f(n,t,i,r){n.listenTo(t,i,r)}function e(n,t,r,u){var f=u.split(/\s+/);i.each(f,function(i){var u=n[i];n.stopListening(t,r,u)})}function o(n,t,i,r){n.stopListening(t,i,r)}function t(n,t,r,u,f){t&&r&&(i.isFunction(r)&&(r=r.call(n)),i.each(r,function(r,e){i.isFunction(r)?u(n,t,e,r):f(n,t,e,r)}))}n.bindEntityEvents=function(n,i,u){t(n,i,u,f,r)};n.unbindEntityEvents=function(n,i,r){t(n,i,r,o,e)};n.proxyBindEntityEvents=function(t,i){return n.bindEntityEvents(this,t,i)};n.proxyUnbindEntityEvents=function(t,i){return n.unbindEntityEvents(this,t,i)}}(r),r.Callbacks=function(){this._deferred=r.Deferred();this._callbacks=[]},i.extend(r.Callbacks.prototype,{add:function(n,t){var r=i.result(this._deferred,"promise");this._callbacks.push({cb:n,ctx:t});r.then(function(i){t&&(i.context=t);n.call(i.context,i.options)})},run:function(n,t){this._deferred.resolve({options:n,context:t})},reset:function(){var n=this._callbacks;this._deferred=r.Deferred();this._callbacks=[];i.each(n,function(n){this.add(n.cb,n.ctx)},this)}}),r.Controller=function(n){this.options=n||{};i.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,i.extend(r.Controller.prototype,t.Events,{destroy:function(){var n=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(n));this.triggerMethod.apply(this,["destroy"].concat(n));this.stopListening();this.off()},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption}),r.Region=function(n){if(this.options=n||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,this.el||u('An "el" must be specified for a region.',"NoElError"),this.$el=this.getEl(this.el),this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},i.extend(r.Region,{buildRegion:function(n,r){var o=i.isString(n),c=i.isString(n.selector),l=i.isUndefined(n.regionClass),f=i.isFunction(n),s,e,h;return f||o||c||u("Region must be specified as a Region class,a selector string or an object with selector property"),o&&(s=n),n.selector&&(s=n.selector,delete n.selector),f&&(e=n),!f&&l&&(e=r),n.regionClass&&(e=n.regionClass,delete n.regionClass),(o||f)&&(n={}),n.el=s,h=new e(n),n.parentEl&&(h.getEl=function(r){if(i.isObject(r))return t.$(r);var u=n.parentEl;return i.isFunction(u)&&(u=u()),u.find(r)}),h}}),i.extend(r.Region.prototype,t.Events,{show:function(n,t){var e;this._ensureElement();var r=t||{},u=n!==this.currentView,o=!!r.preventDestroy,s=!!r.forceShow,f=!!this.currentView,h=!o&&u;return h&&this.empty(),e=u||s,e?(n.once("destroy",i.bind(this.empty,this)),n.render(),f&&this.triggerMethod("before:swap",n),this.triggerMethod("before:show",n),i.isFunction(n.triggerMethod)?n.triggerMethod("before:show"):this.triggerMethod.call(n,"before:show"),this.attachHtml(n),this.currentView=n,f&&this.triggerMethod("swap",n),this.triggerMethod("show",n),i.isFunction(n.triggerMethod)?n.triggerMethod("show"):this.triggerMethod.call(n,"show"),this):this},_ensureElement:function(){i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);this.$el&&0!==this.$el.length||u('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(n){return t.$(n)},attachHtml:function(n){this.el.innerHTML="";this.el.appendChild(n.el)},empty:function(){var n=this.currentView;n&&(this.triggerMethod("before:empty",n),this._destroyView(),this.triggerMethod("empty",n),delete this.currentView)},_destroyView:function(){var n=this.currentView;n.destroy&&!n.isDestroyed?n.destroy():n.remove&&n.remove()},attachView:function(n){this.currentView=n},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el},getOption:r.proxyGetOption,triggerMethod:r.triggerMethod}),r.Region.extend=r.extend,r.RegionManager=function(n){var t=n.Controller.extend({constructor:function(t){this._regions={};n.Controller.call(this,t)},addRegions:function(n,t){var r={};return i.each(n,function(n,u){i.isString(n)&&(n={selector:n});n.selector&&(n=i.defaults({},n,t));var f=this.addRegion(u,n);r[u]=f},this),r},addRegion:function(t,r){var u,f=i.isObject(r),e=i.isString(r),o=!!r.selector;return u=e||f&&o?n.Region.buildRegion(r,n.Region):i.isFunction(r)?n.Region.buildRegion(r,n.Region):r,this.triggerMethod("before:add:region",t,u),this._store(t,u),this.triggerMethod("add:region",t,u),u},get:function(n){return this._regions[n]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(n){var t=this._regions[n];this._remove(n,t)},removeRegions:function(){i.each(this._regions,function(n,t){this._remove(t,n)},this)},emptyRegions:function(){i.each(this._regions,function(n){n.empty()},this)},destroy:function(){this.removeRegions();n.Controller.prototype.destroy.apply(this,arguments)},_store:function(n,t){this._regions[n]=t;this._setLength()},_remove:function(n,t){this.triggerMethod("before:remove:region",n,t);t.empty();t.stopListening();delete this._regions[n];this._setLength();this.triggerMethod("remove:region",n,t)},_setLength:function(){this.length=i.size(this._regions)}});return n.actAsCollection(t.prototype,"_regions"),t}(r),r.TemplateCache=function(n){this.templateId=n},i.extend(r.TemplateCache,{templateCaches:{},get:function(n){var t=this.templateCaches[n];return t||(t=new r.TemplateCache(n),this.templateCaches[n]=t),t.load()},clear:function(){var n,t=f.call(arguments),i=t.length;if(i>0)for(n=0;i>n;n++)delete this.templateCaches[t[n]];else this.templateCaches={}}}),i.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var n=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(n),this.compiledTemplate},loadTemplate:function(n){var i=t.$(n).html();return i&&0!==i.length||u('Could not find template: "'+n+'"',"NoTemplateError"),i},compileTemplate:function(n){return i.template(n)}}),r.Renderer={render:function(n,t){n||u("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");var i;return(i="function"==typeof n?n:r.TemplateCache.get(n))(t)}},r.View=t.View.extend({constructor:function(n){i.bindAll(this,"render");this.options=i.extend({},i.result(this,"options"),i.isFunction(n)?n.call(this):n);this.events=this.normalizeUIKeys(i.result(this,"events"));i.isObject(this.behaviors)&&new r.Behaviors(this);t.View.apply(this,arguments);r.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},mixinTemplateHelpers:function(n){n=n||{};var t=this.getOption("templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(n,t)},normalizeUIKeys:function(n){var t=i.result(this,"ui"),u=i.result(this,"_uiBindings");return r.normalizeUIKeys(n,u||t)},configureTriggers:function(){if(this.triggers){var n={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,function(t,r){var u=i.isObject(t),f=u?t.event:t;n[r]=function(n){var e;if(n){var i=n.preventDefault,r=n.stopPropagation,o=u?t.preventDefault:i,s=u?t.stopPropagation:r;o&&i&&i.apply(n);s&&r&&r.apply(n)}e={view:this,model:this.model,collection:this.collection};this.triggerMethod(f,e)}},this),n}},delegateEvents:function(n){this._delegateDOMEvents(n);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"))},_delegateDOMEvents:function(n){n=n||this.events;i.isFunction(n)&&(n=n.call(this));n=this.normalizeUIKeys(n);var r={},u=i.result(this,"behaviorEvents")||{},f=this.configureTriggers();i.extend(r,u,n,f);t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){var n=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,n);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"))},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var n=new Error("Cannot use a view thats already been destroyed.");throw n.name="ViewDestroyedError",n;}},destroy:function(){if(!this.isDestroyed){var n=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(n));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(n));this.unbindUIElements();this.remove()}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var n=i.result(this,"_uiBindings");this.ui={};i.each(i.keys(n),function(t){var i=n[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(n,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:r.triggerMethod,normalizeMethods:r.normalizeMethods,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.ItemView=r.View.extend({constructor:function(){r.View.apply(this,arguments)},serializeData:function(){var n={};return this.model?n=this.model.toJSON():this.collection&&(n={items:this.collection.toJSON()}),n},render:function(){var n,t,i;return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),n=this.serializeData(),n=this.mixinTemplateHelpers(n),t=this.getTemplate(),i=r.Renderer.render(t,n),this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render",this),this},attachElContent:function(n){return this.$el.html(n),this},destroy:function(){this.isDestroyed||r.View.prototype.destroy.apply(this,arguments)}}),r.CollectionView=r.View.extend({childViewEventPrefix:"childview",constructor:function(n){var t=n||{};this.sort=i.isUndefined(t.sort)?!0:t.sort;this._initChildViewStorage();r.View.apply(this,arguments);this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.invoke(this._bufferedChildren,"triggerMethod","before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,function(n){i.isFunction(n.triggerMethod)?n.triggerMethod("show"):r.triggerMethod.call(n,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(n){this.destroyEmptyView();var t=this.getChildView(n),i=this.collection.indexOf(n);this.addChild(n,t,i)},_onCollectionRemove:function(n){var t=this.children.findByModel(n);this.removeChildView(t);this.checkEmpty()},onShowCalled:function(){this.children.each(function(n){i.isFunction(n.triggerMethod)?n.triggerMethod("show"):r.triggerMethod.call(n,"show")})},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},_sortViews:function(){var n=this.collection.find(function(n,t){var i=this.children.findByModel(n);return i&&i._index!==t},this);n&&this.render()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var n;this.collection.each(function(t,i){n=this.getChildView(t);this.addChild(t,n,i)},this)},showEmptyView:function(){var n=this.getEmptyView(),i;n&&!this._showingEmptyView&&(this.triggerMethod("before:render:empty"),this._showingEmptyView=!0,i=new t.Model,this.addEmptyView(i,n),this.triggerMethod("render:empty"))},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(n,t){var u=this.getOption("emptyViewOptions")||this.getOption("childViewOptions"),r;i.isFunction(u)&&(u=u.call(this));r=this.buildChildView(n,t,u);this._isShown&&this.triggerMethod.call(r,"before:show");this.children.add(r);this.renderChildView(r,-1);this._isShown&&this.triggerMethod.call(r,"show")},getChildView:function(){var n=this.getOption("childView");return n||u('A "childView" must be specified',"NoChildViewError"),n},addChild:function(n,t,r){var u=this.getOption("childViewOptions"),f;return i.isFunction(u)&&(u=u.call(this,n,r)),f=this.buildChildView(n,t,u),this._updateIndices(f,!0,r),this._addChildView(f,r),f},_updateIndices:function(n,t,i){this.sort&&(t?(n._index=i,this.children.each(function(t){t._index>=n._index&&t._index++})):this.children.each(function(t){t._index>=n._index&&t._index--}))},_addChildView:function(n,t){this.proxyChildEvents(n);this.triggerMethod("before:add:child",n);this.children.add(n);this.renderChildView(n,t);this._isShown&&!this.isBuffering&&(i.isFunction(n.triggerMethod)?n.triggerMethod("show"):r.triggerMethod.call(n,"show"));this.triggerMethod("add:child",n)},renderChildView:function(n,t){n.render();this.attachHtml(this,n,t)},buildChildView:function(n,t,r){var u=i.extend({model:n},r);return new t(u)},removeChildView:function(n){n&&(this.triggerMethod("before:remove:child",n),n.destroy?n.destroy():n.remove&&n.remove(),this.stopListening(n),this.children.remove(n),this.triggerMethod("remove:child",n),this._updateIndices(n,!1))},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(n,t){n.$el.append(t)},attachHtml:function(n,t,i){n.isBuffering?(n.elBuffer.appendChild(t.el),n._bufferedChildren.push(t)):n._insertBefore(t,i)||n._insertAfter(t)},_insertBefore:function(n,t){var i,r=this.sort&&t<this.children.length-1;return r&&(i=this.children.find(function(n){return n._index===t+1})),i?(i.$el.before(n.el),!0):!1},_insertAfter:function(n){this.$el.append(n.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){this.isDestroyed||(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),r.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){this.children.each(this.removeChildView,this);this.checkEmpty()},proxyChildEvents:function(n){var t=this.getOption("childViewEventPrefix");this.listenTo(n,"all",function(){var r=Array.prototype.slice.call(arguments),u=r[0],f=this.normalizeMethods(i.result(this,"childEvents"));r[0]=t+":"+u;r.splice(1,0,n);"undefined"!=typeof f&&i.isFunction(f[u])&&f[u].apply(this,r.slice(1));this.triggerMethod.apply(this,r)},this)}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var n=this.getOption("childView")||this.constructor;return n||u('A "childView" must be specified',"NoChildViewError"),n},serializeData:function(){var n={};return this.model&&(n=this.model.toJSON()),n},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderRoot(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&r.CollectionView.prototype._renderChildren.call(this)},_renderRoot:function(){var n={},t,i;n=this.serializeData();n=this.mixinTemplateHelpers(n);this.triggerMethod("before:render:template");t=this.getTemplate();i=r.Renderer.render(t,n);this.attachElContent(i);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(n){return this.$el.html(n),this},attachBuffer:function(n,t){var i=this.getChildViewContainer(n);i.append(t)},_insertAfter:function(n){var t=this.getChildViewContainer(this);t.append(n.el)},getChildViewContainer:function(n){var t,f,e;return"$childViewContainer"in n?n.$childViewContainer:(f=r.getOption(n,"childViewContainer"),f?(e=i.isFunction(f)?f.call(n):f,t="@"===e.charAt(0)&&n.ui?n.ui[e.substr(4)]:n.$(e),t.length<=0&&u('The specified "childViewContainer" was not found: '+n.childViewContainer,"ChildViewContainerMissingError")):t=n.$el,n.$childViewContainer=t,t)},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),r.LayoutView=r.ItemView.extend({regionClass:r.Region,constructor:function(n){n=n||{};this._firstRender=!0;this._initializeRegions(n);r.ItemView.call(this,n)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),r.ItemView.prototype.render.apply(this,arguments)},destroy:function(){this.isDestroyed||(this.regionManager.destroy(),r.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(n,t){this.triggerMethod("before:region:add",n);var i={};return i[n]=t,this._buildRegions(i)[n]},addRegions:function(n){return this.regions=i.extend({},this.regions,n),this._buildRegions(n)},removeRegion:function(n){return this.triggerMethod("before:region:remove",n),delete this.regions[n],this.regionManager.removeRegion(n)},getRegion:function(n){return this.regionManager.get(n)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(n){var t=this,i={regionClass:this.getOption("regionClass"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(n,i)},_initializeRegions:function(n){var r,t;this._initRegionManager();r=i.isFunction(this.regions)?this.regions(n):this.regions||{};t=this.getOption.call(n,"regions");i.isFunction(t)&&(t=t.call(this,n));i.extend(r,t);this.addRegions(r)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(n){n.reset()})},getRegionManager:function(){return new r.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(n){this.triggerMethod("before:add:region",n)});this.listenTo(this.regionManager,"add:region",function(n,t){this[n]=t;this.triggerMethod("add:region",n,t)});this.listenTo(this.regionManager,"before:remove:region",function(n){this.triggerMethod("before:remove:region",n)});this.listenTo(this.regionManager,"remove:region",function(n,t){delete this[n];this.triggerMethod("remove:region",n,t)})}}),r.Behavior=function(n,t){function i(t,i){this.view=i;this.defaults=n.result(this,"defaults")||{};this.options=n.extend({},this.defaults,t);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}return n.extend(i.prototype,t.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),i.extend=r.extend,i}(i,t),r.Behaviors=function(n,t){function i(n,u){u=i.parseBehaviors(n,u||t.result(n,"behaviors"));i.wrap(n,u,t.keys(r))}var r={setElement:function(n,i){n.apply(this,t.tail(arguments,2));t.each(i,function(n){n.$el=this.$el},this)},destroy:function(n,i){var r=t.tail(arguments,2);n.apply(this,r);t.invoke(i,"destroy",r)},bindUIElements:function(n,i){n.apply(this);t.invoke(i,n)},unbindUIElements:function(n,i){n.apply(this);t.invoke(i,n)},triggerMethod:function(n,i){var r=t.tail(arguments,2);n.apply(this,r);t.each(i,function(t){n.apply(t,r)})},delegateEvents:function(i,r){var u=t.tail(arguments,2);i.apply(this,u);t.each(r,function(t){n.bindEntityEvents(t,this.model,n.getOption(t,"modelEvents"));n.bindEntityEvents(t,this.collection,n.getOption(t,"collectionEvents"))},this)},undelegateEvents:function(i,r){var u=t.tail(arguments,2);i.apply(this,u);t.each(r,function(t){n.unbindEntityEvents(t,this.model,n.getOption(t,"modelEvents"));n.unbindEntityEvents(t,this.collection,n.getOption(t,"collectionEvents"))},this)},behaviorEvents:function(i,r){var u={},f=t.result(this,"ui");return t.each(r,function(i,r){var o={},e=t.clone(t.result(i,"events"))||{},s=t.result(i,"ui"),h=t.extend({},f,s);e=n.normalizeUIKeys(e,h);t.each(t.keys(e),function(n){var u=new Array(r+2).join(" "),f=n+u,s=t.isFunction(e[n])?e[n]:i[e[n]];o[f]=t.bind(s,i)});u=t.extend(u,o)}),u}};return t.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");},getBehaviorClass:function(n,r){return n.behaviorClass?n.behaviorClass:t.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[r]:i.behaviorsLookup[r]},parseBehaviors:function(n,r){return t.chain(r).map(function(r,u){var e=i.getBehaviorClass(r,u),f=new e(r,n),o=i.parseBehaviors(n,t.result(f,"behaviors"));return[f].concat(o)}).flatten().value()},wrap:function(n,i,u){t.each(u,function(u){n[u]=t.partial(r[u],n[u],i)})}}),i}(r,i),r.AppRouter=t.Router.extend({constructor:function(n){t.Router.apply(this,arguments);this.options=n||{};var i=this.getOption("appRoutes"),r=this._getController();this.processAppRoutes(r,i);this.on("route",this._processOnRoute,this)},appRoute:function(n,t){var i=this._getController();this._addAppRoute(i,n,t)},_processOnRoute:function(n,t){var r=i.invert(this.appRoutes)[n];i.isFunction(this.onRoute)&&this.onRoute(n,r,t)},processAppRoutes:function(n,t){if(t){var r=i.keys(t).reverse();i.each(r,function(i){this._addAppRoute(n,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(n,t,r){var f=n[r];f||u('Method "'+r+'" was not found on the controller');this.route(t,r,i.bind(f,n))},getOption:r.proxyGetOption}),r.Application=function(n){this._initRegionManager();this._initCallbacks=new r.Callbacks;var u=t.Wreqr.radio.channel("global");this.vent=u.vent;this.commands=u.commands;this.reqres=u.reqres;this.submodules={};i.extend(this,n)},i.extend(r.Application.prototype,t.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(n){this._initCallbacks.add(n)},start:function(n){this.triggerMethod("before:start",n);this._initCallbacks.run(n,this);this.triggerMethod("start",n)},addRegions:function(n){return this._regionManager.addRegions(n)},emptyRegions:function(){this._regionManager.emptyRegions()},removeRegion:function(n){this._regionManager.removeRegion(n)},getRegion:function(n){return this._regionManager.get(n)},getRegions:function(){return this._regionManager.getRegions()},module:function(n,t){var i=r.Module.getClass(t),u=f.call(arguments);return u.unshift(this),i.create.apply(i,u)},_initRegionManager:function(){this._regionManager=new r.RegionManager;this.listenTo(this._regionManager,"before:add:region",function(n){this.triggerMethod("before:add:region",n)});this.listenTo(this._regionManager,"add:region",function(n,t){this[n]=t;this.triggerMethod("add:region",n,t)});this.listenTo(this._regionManager,"before:remove:region",function(n){this.triggerMethod("before:remove:region",n)});this.listenTo(this._regionManager,"remove:region",function(n,t){delete this[n];this.triggerMethod("remove:region",n,t)})},triggerMethod:r.triggerMethod}),r.Application.extend=r.extend,r.Module=function(n,t,r){this.moduleName=n;this.options=i.extend({},this.options,r);this.initialize=r.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=t;this.startWithParent=!0;i.isFunction(this.initialize)&&this.initialize(n,t,this.options)},r.Module.extend=r.extend,i.extend(r.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(n){this._initializerCallbacks.add(n)},addFinalizer:function(n){this._finalizerCallbacks.add(n)},start:function(n){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(n)}),this.triggerMethod("before:start",n),this._initializerCallbacks.run(n,this),this._isInitialized=!0,this.triggerMethod("start",n))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.each(this.submodules,function(n){n.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(n,t){this._runModuleDefinition(n,t)},_runModuleDefinition:function(n,u){if(n){var f=i.flatten([this,this.app,t,r,t.$,i,u]);n.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks;this._finalizerCallbacks=new r.Callbacks},triggerMethod:r.triggerMethod}),i.extend(r.Module,{create:function(n,t,r){var u=n,o=f.call(arguments),s,e;return o.splice(0,3),t=t.split("."),s=t.length,e=[],e[s-1]=r,i.each(t,function(t,i){var f=u;u=this._getModule(f,t,n,r);this._addModuleDefinition(f,u,e[i],o)},this),u},_getModule:function(n,t,r,u){var e=i.extend({},u),o=this.getClass(u),f=n[t];return f||(f=new o(t,r,e),n[t]=f,n.submodules[t]=f),f},getClass:function(n){var t=r.Module;return n?n.prototype instanceof t?n:n.moduleClass||t:t},_addModuleDefinition:function(n,t,i,r){var u=this._getDefine(i),f=this._getStartWithParent(i,t);u&&t.addDefinition(u,r);this._addStartWithParent(n,t,f)},_getStartWithParent:function(n,t){var u;return i.isFunction(n)&&n.prototype instanceof r.Module?(u=t.constructor.prototype.startWithParent,i.isUndefined(u)?!0:u):i.isObject(n)?(u=n.startWithParent,i.isUndefined(u)?!0:u):!0},_getDefine:function(n){return!i.isFunction(n)||n.prototype instanceof r.Module?i.isObject(n)?n.define:null:n},_addStartWithParent:function(n,t,i){t.startWithParent=t.startWithParent&&i;t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,n.addInitializer(function(n){t.startWithParent&&t.start(n)}))}}),r});!function(n,t){var i="Brace",u=n[i],f=function(){return n[i]=u,this},r;"function"==typeof define&&define.amd?define(["underscore","backbone"],t):"object"==typeof exports?module.exports=t(require("underscore"),require("backbone")):(r=t(n._,n.Backbone),r.noConflict=f,n[i]=r)}(this,function(n,t){function e(t){return n.isArray(t)?n.reduce(t,function(n,t){return n[t]=null,n},{}):t}function u(t,i){if(!t||null==i||t===String&&n.isString(i)||t===Number&&n.isNumber(i)||t===Boolean&&n.isBoolean(i))return i;if("string"==typeof t||t instanceof String){if(typeof i!=""+t)throw"The typeof "+i+" is "+typeof i+" but expected it to be "+t;return i}if(n.isArray(t)||t===Array){if(!h(i))throw"Array type expected, but nonnull, non-Array value provided.";return t!==Array&&t[0]?n.map(i,n.bind(u,null,t[0])):i}if("function"!=typeof t)throw"Invalid expected type "+t+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return i instanceof t?i:new t(o(t)?u([t.model],i):i)}function o(n,i){return n&&(n.__super__ instanceof(i||t.Collection)||n.__super__===(i||t.Collection).prototype||n===(i||t.Collection))}function h(i){return n.has(i,"length")&&!(i instanceof String||n.has({string:1,"function":1},typeof i)||i instanceof t.Collection)}function c(t,i){var r={};return n.each(t,function(n,t){if(i[t]&&!s(n,i[t])){if(!n||s(i[t],n))return;throw t+" has conflicted type descriptors.";}r[t]=n}),r}function s(n,t){return t&&t!==n?n&&"string"!=typeof n?n instanceof Array?t===Array||t instanceof Array&&s(n[0],t[0]):"function"!=typeof t?!1:o(t)?o(n,t):n.prototype instanceof t:!1:!0}function l(t){return n.isObject(t)?n.reduce(t,function(t,i,r){return i&&n.isFunction(i.toJSON)?t[r]=i.toJSON():n.isArray(i)&&(t[r]=n.map(i,function(t){return t&&n.isFunction(t.toJSON)?t.toJSON():t})),t},t):t}function a(n){return function(){var t=n.call(this);return l(t)}}function v(t){return function r(u,f){var o,s,h=n.extend({},u);return u&&u.mixins&&(s=u.mixins,delete h.mixins),o=t.call(this,h,f),this.prototype.namedEvents&&i.Mixins.applyMixin(o,{namedEvents:this.prototype.namedEvents}),this.prototype.namedAttributes&&i.Mixins.applyMixin(o,{namedAttributes:this.prototype.namedAttributes}),s&&n.each(u.mixins,function(n){i.Mixins.applyMixin(o,n)}),o.prototype.namedEvents&&i.Mixins.applyMixin(o,i.EventsMixinCreator.create(o.prototype.namedEvents)),o.prototype.namedAttributes&&(o.prototype.namedAttributes=e(o.prototype.namedAttributes),i.Mixins.applyMixin(o,i.AttributesMixinCreator.create(o.prototype.namedAttributes,o.prototype.idAttribute))),o.prototype.toJSON&&(o.prototype.toJSON=a(o.prototype.toJSON)),o.extend=r,o}}function y(t,i){var r=t.prototype,f=i.prototype,e=r.set,o;f.set=function(t,i,r){var f,s=this.namedAttributes,o;if(!s||null==t)return e.apply(this,arguments);n.isObject(t)?(f=n.clone(t),r=i):(f={},f[t]=i);for(o in f)if(n.has(f,o)){if(!n.has(s,o))throw"Attribute '"+o+"' does not exist";f[o]=u(s[o],f[o])}return e.call(this,f,r)};o=r.get;f.get=function(t){if(this.namedAttributes&&!n.has(this.namedAttributes,t))throw"Attribute '"+t+"' does not exist";return o.apply(this,arguments)}}function p(t,i){var r=t.prototype,u=i.prototype,f=r.parse;u.parse=function(t,i){return n.pick(f(t,i),n.keys(this.namedAttributes))}}function r(n){var t=n.extend(),i=n.extend;return t.extend=v(i),t}function w(n){var t=r(n);return y(n,t),p(n,t),t}var i={},f;return i.Mixins={createMethodName:function(n,t){return n+t.charAt(0).toUpperCase()+t.substr(1)},applyMixin:function(t,i){n.forEach(n.keys(i),function(r){var u=t.prototype,o,s,h,v,l,a,f;if("initialize"===r)return o=u.initialize,void(u.initialize=function(){o&&o.apply(this,arguments);i.initialize.apply(this,arguments)});if("validate"===r)return s=u.validate,void(u.validate=function(){if(s){var n=s.apply(this,arguments);if(n)return n}return i.validate.apply(this,arguments)});if("defaults"!==r){if("namedAttributes"===r)return h=e(u.namedAttributes)||{},v=e(i[r]),void(u.namedAttributes=n.extend(h,c(v,h)));if("namedEvents"===r){if(!n.isArray(i[r]))throw"Expects events member on mixin to be an array";return u.namedEvents||(u.namedEvents=[]),void(u.namedEvents=n.uniq(u.namedEvents.concat(i[r])))}if(u.hasOwnProperty(r))throw"Mixin error: class already has property '"+r+"' defined";u[r]=i[r]}else{l=u.defaults||(u.defaults={});a=i[r];for(f in a){if(l.hasOwnProperty(f))throw"Mixin error: class already has default '"+f+"' defined";l[f]=a[f]}}},this)}},i.AttributesMixinCreator={create:function(t,r){var u={},f,e;return(t||(t={}),n.has(t,"id")||(t.id=null),n.each(t,function(n,t){var f=i.Mixins.createMethodName("set",t),r;u[f]=function(n,i){return this.set(t,n,i)};r=i.Mixins.createMethodName("get",t);u[r]=function(){return this.get(t)}}),"string"==typeof r&&"undefined"!=typeof t[r]&&"id"!==r)&&(t.id=t[r],f=i.Mixins.createMethodName("get",r),e=i.Mixins.createMethodName("set",r),u.getId=function(){return this[f]()},u.setId=function(n,t){return this[e](n,t)}),u},ensureType:u},i.EventsMixinCreator={create:function(t){var r={},u=function(t){var f=i.Mixins.createMethodName("on",t),u;r[f]=function(){return this.on.apply(this,[t].concat(n.toArray(arguments)))};u=i.Mixins.createMethodName("trigger",t);r[u]=function(){return this.trigger.apply(this,[t].concat(n.toArray(arguments)))}};return n.each(t,n.bind(u,this)),r}},i.Model=w(t.Model),i.Collection=r(t.Collection),i.View=r(t.View),i.Router=r(t.Router),f=function(){this.initialize.apply(this,arguments)},n.extend(f.prototype,t.Events,{initialize:function(){}}),f.extend=t.Model.extend,i.Evented=r(f),i});!function(n,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Spinner=t()}(this,function(){"use strict";function i(n,t){var i,r=document.createElement(n||"div");for(i in t)r[i]=t[i];return r}function t(n){for(var t=1,i=arguments.length;i>t;t++)n.appendChild(arguments[t]);return n}function a(n,t,i,r){var f=["opacity",t,~~(100*n),i,r].join("-"),e=.01+i/r*100,s=Math.max(1-(1-n)/t*(100-e),n),h=u.substring(0,u.indexOf("Animation")).toLowerCase(),c=h&&"-"+h+"-"||"";return l[f]||(o.insertRule("@"+c+"keyframes "+f+"{0%{opacity:"+s+"}"+e+"%{opacity:"+n+"}"+(e+.01)+"%{opacity:1}"+(e+t)%100+"%{opacity:"+n+"}100%{opacity:"+s+"}}",o.cssRules.length),l[f]=1),f}function e(n,t){var r,i,u=n.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<c.length;i++)if(r=c[i]+t,void 0!==u[r])return r;if(void 0!==u[t])return t}function n(n,t){for(var i in t)n.style[e(n,i)||i]=t[i];return n}function s(n){for(var r,i,t=1;t<arguments.length;t++){r=arguments[t];for(i in r)void 0===n[i]&&(n[i]=r[i])}return n}function h(n,t){return"string"==typeof n?n:n[t%n.length]}function r(n){this.opts=s(n||{},r.defaults,y)}function v(){function u(n,t){return i("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}o.addRule(".spin-vml","behavior:url(#default#VML)");r.prototype.lines=function(i,r){function s(){return n(u("group",{coordsize:o+" "+o,coordorigin:-e+" "+-e}),{width:o,height:o})}function c(i,f,o){t(a,t(n(s(),{rotation:360/r.lines*i+"deg",left:~~f}),t(n(u("roundrect",{arcsize:r.corners}),{width:e,height:r.width,left:r.radius,top:-r.width>>1,filter:o}),u("fill",{color:h(r.color,i),opacity:r.opacity}),u("stroke",{opacity:0}))))}var f,e=r.length+r.width,o=2*e,l=2*-(r.width+r.length)+"px",a=n(s(),{position:"absolute",top:l,left:l});if(r.shadow)for(f=1;f<=r.lines;f++)c(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=r.lines;f++)c(f);return t(i,a)};r.prototype.opacity=function(n,t,i,r){var u=n.firstChild;r=r.shadow&&r.lines||0;u&&t+r<u.childNodes.length&&(u=u.childNodes[t+r],u=u&&u.firstChild,u=u&&u.firstChild,u&&(u.opacity=i))}}var u,c=["webkit","Moz","ms","O"],l={},o=function(){var n=i("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),y={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"},f;return r.defaults={},s(r.prototype,{spin:function(t){this.stop();var f=this,r=f.opts,e=f.el=n(i(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});if(r.radius+r.length+r.width,n(e,{left:r.left,top:r.top}),t&&t.insertBefore(e,t.firstChild||null),e.setAttribute("role","progressbar"),f.lines(e,f.opts),!u){var s,h=0,l=(r.lines-1)*(1-r.direction)/2,c=r.fps,o=c/r.speed,a=(1-r.opacity)/(o*r.trail/100),v=o/r.lines;!function y(){h++;for(var n=0;n<r.lines;n++)s=Math.max(1-(h+(r.lines-n)*v)%o*a,r.opacity),f.opacity(e,n*r.direction+l,s,r);f.timeout=f.el&&setTimeout(y,~~(1e3/c))}()}return f},stop:function(){var n=this.el;return n&&(clearTimeout(this.timeout),n.parentNode&&n.parentNode.removeChild(n),this.el=void 0),this},lines:function(r,f){function s(t,r){return n(i(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:t,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*e+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var o,e=0,c=(f.lines-1)*(1-f.direction)/2;e<f.lines;e++)o=n(i(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:u&&a(f.opacity,f.trail,c+e*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&t(o,n(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(o,s(h(f.color,e),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(n,t,i){t<n.childNodes.length&&(n.childNodes[t].style.opacity=i)}}),f=n(i("group"),{behavior:"url(#default#VML)"}),!e(f,"transform")&&f.adj?v():u=e(f,"animation"),r}),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)}(function(n){if(!n.support.cors&&n.ajaxTransport&&window.XDomainRequest){var t=/^https?:\/\//i,i=/^get|post$/i,r=new RegExp("^"+location.protocol,"i");n.ajaxTransport("* text html xml json",function(u,f){if(u.crossDomain&&u.async&&i.test(u.type)&&t.test(u.url)&&r.test(u.url)){var e=null;return{send:function(t,i){var o="",r=(f.dataType||"").toLowerCase();e=new XDomainRequest;/^\d+$/.test(f.timeout)&&(e.timeout=f.timeout);e.ontimeout=function(){i(500,"timeout")};e.onload=function(){var o="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType,u={code:200,message:"success"},f={text:e.responseText},t;try{if(r==="html"||/text\/html/i.test(e.contentType))f.html=e.responseText;else if(r==="json"||r!=="text"&&/\/json/i.test(e.contentType))try{f.json=n.parseJSON(e.responseText)}catch(h){u.code=500;u.message="parseerror"}else if(r==="xml"||r!=="text"&&/\/xml/i.test(e.contentType)){t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;try{t.loadXML(e.responseText)}catch(h){t=undefined}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){u.code=500;u.message="parseerror";throw"Invalid XML: "+e.responseText;}f.xml=t}}catch(s){throw s;}finally{i(u.code,u.message,f,o)}};e.onprogress=function(){};e.onerror=function(){i(500,"error",{text:e.responseText})};f.data&&(o=n.type(f.data)==="string"?f.data:n.param(f.data));e.open(u.type,u.url);e.send(o)},abort:function(){e&&e.abort()}}}})}}),function(n){var e=document.createElement("input"),o="oninput"in e&&(!("documentMode"in document)||document.documentMode>9),s=function(n){return n.nodeName==="INPUT"&&(n.type==="text"||n.type==="password")},t=null,i=null,r=null,h={get:function(){return r.get.call(this)},set:function(n){i=n;r.set.call(this,n)}},c=function(n){t=n;i=n.value;r=Object.getOwnPropertyDescriptor(n.constructor.prototype,"value");Object.defineProperty(t,"value",h);t.attachEvent("onpropertychange",f)},u=function(){t&&(delete t.value,t.detachEvent("onpropertychange",f),t=null,i=null,r=null)},f=function(r){if(r.propertyName==="value"){var u=r.srcElement.value;u!==i&&(i=u,n(t).trigger("textchange"))}};if(o)n(document).on("input",function(t){t.target.nodeName!=="TEXTAREA"&&n(t.target).trigger("textchange")});else n(document).on("focusin",function(n){s(n.target)&&(u(),c(n.target))}).on("focusout",function(){u()}).on("selectionchange keyup keydown",function(){t&&t.value!==i&&(i=t.value,n(t).trigger("textchange"))})}(jQuery),function(){"use strict";function n(t,r){function h(n,t){return function(){return n.apply(t,arguments)}}var o,f,e,u,s;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!n.notNeeded(t)){for(f=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],e=this,u=0,s=f.length;u<s;u++)e[f[u]]=h(e[f[u]],e);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0));t.addEventListener("click",this.onClick,!0);t.addEventListener("touchstart",this.onTouchStart,!1);t.addEventListener("touchmove",this.onTouchMove,!1);t.addEventListener("touchend",this.onTouchEnd,!1);t.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(n,i,r){var u=Node.prototype.removeEventListener;n==="click"?u.call(t,n,i.hijacked||i,r):u.call(t,n,i,r)},t.addEventListener=function(n,i,r){var u=Node.prototype.addEventListener;n==="click"?u.call(t,n,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(t,n,i,r)});typeof t.onclick=="function"&&(o=t.onclick,t.addEventListener("click",function(n){o(n)},!1),t.onclick=null)}}var r=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!r,t=/iP(ad|hone|od)/.test(navigator.userAgent)&&!r,u=t&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=t&&/OS [6-7]_\d/.test(navigator.userAgent),e=navigator.userAgent.indexOf("BB10")>0;n.prototype.needsClick=function(n){switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(t&&n.type==="file"||n.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(n.className)};n.prototype.needsFocus=function(n){switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}};n.prototype.sendClick=function(n,t){var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur();i=t.changedTouches[0];r=document.createEvent("MouseEvents");r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);r.forwardedTouchEvent=!0;n.dispatchEvent(r)};n.prototype.determineEventType=function(n){return i&&n.tagName.toLowerCase()==="select"?"mousedown":"click"};n.prototype.focus=function(n){var i;t&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"&&n.type!=="month"?(i=n.value.length,n.setSelectionRange(i,i)):n.focus()};n.prototype.updateScrollParent=function(n){var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t;n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)};n.prototype.getTargetElementFromEventTarget=function(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n};n.prototype.onTouchStart=function(n){var r,i,f;if(n.targetTouches.length>1)return!0;if(r=this.getTargetElementFromEventTarget(n.target),i=n.targetTouches[0],t){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!u){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=i.identifier;this.updateScrollParent(r)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=r,this.touchStartX=i.pageX,this.touchStartY=i.pageY,n.timeStamp-this.lastClickTime<this.tapDelay&&n.preventDefault(),!0};n.prototype.touchHasMoved=function(n){var t=n.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1};n.prototype.onTouchMove=function(n){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0};n.prototype.findControl=function(n){return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};n.prototype.onTouchEnd=function(n){var s,c,e,o,h,r=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(n.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(h=n.changedTouches[0],r=document.elementFromPoint(h.pageX-window.pageXOffset,h.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),e=r.tagName.toLowerCase(),e==="label"){if(s=this.findControl(r),s){if(this.focus(r),i)return!1;r=s}}else if(this.needsFocus(r))return n.timeStamp-c>100||t&&window.top!==window&&e==="input"?(this.targetElement=null,!1):(this.focus(r),this.sendClick(r,n),t&&e==="select"||(this.targetElement=null,n.preventDefault()),!1);return t&&!u&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(r)||(n.preventDefault(),this.sendClick(r,n)),!1)};n.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};n.prototype.onMouse=function(n){return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0};n.prototype.onClick=function(n){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)};n.prototype.destroy=function(){var n=this.layer;i&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0));n.removeEventListener("click",this.onClick,!0);n.removeEventListener("touchstart",this.onTouchStart,!1);n.removeEventListener("touchmove",this.onTouchMove,!1);n.removeEventListener("touchend",this.onTouchEnd,!1);n.removeEventListener("touchcancel",this.onTouchCancel,!1)};n.notNeeded=function(n){var t,r,u,f;if(typeof ontouchstart=="undefined")return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r)if(i){if(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||r>31&&document.documentElement.scrollWidth<=window.outerWidth))return!0}else return!0;return e&&(u=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),u[1]>=10&&u[2]>=3&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.msTouchAction==="none"||n.style.touchAction==="manipulation"?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))?!0:n.style.touchAction==="none"||n.style.touchAction==="manipulation"?!0:!1};n.attach=function(t,i){return new n(t,i)};typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return n}):typeof module!="undefined"&&module.exports?(module.exports=n.attach,module.exports.FastClick=n):window.FastClick=n}();
(function(n){var t;t=typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?require("globalize"):n.Globalize;t.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dd MMMM yyyy HH:mm",F:"dd MMMM yyyy HH:mm:ss",M:"dd MMMM",Y:"MMMM yyyy",MonthYear:"MMMM YYYY",ShortDateWithDOW:"ddd DD MMM"}}}})})(this);
var AppCurrentLocaleJson = {"base":{"preview-notify":{"title":"This is a preview","subtitle":"To see your live white label click 'Publish' and go to your URL"},"dropdown":{"mobile":{"close-btn":"Close"}}},"booking":{"changed":{"content":"The price has changed since we last checked it.","header":"The price has changed"},"checking":{"header":"Checking price and availability"},"errorGettingData":{"header":"Error getting data"},"estimated":{"content":"We can't provide you with the live price at the moment. You can proceed with booking, but the price may have changed since we last checked it.  Please check the price on the destination site.","header":"Price is estimated"},"labels":{"adult":"__count__ adult","adult_plural":"__count__ adults","child":"__count__ child","child_plural":"__count__ children","infant":"__count__ infant","infant_plural":"__count__ infants"},"live":{"content":"We've just checked this price for you and the price is live and up to date","header":"Price is live"},"multipart":{"content":"<strong>Multi-part booking</strong> - For this itinerary you need to book <strong>separate tickets</strong> for different part of the journey. Open <strong>all</strong> the booking sites and check ticket prices on each before booking <strong>any</strong> of them.","header":"MULTI-PART BOOKING REQUIRED"},"multipassengers":{"content":"Total price for all passengers","header":"Group price"},"unavailable":{"content":"There are no tickets available for this flight.","header":"Sorry, the price is no longer available"},"session-expired":{"header":"Sorry!","content":"We've had some trouble getting the latest link for this price. Please try to search again."}},"breadcrumbs":{"flights":"Flights","hotels":"Hotels","carhire":"Car Hire","from-to":"__from__ to __to__"},"common":{"book":"Book","sold-out":"Sold out","sold-we-sorry":"We're sorry for that...","close":"Close","continue":"Continue","total":"Total"},"dialogs":{"reset-filter":{"close":"Close","ok":"Reset filters","prompt-cheapest":"The cheapest flight is currently hidden by filters. Reset the filters?","prompt-shortest":"The shortest flight is currently hidden by filters. Reset the filters?","prompt-favorite":"The favourite flight is currently hidden by filters. Reset the filters?","prompt-favorite-hotel":"The favourite hotel is currently hidden by filters. Reset the filters?","prompt-favorite-carhire":"The favourite car is currently hidden by filters. Reset the filters?"},"help-filter":{"prompt-skyscanner":"The __partner__ __products__ search page is developed and supported by Skyscanner. If you have any questions about __products__ search, Skyscanner's team will be happy to help.","prompt-custom":"For any other questions about __partner__, please continue here","help-on":"Help on __products__","other-help":"Other help","flights":"flights","hotels":"hotels","carhire":"car hire","flights-hotels":"flights and hotels","carhire-flights":"flights and car hire","carhire-hotels":"hotels and car hire","carhire-flights-hotels":"flights, hotels and car hire"}},"errors":{"message":"Oops, we didn't manage to load the results. Please check your connection and try again."},"errors-400":{"bad-request":"Sorry! Your origin or destination is invalid. Please check and try again.","hotels":{"bad-request":"Sorry! Your destination is invalid. Please check and try again."},"carhire":{"bad-request":"Sorry! Your pick-up or drop-off is invalid. Please check and try again."}},"errors-404":{"description":"The link you followed to get here may have been broken, or perhaps you have a typo in your URL","title":"Nothing to see here","try-another-search":"Try another search"},"errors-429":{"limit-exceeded":"Sorry, we're encountering some temporary issues getting data. Please, try again later."},"browser-not-supported":{"title":"Browser not supported","description":"This feature is not supported on this version of your browser. We recommend upgrading to the latest version of Internet Explorer to use this feature."},"foursquare":{"airports-photos-attribution":"Airport photos provided by"},"head":{"currency":"Currency","language":"Language","set-home-city":"Home City","set-home-country":"Home Country"},"home":{"cookie-disclaimer":{"disclaimer":"Our website uses cookies:","here":"here","info":"This site is developed by Skyscanner ltd on behalf of __partnerlink__. We use cookies to give you the best experience.","privacy-n-policy":"privacy and cookie policy","submit-agreement":"By continuing to use this site, you're agreeing to our use of cookies in accordance to the Skyscanner __policylink__.","submit-agreement-button":"I agree","submit-agreement-skyscanner-partner":" By using this site and the services on it, you agree to both __partnername__ and Skyscanner’s use of cookies in order to deliver the services and for analytics, personalized content and ad-serving purposes. Learn more at __policylink__ and __partnerpolicylink__.","submit-agreement-skyscanner-only":" By using this site and the services on it, you agree to Skyscanner's use of cookies in order to deliver the services and for analytics, personalized content and ad-serving purposes. Learn more at __policylink__.","placeholder":"__placeholder__","info-new":"This site is developed by Skyscanner on behalf of __partnerlink__."}},"hotels":{"search":{"datepicker":{"headers":{"add-checkout":"Add check-out","checkin":"Check-in","checkout":"Check-out"}},"rooms-selector-header":"Rooms","guest-selector-header":"Guests","errors":{"select-destination":"Please enter a city or location to search for hotels","select-checkin-checkout-dates":"Please select check in and check out dates","incorrect-dates":"Your date was in the past so we've amended it for you.","max-10-guests":"The maximum number of guests you can book for is 10. If you need to book more, please get in touch with your chosen hotel directly.","max-5-rooms":"The maximum number of rooms you can book for is 5. If you need to book more, please get in touch with your chosen hotel directly.","max-guests":"The maximum number of guests you can book for is __guests__. If you need to book more, please get in touch with your chosen hotel directly.","max-rooms":"The maximum number of rooms you can book for is __rooms__. If you need to book more, please get in touch with your chosen hotel directly.","rooms-more-than-guests":"The number of rooms you can book can't be larger than the number of guests. If you need to book this, please get in touch with your chosen hotel directly."},"place":{"placeholder":"Destination ","not-found":"Enter a hotel or destination ","header-where":"Where","geo-type":{"nation":"Country","city":"City","district":"District","hotel":"Hotel","transitway":"Street","airport":"Airport","firstlevelnationadministrativedivision":"Region","park":"Park"}}},"search-form":{"short-label":{"rooms":"__count__ room","rooms_plural":"__count__ rooms","guests":"__count__ guest","guests_plural":"__count__ guests","nights":"__count__ night","nights_plural":"__count__ nights"}},"search-results":{"more-agents":"__count__ more","more-details":"more","price-desc":"Total price for all nights","prices":"Prices"},"search-results-item":{"see-on-map":"see on map"},"inspirational-places":{"tooltips":{"title":"Popular destinations"},"title":"POPULAR DESTINATIONS","description":"all over the world","country-tooltip":"Click to see available cities","city-tooltip":"Click to select this city"},"search-result":{"list":{"no-description":"No description is available for this hotel","empty":"Sorry, we found no results near __destination__ for these dates. Try searching for other dates or changing locations.","filter-empty":"There is no accommodation that matches the selected options.","filter-empty-link":"Remove options","walk-minutes":"__count__ minute walk from the centre of __destination__","walk-minutes_plural":"__count__ minutes walk from the centre of __destination__","drive-minutes":"__count__ minute drive from the centre of __destination__","drive-minutes_plural":"__count__ minutes drive from the centre of __destination__","drive-more-hour":"1 hour __count__ minute drive from the centre of __destination__","drive-more-hour_plural":"1 hour __count__ minutes drive from the centre of __destination__","drive-two-hours":"2 hours drive from centre the of __destination__","kilometers-abbr":"km","drive-more-two-hours":"more than 2 hours drive from the centre of __destination__"},"map":{"distance":{"any":"Any distance","header-label":"Distance","walk":"__numvar__ min Walk","drive":"__numvar__ min Drive"}},"details":{"ratings":"Ratings","information":"Information","type-of-guests":"Type of guests","summary-of-ratings":"Summary of ratings","gallery":"Photos","more-prices":"More prices","no-rating":"No rating","no-reviews":"0 reviews"},"summary":{"hotel":"hotel","hotels":"hotel","hotels_plural":"hotels","filter-results":"Filter results","map":"Map"},"filters":{"rating":{"and-up":"and up","or-more":"or more"},"subtitle":"Filters","apply-btn":"Apply","cancel-btn":"Cancel","reset-btn":"Reset","price-title":"Price","mobile-price-title":"Price","any-mobile-price-title":"Any Price","rating-title":"USER RATING","mobile-rating-title":"User rating","any-mobile-rating-title":"Any User rating","stars-title":"STARS","mobile-stars-title":"Stars","any-mobile-stars-title":"Any Stars","key-facilities-title":"FACILITIES","key-facilities-pool":"Pool","key-facilities-parking":"Parking","key-facilities-gym":"Gym","key-facilities-wifi":"Wi-Fi","accommodation-type":"Accommodation type","any-accommodation-type":"Any Accommodation type","accommodation-type-header-any":"Any","facilities":"Facilities","any-facilities":"Any Facilities","facility-groups":{"health_and_fitness":"Health and Fitness","leisure":"Leisure","parking_and_transport":"Parking and Transport","services":"Services","in_the_rooms":"In the rooms","internet":"Internet","media_and_tech":"Media and Technologies","business":"Business","food_and_drink":"Food and Drink","policies":"Policies","general":"General"}},"sorting":{"recommended":"Recommended","most-popular":"User rating","distance":"Distance to city center","price":"Price (low to high)","price_asc":"Price (low to high)","price_desc":"Price (high to low)","start_asc":"Stars (1 to 5)","start_desc":"Stars (5 to 1)"}},"summary":{"hotels-count-indicator-label":"__filteredCount__ of __allCount__ hotels","hotel":"hotel","hotels":"hotels"}},"hotel":{"search-result":{"help-type-tooltip-summary-header":"How our summary of reviews works","help-type-tooltip-summary":"We analyse user reviews from dozens of travel websites and we generate a summary of all of them so that you can see at a glance the assessment made by the guests of this hotel.In this way, you don't need to invest time in reading hundreds of reviews one by one to extract your own conclusions: we give them to you ready-made!","help-type-tooltip-reviews-header":"True reviews","help-type-tooltip-reviews":"All the analysed reviews come from travel websites that allow reviews to be written only by those users who have made a booking and stayed at the hotel."}},"image-tooptip":{"copyright":"\"__title__\" by __author__ is licensed under __license__"},"inspiration":{"help":"Use the filters to display inspirational destinations below","title":"Inspiration"},"inspirational-places":{"indicative-pricing-message":"Estimated lowest prices only. Found in the last 15 days.","from-price":"from __price__","americas":"Americas","asia":"Asia","description":"round trips from __homecity__","europe":"Europe","filters":{"button":"FILTERS","days":"__count__ Day","days_plural":"__count__ Days","duration-title":"Trip duration","hours":"__count__ Hour","hours_plural":"__count__ Hours","price-title":"Price","time-title":"TIME TO DESTINATION"},"price-from":"from","search-now":"Search now","title":"RECENTLY DISCOVERED","header-section":{"title":"EXPLORE","subtitle-flights":"Recently discovered flights","subtitle-hotels":"Popular destinations","subtitle-carhire":"Popular destinations"},"tooltips":{"noPrice":"We don't have fresh prices for this destination yet.  Be the first to search this route.","title":"Prices discovered by other users within the last 10 days"}},"lowestPrices":{"labels":{"depart":"Depart","return":"Return"},"tooltips":{"noPrice":"We don't know the price because nobody has searched for these dates yet. Click here to be the first."},"footer":"Estimated lowest prices only. Found in the last 15 days."},"message-box":{"text":"Prices shown include all taxes and surcharges."},"paginator":{"page-info":"Page __page__ of __maxpage__","summary":"__from__ to __to__ of __number__ results"},"search":{"datepicker":{"buttons":{"1week":"1 week","2weeks":"2 weeks","2days":"2 days","3days":"3 days","5days":"5 days","nextday":"Next day","sameday":"Same day","today":"Today"},"headers":{"add-return":"Add return","depart":"Depart","return":"Return"},"labels":{"month-next":"Next month","month-prev":"Previous month","month-select":"Select a month","year-select":"Select a year"}},"errors":{"number-of-infants-higher-number-of-adults":"You can only have up to one infant per adult.","same-places":"Please enter a different destination place from your origin place.","select-origin-and-destination":"Enter origin and destination places.","people-count-should-be-a-number":"Passenger count should be a number.","max-9-passengers":"The maximum number of passengers (excluding infants) is 9. If you need to book more, please get in touch with your chosen airline directly.","max-8-adults":"The maximum number of adult passengers is 8. If you need to book more, please get in touch with your chosen airline directly.","max-8-children":"The maximum number of children is 8. If you need to book more, please get in touch with your chosen airline directly.","max-8-infants":"The maximum number of infant passengers is 8. If you need to book more, please get in touch with your chosen airline directly.","incorrect-cabin-class":"Incorrect cabin class.","incorrect-dates":"Your date was in the past so we've amended it for you."},"place":{"any-airport":"Any","not-found":"Type a city or airport","placeholder":"Enter a city or airport","origin":{"placeholder":"Origin city or airport"},"destination":{"placeholder":"Destination city or airport"}},"service-class":{"business":"Business","economy":"Economy","first":"First","premium-economy":"Premium Economy"},"title":{"adults-pax":"Adults (12+ years)","children-pax":"Children (under 12)","infants-pax":"Infants (under 2)"},"label":{"adults":"12+ years","children":"Under 12","infants":"Under 2"}},"search-result":{"0stops":"Direct","1stops":"1 Stop","2stops":"2 Stops","3stops":"3 Stops","add-to-favourites":"Add to favourites","share":"Share","best-offer":{"1days":"1 day","2days":"2 days","3days":"3 days","depart":"Depart","earlier":"earlier","later":"later","return":"Return"},"bookHotel":"Book a hotel in __city__ from","bookHotelNear":"Book a hotel near __airport__ from","bookHotelShort":"Book a hotel from","bookHotelTooltip":"Search for hotel deals on Skyscanner","carHire":"Hire a car in __airport__ from","carHireShort":"Hire a car from","carHireTooltip":"Search for car hire deals on Skyscanner","cheapest":"Cheapest","close-btn":"Close","details":{"arrival-earlier":"__count__ day earlier","arrival-earlier-1days":"1 day earlier","arrival-earlier-plural":"__count__ days earlier","arrival-later":"__count__ day later","arrival-later-1days":"1 day later","arrival-later-2days":"2 days later","arrival-later-plural":"__count__ days later","arrival-message":"The __bound__ leg lands on __date__.","arrival-message-inbound":"The inbound leg lands on __date__.","arrival-message-outbound":"The outbound leg lands on __date__.","arrival-plural-later-days":"__count__ days later","arrival-short":"__sign____count__ day","arrival-short_plural":"__sign____count__ days","codeshare-message":"Flight __flight__ is operated by __carrier__","depart":"depart","diff-airports-message-arrives":"The inbound leg arrives at a different airport from the one you departed.","diff-airports-message-departs":"The inbound leg departs from a different airport from the one you arrived at.","duration-days":"__count__ d","duration-hours":"__count__ hr","duration-hours_plural":"__count__ hrs","duration-minutes":"__count__ min","duration-minutes_plural":"__count__ mins","important-message":"Important:","long-layover-message":"The __bound__ leg involves a long wait in the following airports: __airports__.","long-layover-message-inbound":"The inbound leg involves a long wait in the following airports: __airports__.","long-layover-message-outbound":"The outbound leg involves a long wait in the following airports: __airports__.","long-layover-unknown-message":"The __bound__ leg involves a long wait.","long-layover-unknown-message-inbound":"The inbound leg involves a long wait.","long-layover-unknown-message-outbound":"The outbound leg involves a long wait.","long-wait":"Long Wait","long-wait-short":"Long Wait","message-inbound":"inbound","message-outbound":"outbound","messages-depart":"Depart","messages-inbound":"Inbound","messages-outbound":"Outbound","messages-return":"Return","multi-booking-message":"The __bound__ leg must be booked separately.","multi-booking-message-inbound":"The inbound leg must be booked separately.","multi-booking-message-outbound":"The outbound leg must be booked separately.","multiple-airlines":"Multiple airlines","non-protected-flight-message":"The transfer on __bound__ leg is at your own risk.","non-protected-flight-message-inbound":"The transfer on inbound leg is at your own risk.","non-protected-flight-message-outbound":"The transfer on outbound leg is at your own risk.","operated-by":"Operated by","operated-by-carriers":"Some of the segments on the __bound__ leg are operated by different carriers.","operated-by-carriers-inbound":"Some of the segments on the inbound leg are operated by different carriers.","operated-by-carriers-outbound":"Some of the segments on the outbound leg are operated by different carriers.","operated-by-one":"One or more segments on this trip are operated by","operated-by-one-1":"One of the segments on the __bound__ leg is operated by __carrier__.","operated-by-one-1-inbound":"One of the segments on the inbound leg is operated by __carrier__.","operated-by-one-1-outbound":"One of the segments on the outbound leg is operated by __carrier__.","operated-by-one-2":"Two of the segments on the __bound__ leg are operated by __carrier__.","operated-by-one-2-inbound":"Two of the segments on the inbound leg are operated by __carrier__.","operated-by-one-2-outbound":"Two of the segments on the outbound leg are operated by __carrier__.","operated-by-one-3":"Three of the segments on the __bound__ leg are operated by __carrier__.","operated-by-one-3-inbound":"Three of the segments on the inbound leg are operated by __carrier__.","operated-by-one-3-outbound":"Three of the segments on the outbound leg are operated by __carrier__.","read-important-info-before-message":"Please read the important information below before booking:","return":"return","transfer":"Transfer","transfer-between-airports-message":"You will need to make your own way between __airport1__ and __airport2__ on the __bound__ leg.","transfer-between-airports-message-inbound":"You will need to make your own way between __airport1__ and __airport2__ on the inbound leg.","transfer-between-airports-message-outbound":"You will need to make your own way between __airport1__ and __airport2__ on the outbound leg.","codeshare-message-short":"__carrier__ operates __flight__"},"flight-details-toggle":"Flight details","details-btn":"Details","duration-day":"__count__ day","duration-day_plural":"__count__ days","duration-hour":"__count__ hr","duration-hour_plural":"__count__ hrs","duration-minute":"__count__ min","duration-minute_plural":"__count__ mins","filter-menu":{"airlines":"Airlines","airlines-budget":"Budget Airlines","airlines-star-alliance":"Star Alliance","airlines-skyteam":"Skyteam","airlines-one-world":"OneWorld","airlines-header-any":"Any","airlines-only-selector":"only","airports":"Airports","airports-any":"Any airports","airports-destination-airports":"Destination Airports","airports-header-any":"Any","airports-origin-airports":"Origin Airports","connecting-airports":"Transit in","connecting-airports-header-any":"Any","duration-header-any":"Any","duration-hour":"hr","duration-hour_plural":"hrs","duration-inbound":"Inbound","duration-outbound":"Outbound","more-header":"More","sort":"Sort","sort-list":{"journey-duration":"Duration","price":"Price"},"stops":"Max Stops","stops-header-any":"Any","stops-list":{"any":"Any","direct":"Direct","one-stop":"Up to 1 stop","three-stops":"Up to 3 stops","two-stops":"Up to 2 stops"},"trip-duration":"Duration","trip-duration-hrs":"h"},"list":{"empty":"Sorry, we found no results on this date. Try searching for other dates or changing locations.","filter-empty":"No results found for your selection. Change your filter settings to see results, or","filter-empty-link":"show all results"},"more-btn":"More","price-all-passengers":"Price: all passengers","multi-booking":"2 bookings required","multi-booking_multi":"Multi booking","multi-booking-information":"For this itinerary you need to book","multi-booking-separate-tickets":"separate tickets","multiple-airlines":"Multiple airlines","n-more-button":"(__count__ more)","price-alert":{"button-close":"Close","button-continue":"Continue","content":"The __whitelabelname__ whitelabel is powered by Skyscanner. You are being redirected to Skyscanner to set up a price alert for this route. You will need to sign up for an account and re-enter your search in order to set this up.","header":"Price Alerts"},"proudly-powered-by":"Powered by","read-before-booking-header-message":"Prices shown always include an estimate of all mandatory taxes and charges, but remember to check ALL ticket details, final prices and terms and conditions on the partner website before you book.","read-before-booking-text":{"baggage-insurance-extra-charge-notice":"Some airlines / agents charge extra for baggage, insurance or use of credit cards. View <a>airline fees</a>.","check-for-extra-fees":"Check for extra fees.","t-n-c-notice":"Check T&Cs for travellers aged 12-16.","young-passengers-restriction-notice":"Restrictions may apply to young passengers travelling alone."},"read-before-flying":"Read before booking","remove-from-favourites":"Remove from favourites","shortest":"Shortest","stayAtHotelFrom":"Stay at __hotelname__ from","summary":{"flight":"flight","flights":"flights","flights-indicator-filtered-label":"__filteredNumber__ of __flightsNumber__ flights","lowest-price":"Find lowest prices","luggage-fees-alert":"Luggage fees","luggage-fees-message":"Additional luggage fees may apply. Please check your basket on the booking site before making your purchase.","set-price-alert":"Set price alert","favourites":"Favourites","progress-status":"We are finding the cheapest flights. This may take up to __completeTime__ seconds."},"flights":{"progress-status":"We are finding the cheapest flights. This may take up to __completeTime__ seconds."},"hotels":{"progress-status":"We are finding the best hotel deals. This may take up to __completeTime__ seconds."},"carhire":{"progress-status":"We are finding the best car hire deals. This may take up to __completeTime__ seconds."},"unfreeze-message":"We have more options, click here to show all","moved-to-favorites":"Your result has been moved to your favorites","baggages":{"button":"Baggage Fees","caption":{"bags":"Bags","maxsize":"Max Size","maxweight":"Max Weight","cost":"Cost"},"leg":{"outbound":"Outbound","inbound":"Inbound"},"type":{"checked":"Checked Baggage","cabin":"Cabin Baggage"},"info":{"total-weight":"Total Allowance Weight:","free-weight":"Max Total Free Weight:"},"warning":"Prices may vary. See airline website for full baggage rules.","free":"free"}},"sharing":{"calendar":{"arriving":"Arriving","departing":"Departing","description":"Flight from __origin__ to __destination__","inbound":"Inbound","outbound":"Outbound","summary":"Flight to __destination__"},"home-page":{"description":"Found a great site to search for flights. Check out __sitename__!__partner____skyscanner__","message-twitter":"Found a great site to search for flights. Check out __sitename__!__partner____skyscanner__"},"itinerary":{"description":"I found these flights to __destination__ on __sitename__. I can book them now at __price__. I arrive at __time__ on __date__. Have a look and let me know what you think.__partner____skyscanner__","message-twitter":"I found flights to __destination__ on __sitename__ at __price__. I arrive at __time__ on __date__.__partner____skyscanner__","not-found":"Sorry, the itinerary you're looking for is no longer available. Other options are shown below.","title":"Flight search with __sitename__ powered by Skyscanner."},"search-result":{"description":"I found these flights to __destination__ on __sitename__. I can book them now at __price__. Have a look and let me know what you think.__partner____skyscanner__","message-twitter":"I found flights to __destination__ on __sitename__ from __price__. Have a look and let me know what you think.__partner____skyscanner__","title":"Flight search with __sitename__ powered by Skyscanner."}},"slider":{"from":"From","round-trip-from":"Round Trip From","search-now":"Search now","indicative-pricing-message":"Estimated lowest price only.","indicative-pricing-found-0-days-ago":"Found today.","indicative-pricing-found-1-days-ago":"Found a day ago.","indicative-pricing-found-2-days-ago":"Found 2 days ago.","indicative-pricing-found-3-days-ago":"Found 3 days ago.","indicative-pricing-found-4-days-ago":"Found 4 days ago.","indicative-pricing-found-5-days-ago":"Found 5 days ago.","indicative-pricing-found-6-days-ago":"Found 6 days ago.","indicative-pricing-found-7-days-ago":"Found 7 days ago.","indicative-pricing-found-8-days-ago":"Found 8 days ago.","indicative-pricing-found-9-days-ago":"Found 9 days ago.","indicative-pricing-found-10-days-ago":"Found 10 days ago.","indicative-pricing-found-11-days-ago":"Found 11 days ago.","indicative-pricing-found-12-days-ago":"Found 12 days ago.","indicative-pricing-found-13-days-ago":"Found 13 days ago.","indicative-pricing-found-14-days-ago":"Found 14 days ago.","indicative-pricing-found-15-days-ago":"Found 15 days ago.","indicative-pricing-link-message":"Check latest price."},"sliders":{"afternoon":"Afternoon","close-filter-btn":"Close filters","depart":"Depart","evening":"Evening","morning":"Morning","price":{"cheapest-direct":"direct","cheapest-one-stop":"1 stop","title":"Price"},"return":"Return","show-filter-btn":"Open filters","show-tablet-filter-btn":"Open filters"},"social-network":{"facebook":"Facebook","googleplus":"Google+","sharing":{"calendar":"Calendar","copy-link":"Copy link","email":"Email","more":"More"},"twitter":"Twitter"},"carhire":{"search":{"place":{"placeholder":"Enter location"},"pickup-location":"Pick-up location","dropoff-same-location":"Drop-off at same location","dropoff-location":"Drop-off location","pickup-date":"Pick-up","dropoff-date":"Drop-off","pickup-date-title":"Pick-up date","dropoff-date-title":"Drop-off date","pickup-time":"Time","pickup-time-header-label":"Pick-up time","dropoff-time":"Time","dropoff-time-header-label":"Drop-off time","age-group":{"info-tooltip":"Drivers under 25 and over 70 may incur surcharges"},"age-groups":{"title":"Age","title-mobile":"Driver's age","age-25-70":"Between 25 and 70","76-or-older":"76 or older"},"errors":{"incorrect-dates":"Your date was in the past so we've amended it for you.","incorrect-times":"Your time was invalid so we've amended it for you.","incorrect-pickup":"Please type in a location, city or airport for your car pick-up","incorrect-dropoff":"Please type in a location, city or airport for your car drop-off","incorrect-agegroup":"Your age value was invalid so we've amended it for you."}},"search-result-item":{"location-unavailable":"Location information unavailable","location-btn":"Pick up / drop off location","close-btn":"Close","details":{"pickup-btn":"Pick-up","dropoff-btn":"Drop-off","unavailable-location":"Location data is unavailable.","open-map-btn":"Open a map"},"additional-features":{"air_conditioning":"Air conditioning","insurance":{"theft_protection":"Theft protection","third_party_cover":"Third party cover","free_collision_waiver":"Free collision waiver","free_damage_refund":"Free damage refund"},"free_breakdown_assistance":"Breakdown assistance","free_free_cancellation":"Free cancellation","one_way_surcharge":"One-way surcharge","young_driver_surcharge":"Young driver surcharge","no-young_driver_surcharge":"No young driver surcharge","additional-young_driver_surcharge":"Additional young driver surcharge","young_driver_surcharge-tooltip":"There is a young driver surcharge, not included in the displayed price.","included_mileage":{"unlimited":"Unlimited mileage"},"free-additional_driver":"Free additional driver","free_equipments":{"radio":"Radio","gps":"GPS","roof_rack":"Roof rack","ski_rack":"Ski rack","snow_chains":"Snow chains","snow_tyres":"Snow tyres","baby_seat":"Baby seat","child_seat":"Child seat","booster_seat":"Booster seat"}},"fair-fuel-title":"Fair Fuel Policy","fair-fuel-tooltip-same-amount":"Fair Fuel Policy: Return with the same amount of fuel","fair-fuel-tooltip-half-to-empty":"Fair Fuel Policy: Half to empty","fair-fuel-tooltip-full-to-empty":"Fair Fuel Policy: Full to empty","fair-fuel-tooltip-quarter-to-empty":"Fair Fuel Policy: Quarter to empty","fair-fuel-tooltip-free-full-tank":"Fair Fuel Policy: Free full tank","undefined":"Fair Fuel Policy","rental-provided-by":"Rental provided by:"},"search-form":{"short-label":{"age-title":"age:"}},"inspirational-places":{"country-tooltip":"Click to see available cities","city-tooltip":"Click to select this city"},"message-box":{"one-way-search":"One way search: rental companies may apply an extra charge for returning your car to a different location. Check T&Cs on the booking site."},"search-result":{"filters":{"car-transmission":{"any-title":"Any Transmission","title":"Transmission","any":"Any","manual":"Manual","auto":"Automatic"},"price":{"title":"Price"},"car-class":{"any-title":"Any Car class","title":"Car class","any":"Any"},"fuel-policy":{"any-title":"Any Fuel policy","title":"Fuel policy","any":"Any","all-fair-fuel-policy":"All Fair Fuel Policies","full-to-full":"Full to full","quarter-to-quarter":"Quarter to quarter","half-to-half":"Half to half","half-to-empty":"Half to empty","quarter-to-empty":"Quarter to empty","full-to-empty":"Full to empty","free-full-tank":"Free full tank"},"features":{"any-title":"Any Features","title":"Features","any":"Any"},"website":{"any-title":"Any Booking site","title":"Booking site","any":"Any"},"fuel-type":{"any-title":"Any Fuel type","title":"Fuel type","any":"Any","petrol":"Petrol","diesel":"Diesel","lpg":"Liquefied petroleum gas","electric":"Electric","hybrid":"Hybrid","multi_fuel":"MultiFuel"}},"vehicle-type-disclaimer-tooltip":"The vehicle you rent may not exactly match this make and model, but it will be similar in size and performance.","seats-title":"This type of car can typically carry __count__ passenger","seats-title_plural":"This type of car can typically carry __count__ passengers","air-condition":"Aircon","transmission-manual":"Manual","transmission-auto":"Auto","air-condition-title":"Air conditioning","transmission-manual-title":"Manual","transmission-auto-title":"Automatic","fuel-type-title":"Fuel type","list":{"empty":"Sorry, we found no results to match your search.","filter-empty":"No results found for your selection. Change your filter settings to see results, or","filter-empty-link":"show all results"},"summary":{"filter-results":"Filter results"}},"summary":{"cars-count-indicator-label":"__filteredCount__ of __allCount__ car","cars-count-indicator-label_plural":"__filteredCount__ of __allCount__ cars","car":"car","cars":"car","cars_plural":"cars"}},"favorites":{"jump-to-flight-details":"Jump to flight details","jump-to-hotel-details":"Jump to hotel details","jump-to-car-hire-details":"Jump to car hire details","search-for-flights":"Search for flights to complete your journey","search-for-hotels":"Search for hotels to complete your journey","search-for-cars":"Search for cars to complete your journey","pick-a-favorite":"Pick a favourite from the results below","hotel-not-found":"Sorry, the hotel you're looking for is no longer available. Other options are shown below.","car-not-found":"Sorry, the car you're looking for is no longer available. Other options are shown below.","origin":"Origin","destination":"Destination","from-to-on":"__fromvar__ to __tovar__ on __outboundvar__","returning-on":"Returning on __inboundvar__","cabin-class":"Cabin class","view-details":"View details","adults_1":"1 adult","adults_2":"2 adults","adults_3":"3 adults","adults_4":"4 adults","adults_5":"5 adults","adults_6":"6 adults","adults_7":"7 adults","adults_8":"8 adults","children_1":"1 child","children_2":"2 children","children_3":"3 children","children_4":"4 children","children_5":"5 children","children_6":"6 children","children_7":"7 children","children_8":"8 children","infants_1":"1 infant","infants_2":"2 infants","infants_3":"3 infants","infants_4":"4 infants","infants_5":"5 infants","infants_6":"6 infants","infants_7":"7 infants","infants_8":"8 infants","hotels":{"check-in":"Check-in","check-out":"Check-out","rooms":"rooms","guests":"guests"},"carhire":{"pick-up":"Pick-up","drop-off":"Drop-off","age":"age"},"checking-flights":"Checking if your flight is still available...","checking-hotel":"Checking if your hotel is still available...","checking-carhire":"Checking if your car is still available...","checking-availability":"Checking availability","sold-out":"Sold out","time":{"minutes-ago":"__value__ min(s) ago","hours-ago":"__value__ hour(s) ago","more-than-day-ago":"more than 1 day ago"}},"zendesk":{"help":"Help","need-help":"Need help with this page?"},"ssfooter":{"termsandconditions":"Terms and conditions","privacypolicy":"Privacy policy","cookiepolicy":"Cookie policy","aboutskyscanner":"About Skyscanner","help":"Help"},"aria":{"common":{"close":"Close"},"search":{"swap":"Swap origin and destination","search":"Search","clear":"One way only","addreturn":"Add return date","datehelper":"Hold shift while selecting to open the accessible calendar.","pax-adults":"Number of passengers above 12 years old","pax-children":"Number of passengers under 12 years old","pax-infants":"Number of passengers under 2 years old","cabinclass":"Cabin Class","acc":{"select":{"day":"Select day","month":"Select month","year":"Select year"},"button":{"ok":"Done"},"error":{"invalid":"Invalid date","future":"Selected date is too far in the future","past":"Selected date is in the past"}}},"summary":{"favorites":"Favorites"},"lowestprices":{"previous":"Previous","next":"Next"},"filter-menu":{"duration-outbound":"Outbound duration","duration-inbound":"Inbound duration"},"results":{"heading":"Result ","outbound":"Outbond information","inbound":"Inbound information","add-to-favorites":"Added to favorites","book-with":"Book with __agency__ for __price__","nth-page":"Page __page__","next-page":"Next page","prev-page":"Previous page","segment-heading":"Flight __index__","segment-departure":"Departure","segment-duration":"Duration","segment-arrives":"Arrives","segment-flight-number":"Flight number","airline":"Airline","depart":"Depart","stops":"Stops","duration":"Duration","from":"from","to":"to","details":{"bookwith":"Book with"},"provider":{"from":"from"}}},"promotedPrice":"The price has changed by __amount__ since it was last searched."}
;;
window.AppConfigSettings = {
  "apikey": "ho701497882789112379844432874632",
  "products": [
    "flights"
  ],
  "routes": null,
  "isMsn": false,
  "locationsAsDropdown": null,
  "host": "http://flights.ebdestinations.com/",
  "translationLocale": "en-GB"
};;
"use strict";function widgetInitializationBase(){function n(){if(App.tracking=new App.Services.TrackingService,App.Settings.gaId){var n={accountId:App.Settings.gaId,name:"Skyscanner"};App.tracking.addTrackingAgent(new App.Services.TrackingService.Agents.GoogleAnalytics(n))}}if(!window.FastClick||!window.FastClick.attach||typeof window.FastClick.attach!="function"||window.FastClick.attach(document.body),App.GlobalEvents=_.extend({},Backbone.Events),Backbone.Marionette.Behaviors.behaviorsLookup=function(){return App.Behaviours},Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(n){return App.WidgetTemplates.get(n)},window.Logger=function(){var n={};return _.each(["error","debug","fatal","fatalException","info","log"],function(t){n[t]=function(){}}),n},App.Culture={},window.AppConfigSettings.isMsn){var t=$.fn.animate;$.fn.animate=function(n,i,r){return t.apply(this,arguments),this.closest("#ss-wl-search-widget")[0]&&(this.css(n),$.isFunction(r)&&r.apply(this)),this}}App.on("before:start",function(){var t,n;App.GlobalEvents=_.extend({},Backbone.Events);App.Culture.culture=Globalize.culture(App.Settings.language);App.Settings.mock_data=window.SSWLWidget.Settings.mock_data==="true";t=App.Settings.language.split("-")[0].toLowerCase();App.Culture.culture.language!=t&&App.Settings.config.translationLocale&&(App.Culture.culture=Globalize.culture(App.Settings.config.translationLocale));n={};n[App.Settings.language]={translation:AppCurrentLocaleJson};$.i18n.init({resStore:n,lng:App.Settings.language,load:"current",fallbackLng:App.Settings.config.translationLocale||language,useDataAttrOptions:!0},function(){moment.locale(App.Culture.culture.name,{months:_.filter(App.Culture.culture.calendar.months.names,Boolean),monthsShort:_.filter(App.Culture.culture.calendar.months.namesAbbr,Boolean),weekdays:_.filter(App.Culture.culture.calendar.days.names,Boolean),weekdaysShort:_.filter(App.Culture.culture.calendar.days.namesAbbr,Boolean),weekdaysMin:_.filter(App.Culture.culture.calendar.days.namesShort,Boolean),skyscannerFormat:{Time:"HH:mm",MonthYear:App.Culture.culture.calendar.patterns.MonthYear,ShortDate:App.Culture.culture.calendar.patterns.ShortDate,ShortDateWithDOW:App.Culture.culture.calendar.patterns.ShortDateWithDOW}});$(App.Utils.Ui.bodySelector).i18n();var n={firstDay:1,monthsFull:moment.months(),monthsShort:moment.monthsShort,weekdaysFull:moment.weekdays(),weekdaysShort:moment.weekdaysShort(),weekdaysMin:moment.weekdaysMin(),labelMonthNext:$.i18n.t("search.datepicker.labels.month-next"),labelMonthPrev:$.i18n.t("search.datepicker.labels.month-prev"),labelMonthSelect:$.i18n.t("search.datepicker.labels.month-select"),labelYearSelect:$.i18n.t("search.datepicker.labels.year-select")};$.extend($.fn.pickadate.defaults,n)})});App.module("Services",function(n){n.Currency={getCurrency:function(){var n=new $.Deferred;return n.resolve(App.Settings.currency)}};n.HomeCity={getMarket:function(){var n=new $.Deferred;return n.resolve(App.Settings.market)}};n.Market={getMarket:function(){var n=new $.Deferred;return n.resolve(App.Settings.market)}};n.Language={getLanguageSync:function(){return App.Settings.language},getDisplayLanguageSync:function(){return App.Settings.language},getLanguage:function(){var n=new $.Deferred;return n.resolve(App.Settings.language)}}});App.on("start",function(){n();$(document).on("click",function(n){App.GlobalEvents.trigger("global:click",n)})})}"use strict";var App=new Backbone.Marionette.Application,host=window.AppConfigSettings.host;host||(host="http://whitelabel.api.skyscanner.net/");App.Settings=_.extend({dateFormat:"YYYY-MM-DD",language:"en-GB",skyApiUrl:host,currency:"GBP",market:"UK",type:"large",origin:"",destination:"",geoLocalization:!1,newWindow:!1,responsive:"true",config:window.AppConfigSettings},function(){var n={},t=window.SSWLWidget;return t&&_.isObject(t)&&(t.Settings.flights_path||(t.Settings.flights_path="flights"),t.Settings.hotels_path||(t.Settings.hotels_path="hotels"),t.Settings.carhire_path||(t.Settings.carhire_path="carhire"),n=_.pick(t.Settings,"language","currency","homecity","redirect","container","type","origin","destination","domain","geoLocalization","responsive","newWindow","flights_path","hotels_path","carhire_path","home_country","mock_data","host"),n.redirect||(n.redirect=n.domain),_.has(n,"currency")||(n.currencyHomeBased=!0),n.redirect.substr(-1)!=="/"&&(n.redirect+="/")),n}());widgetInitializationBase();App.module("Dictionaries",function(n){n.CabinClasses=[{name:"search.service-class.economy",value:"Economy"},{name:"search.service-class.premium-economy",value:"PremiumEconomy"},{name:"search.service-class.business",value:"Business"},{name:"search.service-class.first",value:"First"}];n.PaxCount=[{name:"0",value:0},{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5},{name:"6",value:6},{name:"7",value:7},{name:"8",value:8}];n.LocationSchema="sky"});App.module("Utils",function(n){function u(n){var t=i.uri_parser,r=t.exec(n||"");return _.object(_.map(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(n,t){return[n,r[t]||""]}))}function r(n){return n&&(n=decodeURIComponent(n),n=n.replace(i.pluses," ")),n}function f(n){var f,u,t,r,o,s,e=[];if(typeof n=="undefined"||n===null||n==="")return e;for(n.indexOf("?")===0&&(n=n.substring(1)),f=n.toString().split(i.query_separator),u=0;u<f.length;u++)t=f[u],r=t.indexOf("="),r!==0&&(o=decodeURIComponent(t.substring(0,r)),s=decodeURIComponent(t.substring(r+1)),e.push(r===-1?[t,null]:[o,s]));return e}function t(n){this.uriParts=u(n);this.queryPairs=f(this.uriParts.query)}var i={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};_.each(["protocol","userInfo","host","port","path","anchor"],function(n){t.prototype[n]=function(t){if(t!==undefined)this.uriParts[n]=t;else return this.uriParts[n]}});t.prototype.getQueryParam=function(n){var t=_.find(this.queryPairs,function(t){return t[0]===n});return t?t[1]:null};t.prototype.getQueryParamsObj=function(){return _.object(this.queryPairs)};t.prototype.getQueryParams=function(n){var t=_.filter(this.queryPairs,function(t){return t[0]===n});return _.map(t,function(n){return n[1]})};t.prototype.getAnchorParams=function(){var f=this.anchor(),n={},r,e,u,t,i;if(f.indexOf("?")<0)return n;if(r=f.split("?"),r.length===2){for(e=r[1],u=e.split("&"),t=0;t<u.length;t++)i=u[t].split("="),n[i[0]]=i.length>1?i[1]:null;return n}return n};t.prototype.setAnchorParams=function(n){var i=this.anchor(),t=_.filter(_.map(n,function(n,t){return t&&n!==undefined?t.toString()+"="+n.toString():null}),function(n){return n!=null}).join("&"),r;i.indexOf("?")<0?t&&this.anchor(i+"?"+t):(r=i.split("?"),t?this.anchor(r[0]+"?"+t):this.anchor(r[0]))};t.prototype.setQueryParams=function(n){_.isObject(n)&&_.each(n,_.bind(function(n,t){this.addQueryParam(t,n,0)},this))};t.prototype.deleteQueryParam=function(n,t){var i,u,f=arguments,e=[];return _.each(this.queryPairs,function(o){i=r(o[0])===r(n);u=o[1]===t;(f.length!==1||i)&&(f.length!==2||i&&u)||e.push(o)}),this.queryPairs=e,this};t.prototype.addQueryParam=function(n,t,i){return arguments.length===3&&i!==-1?(i=Math.min(i,this.queryPairs.length),this.queryPairs.splice(i,0,[n,t])):arguments.length>0&&this.queryPairs.push([n,t]),this};t.prototype.replaceQueryParam=function(n,t,i){var e=-1,u,f;if(arguments.length===3){for(u=0;u<this.queryPairs.length;u++)if(f=this.queryPairs[u],r(f[0])===r(n)&&decodeURIComponent(f[1])===r(i)){e=u;break}this.deleteQueryParam(n,i).addQueryParam(n,t,e)}else{for(u=0;u<this.queryPairs.length;u++)if(f=this.queryPairs[u],r(f[0])===r(n)){e=u;break}this.deleteQueryParam(n);this.addQueryParam(n,t,e)}return this};t.prototype.query=function(){for(var n="",t,i=0;i<this.queryPairs.length;i++)t=this.queryPairs[i],n.length>0&&(n+="&"),t[1]===null?n+=t[0]:(n+=t[0],n+="=",t[1]&&(n+=encodeURIComponent(t[1])));return n.length>0?"?"+n:n};t.prototype.origin=function(){var n=this.scheme();return n==="file://"?n+this.uriParts.authority:(this.userInfo()&&this.host()&&(n+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(n+="@")),this.host()&&(n+=this.host(),this.port()&&(n+=":"+this.port())),n)};t.prototype.scheme=function(){var n="";return this.protocol()&&(n+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(n+=":"),n+="//"),n};t.prototype.toString=function(){var t,n=this.origin();return t=this.path(),i.ends_with_slashes.test(n)||i.starts_with_slashes.test(t)?(n&&n.replace(i.ends_with_slashes,"/"),t=t.replace(i.starts_with_slashes,"/")):n+="/",n+=t,this.query().toString()&&(n+=this.query().toString()),this.anchor()&&(this.anchor().indexOf("#")!==0&&(n+="#"),n+=this.anchor()),n};t.removeBackslashes=function(n){return n.replace(/([^:]\/)\/+/g,"$1")};n.Uri=t});App.module("Utils",function(n,t,i){var f=null,o=function(n){return n.length===0?!1:n.css("display")!=="none"},e,u,r,s;n.Ui={bodySelector:"#skyscanner-white-label body, div#skyscanner-white-label",Orientation:{LANDSCAPE:"landscape",PORTRAIT:"portrait"},isFlights:_.once(function(){return t.Settings.wlType==="Flights"}),isHotels:_.once(function(){return t.Settings.wlType==="Hotels"}),isCarHire:_.once(function(){return t.Settings.wlType==="CarHire"}),isWidget:function(){return!1},isMobileView:function(){return o($("#mobile-check-container"))},isTabletView:function(){return o($("#tablet-check-container"))},isDesktopView:function(){return!this.isMobileView()&&!this.isTabletView()},getDeviceViewType:function(){return this.isMobileView()?"mobile":this.isTabletView()?"tablet":this.isDesktopView()?"desktop":void 0},isMobileDevice:_.once(function(){if(f===null){var n=!1;(function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|nexus|playbook|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|Kindle|Silk.*Accelerated|Android.*\b(KFTT|KFOTE)\b|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(n=!0)})(navigator.userAgent||navigator.vendor||window.opera);f=n}return f}),isPreview:_.once(function(){var i=t.Utils.Location.getHref(),n=i.match(/http.+\/preview/ig);return n?n.length>0:!1}),getAndroidVersion:_.once(function(){var n=navigator.userAgent.match(/Android\s([0-9\.]*)/);return n?n[1]:!1}),isWinPhone81:_.once(function(){var n=navigator.userAgent.match(/(Windows Phone 8\.1).+(iemobile)/ig);return n?n.length>0:!1}),isWinPhone:_.once(function(){var n=navigator.userAgent.match(/(Windows Phone).+(iemobile)/ig);return n?n.length>0:!1}),isiPad:_.once(function(){return navigator.userAgent.match(/iPad/i)!==null}),isiPad7_0_3:_.once(function(){return navigator.userAgent.match(/iPad.+(7_0_3)/i)!==null}),isiPhone:_.once(function(){return navigator.platform.indexOf("iPhone")!==-1||navigator.platform.indexOf("iPod")!==-1}),isAppleDevice:_.once(function(){var t=n.Ui;return t.isiPhone()||t.isiPad()}),isSafari:_.once(function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1}),is2xAndroid:_.once(function(){return parseInt(n.Ui.getAndroidVersion(),10)===2}),is41Android:_.once(function(){var t=n.Ui.getAndroidVersion();return t?t.match(/^4\.1\.|^4\.1$/)!==null:!1}),isFirefox:_.once(function(){return n.Ui.isFirefoxFromUserAgent(navigator.userAgent)}),isFirefoxFromUserAgent:function(n){return n.toLowerCase().indexOf("firefox")>-1},isIE8:_.once(function(){return/MSIE 8/i.test(navigator.userAgent)}),isIE9:_.once(function(){return/MSIE 9/i.test(navigator.userAgent)}),isSlowDevice:_.once(function(){var t=n.Ui;return window.ltIE9||(t.isMobileView()||t.isTabletView())&&(t.is2xAndroid()||t.is41Android())}),getBrowserInfo:function(n,t,i){n=n||navigator.userAgent;t=t||navigator.appName;i=i||navigator.appVersion;var f=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],u=n.match(/\bOPR\/(\d+)/),r={browser:null,version:null,os:null};return/trident/i.test(f[1])?(u=/\brv[ :]+(\d+)/g.exec(n)||[],r.browser="MSIE",r.version=u[1]):f[1]==="Chrome"&&u?(r.browser="Opera",r.version=u[1]):(r.browser=f[1]?f[1]:t,r.version=f[2]?f[2]:i,u=n.match(/version\/(\d+)/i),u&&(r.version=u[1])),_.each(["windows","linux","android","ios","blackberry","macintosh"],function(t){n.toLowerCase().indexOf(t)>-1&&(r.os=t)}),u=parseFloat(r.version),r.version=_.isNaN(u)?r.version:u,r},getFilterMenuLeftPosition:function(n,i,r,u){u=_.isUndefined(u)?10:u;var e=t.Utils.Ui.isMobileView()||t.Utils.Ui.isTabletView(),f=i.offset().left+(e?0:-r.offset().left)+i.width()/2-n.width()/2,s=r.width()-f+(e?r.offset().left:0),o=n.width()-s;return f=f-(e?r.offset().left:0)-(o>0?o+u:0),Math.max(u,f)},scrollTo:function(n,t,i){var f=$("html, body"),r=500,u;if(_.isNumber(n)){r=_.isNumber(i)?n/i:r;f.animate({scrollTop:n},r);return}n.length!==0&&(_.isNumber(t)||(t=0),u=n.offset().top+t,r=_.isNumber(i)?Math.abs($(window).scrollTop()-u)/i:r,f.animate({scrollTop:u},r))},scrollToElement:function(n,i,r){t.Utils.Ui.scrollTo(n,i||0,r)},scrollToCenter:function(n){var i=n.closest(".js-scrollable-item"),t;if(i.length!==0&&(t=i.closest(".js-scrollable"),t.length!==0)){var u=t.scrollLeft(),f=t.width()/2,e=i.width()/2,o=i.position().left,r=t.css("overflow-x");(r==="auto"||r==="scroll")&&($("body").attr("data-js-scroll",!0),t.scrollLeft(u+o-f+e))}},makeScrollable:function(n){n=n[0];var t=0,i=0;n.addEventListener("touchstart",function(n){t=this.scrollTop+n.touches[0].pageY;i=this.scrollLeft+n.touches[0].pageX},!1);n.addEventListener("touchmove",function(n){(this.scrollTop<this.scrollHeight-this.offsetHeight&&this.scrollTop+n.touches[0].pageY<t-5||this.scrollTop!==0&&this.scrollTop+n.touches[0].pageY>t+5)&&n.preventDefault();(this.scrollLeft<this.scrollWidth-this.offsetWidth&&this.scrollLeft+n.touches[0].pageX<i-5||this.scrollLeft!==0&&this.scrollLeft+n.touches[0].pageX>i+5)&&n.preventDefault();this.scrollTop=t-n.touches[0].pageY;this.scrollLeft=i-n.touches[0].pageX},!1)},inViewPort:function(n){var r=n.offset(),t=r?n.offset().top:0,u=n.height(),i=window.scrollY,f=window.innerHeight;return t>=i&&t+u<=i+f},wrapPrice:function(n,i){typeof i=="string"&&(i=t.Dictionaries.SupportedCurrenciesByCode[i]);n=this.transformPrice(n,i.ThousandsSeparator);var r=$.parseJSON(i.SpaceBetweenAmountAndSymbol)?" ":"",u=$.parseJSON(i.SymbolOnLeft),f=u?i.Symbol+r:"",e=u?"":r+i.Symbol;return f+n+e},quoteDateTimeMessage:function(n){return _.isNumber(n)&&n>=0&&n<16?$.t("slider.indicative-pricing-found-"+Math.round(n)+"-days-ago"):""},ceilPrice:function(n){return n=Math.ceil(n*100)/100,parseInt(Math.ceil(Math.abs(n||0)),10)},transformPrice:function(n,t){t=t?t:"";var i=this.ceilPrice(n).toString(),r=i.length>3?i.length%3:0;return(r?i.substr(0,r)+t:"")+i.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+t)},detectOrientation:function(){var n=$(window);return n.outerWidth(!0)>n.outerHeight(!0)?this.Orientation.LANDSCAPE:this.Orientation.PORTRAIT},deactivateValidationErrors:function(n){n.find(".js-context-error.active").removeClass("active").removeClass("main-error")},showValidationErrors:function(n,i,r){var e=this,u=this.isMobileView(),f;_.isObject(i)&&!_.isEmpty(i)&&(f=n.find(".js-context-error.active"),f.length!==0&&this.deactivateValidationErrors(n),setTimeout(_.bind(function(){var h=_.keys(i),f=_.filter(r,function(n){return _.contains(h,n.key)}),s,o;u&&f&&f.length>0&&(s=_.max(f,function(n){return n.weight}),s.mainError=!0);_.each(_.first(f,3),_.bind(function(t){var i=this.find(".js-error-"+t.key);i.addClass("active");i.stop().animate({opacity:1},{duration:1}).animate({opacity:0},{duration:6e3,complete:function(){e.deactivateValidationErrors(n)}});t.isValidationError||i.addClass("only-show");!!t.mainError&&u&&i.addClass("main-error")},n));o=n.find(".js-context-error:visible");o[0]&&!t.Utils.Ui.inViewPort(o)&&t.Utils.Ui.scrollToElement(n.find(".js-context-error:visible"),-10,.5)},this),5))},_currentScrollTop:0,onOpenFullscreenModal:function(){this._currentScrollTop=$(window).scrollTop()},onCloseFullscreenModal:function(){this.scrollTo(this._currentScrollTop,0)}};_.extend(n.Ui,i.Events);e=n.Ui.detectOrientation();u=n.Ui.getDeviceViewType();$(window).on("resize",function(){var t,i;n.Ui.isMobileDevice()&&(t=n.Ui.detectOrientation(),t!==e&&(e=t,n.Ui.trigger("orientation:change",t)));i=n.Ui.getDeviceViewType();i!==u&&(n.Ui.trigger("breakpoint:change",i,u),u=i)});r=document.body;$(window).on("scroll",function(){r&&r.classList&&(clearTimeout(s),r.classList.contains("disable-hover")||r.classList.add("disable-hover"),s=setTimeout(function(){r.classList.remove("disable-hover")},250))})}),function(){_.extend(App.Utils.Ui,{isMobileView:function(){return $("#ss-wl-search-widget").hasClass("phone")},isDesktopView:function(){return $("#ss-wl-search-widget").hasClass("desktop")},isTabletView:function(){return $("#ss-wl-search-widget").hasClass("tablet")},isPreview:function(){return!1},isWidget:function(){return!0},on:function(){return!1},off:function(){return!1}})}();App.module("Utils",function(n,t){n.Date={getFriday:function(){var r=moment().add(0,"day"),n=moment().startOf("isoweek").add(4,"days"),u=moment().startOf("isoweek").add(11,"days"),i=n.diff(r),f=i>0&&moment(i).format("D")>2?n:u;return f.format(t.Settings.dateFormat)},today:function(){var n=moment().add(0,"day");return n.format(t.Settings.dateFormat)},addDay:function(n,i){return n._isAMomentObject?n.add(i||1,"day").format(t.Settings.dateFormat):moment(n,t.Settings.dateFormat).add(i||1,"day").format(t.Settings.dateFormat)},getNearestFridayMonday:function(){var n=this.getFriday(),i=moment(n).add(3,"day").format(t.Settings.dateFormat);return{friday:n,monday:i}},getNearestFridaySunday:function(){var n=this.getFriday(),i=moment(n).add(2,"day").format(t.Settings.dateFormat);return{friday:n,sunday:i}},validFormat:function(n){return n===moment(n).format(t.Settings.dateFormat)}}});App.module("Utils",function(n,t,i,r,u){n.Spin=function(n,t){if(n instanceof u){t=_.extend({lines:17,length:0,width:2,radius:4,corners:0,rotate:90,direction:1,color:"#000",speed:.9,trail:40,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"},t||{});var i=new Spinner(_.extend(t,{color:n.css("color")})).spin();return n.append(i.el),i}}});App.module("Utils",function(n,t){var r=11,i;n.Storage={setObject:function(n,t){try{return localStorage.setItem(n,JSON.stringify(t)),!0}catch(i){return!1}},setObjectParam:function(n,t,i){try{var r=this.getObject(n);return r[t]=i,localStorage.setItem(n,JSON.stringify(r)),!0}catch(u){return!1}},deleteObjectParam:function(n,t){try{var i=this.getObject(n);return delete i[t],localStorage.setItem(n,JSON.stringify(i)),!0}catch(r){return!1}},getObject:function(n){try{var t=localStorage.getItem(n);return t&&JSON.parse(t)}catch(i){return null}},deleteObject:function(n){try{return localStorage.getItem(n)?(localStorage.removeItem(n),!0):!1}catch(t){return!1}},clear:function(){try{return localStorage.clear(),!0}catch(n){return!1}}};n.StateStorage={Base:{invalidateIfNeeded:function(){var t="wl-storage-version",i=n.Storage.getObject(t),u;if(i===null)n.Storage.setObject(t,r);else{if(u=parseInt(i,10),u===r)return!0;n.Storage.clear();n.Storage.setObject(t,r)}}},Flights:{get:function(){return t.Utils.Storage.getObject("saved.search")},getPrev:function(){return t.Utils.Storage.getObject("prev.saved.search")},set:function(n){n!==null&&(n=_.pick(n,"outbounddate","inbounddate","originplace","destinationplace","originplaceText","destinationplaceText","cabinclass","adults","children","infants"));t.Utils.Storage.setObject("saved.search",n)},saveStateAsPrev:function(){var i=n.StateStorage.Flights.get();i&&t.Utils.Storage.setObject("prev.saved.search",i)},getFilterSelections:function(){var n=t.Utils.Storage.getObject("filterSelections"),i;return n&&n.lastUpdate&&(i=moment(n.lastUpdate,t.Settings.datetimePricingServiceFormat),moment().diff(i,"months",!0)>1)?(this.clearFilterSelections(),null):n},getFilterDepartTime:function(n){return n&&n["depart.time"]},getFilterReturnTime:function(n){return n&&n["return.time"]},setFilterSelections:function(n){n.lastUpdate=moment().format(t.Settings.datetimePricingServiceFormat);t.Utils.Storage.setObject("filterSelections",n)},clearFilterSelections:function(){t.Utils.Storage.deleteObject("filterSelections")},clearFilterTime:function(){t.Utils.Storage.deleteObjectParam("filterSelections","depart.time");t.Utils.Storage.deleteObjectParam("filterSelections","return.time")},getSorting:function(){return t.Utils.Storage.getObject("flights.sortObj")},setSorting:function(n){n&&t.Utils.Storage.setObject("flights.sortObj",n)}},Hotels:{get:function(){return t.Utils.Storage.getObject("hotels.search.state")},getPrev:function(){return t.Utils.Storage.getObject("hotels.prev.saved.search")},set:function(n){return n!==null&&(n=_.pick(n,"guests","checkin","checkout","rooms","destination","destinationText","destinationCountry","destinationInfo")),t.Utils.Storage.setObject("hotels.search.state",n)},saveStateAsPrev:function(){var i=n.StateStorage.Hotels.get();i&&t.Utils.Storage.setObject("hotels.prev.saved.search",i)},getSorting:function(){return t.Utils.Storage.getObject("hotels.sortObj")},setSorting:function(n){n&&t.Utils.Storage.setObject("hotels.sortObj",n)}},CarHire:{get:function(){return t.Utils.Storage.getObject("carhire.search.state")},getPrev:function(){return t.Utils.Storage.getObject("carhire.prev.saved.search")},set:function(n){return n!==null&&(n=_.pick(n,"pickupDate","dropoffDate","pickupTime","dropoffTime","pickupPlace","pickupPlaceText","dropoffPlace","dropoffPlaceText","ageGroup","sameDropoffPlace")),t.Utils.Storage.setObject("carhire.search.state",n)},saveStateAsPrev:function(){var i=n.StateStorage.CarHire.get();i&&t.Utils.Storage.setObject("carhire.prev.saved.search",i)}}};i={_getStorageName:function(){throw new Error("Class is abstract. The function should be overwritten by child.");},changeFavorite:function(){throw new Error("Class is abstract. The function should be overwritten by child");},fireUpdateBasketEvent:function(){throw new Error("Class is abstract. The function should be overwritten by child");},getFavorites:function(){return t.Utils.Storage.getObject(this._getStorageName())||[]},setFavorites:function(n){t.Utils.Storage.setObject(this._getStorageName(),n)},getByFingerprint:function(n){var i=this.getFavorites(),t=_.findWhere(i,{fingerprint:n});return t?t:null},removeFavorite:function(n){var t=this.getFavorites(),i=t.length;return i&&(t=_.reject(t,function(t){return t.fingerprint===n}),i!==t.length)?(this.setFavorites(t),!0):!1},soldOutFavorite:function(n){for(var t=this.getFavorites(),u=t.length,r=!1,i=0;i<u;i++)if(t[i].fingerprint===n&&t[i].soldOut===!1){t[i].soldOut=!0;r=!0;break}r&&(this.setFavorites(t),this.fireUpdateBasketEvent(!1))},updatePriceIfNeeded:function(n,i){for(var u=this.getFavorites(),o=u.length,r=null,e=-1,f=0;f<o;f++)if(u[f].fingerprint===n){r=u[f];e=f;break}r&&(i=t.Utils.Ui.ceilPrice(i),r.priceWithoutCurrency!==i&&(r.priceWithoutCurrency=i,r.priceWithCurrency=t.Utils.Ui.wrapPrice(i,t.Services.Currency.getCurrentCurrencyInfo()),r.timestamp=(new Date).getTime(),u[e]=r,this.setFavorites(u),this.fireUpdateBasketEvent(!1)))}};n.FavoritesStorage={Flights:_.extend({},i,{_getStorageName:function(){var n=t.Services.Language.getLanguageSync().toLowerCase(),i=t.Services.Currency.getCurrencySync().toLowerCase(),r=t.Services.HomeCity.getHomeCitySync(),u=r.PlaceId.toLowerCase();return["flights.saved.favorites.",n,".",i,".",u].join("")},fireUpdateBasketEvent:function(n){t.vent.trigger(t.VentActions.FavoritesBasket.UPDATE_FLIGHTS,n)},changeFavorite:function(n){var i=this.getFavorites(),u=_.some(i,function(t){return t.fingerprint===n.fingerprint}),r;u&&n.isFavorite&&this.removeFavorite(n.fingerprint)&&this.fireUpdateBasketEvent(!1);u||n.isFavorite||(r={fingerprint:n.fingerprint,legs:[],originplace:n.originplace,originplaceText:n.originPlace.Name,destinationplace:n.destinationplace,destinationplaceText:n.destinationPlace.Name,outbounddate:n.outbounddate,inbounddate:n.inbounddate,cabinclass:n.cabinclass,adults:n.adults,children:n.children,infants:n.infants,isAmPmTimeFormatLocale:n.isAmPmTimeFormatLocale,priceWithoutCurrency:t.Utils.Ui.ceilPrice(n.priceWithoutCurrency),priceWithCurrency:n.priceWithCurrency,isOneWay:!n.inbounddate,agentName:n.priceOptions.length&&n.priceOptions[0].priceData.agents.length?n.priceOptions[0].priceData.agents[0].name:"",timestamp:(new Date).getTime(),soldOut:!1},_.each(n.legs,function(n){var t={carriers:[],flight:{stops:{text:n.flight.stops.text,length:n.flight.stops.length}},segments:[]};t.agent=_.pick(n.agent,"name","imageUrl");t.flight.duration=_.pick(n.flight.duration,"days","hours","min");_.each(n.carriers,function(n){t.carriers.push({displayCode:n.displayCode})});_.each(n.segments,function(n){t.segments.push({originStation:{Code:n.originStation&&n.originStation.Code||""},departure:{time:n.departure.time},destinationStation:{Code:n.destinationStation&&n.destinationStation.Code||""},arrival:{time:n.arrival.time,daysShift:n.arrival.daysShift}})});r.legs.push(t)}),i.push(r),this.setFavorites(i),this.fireUpdateBasketEvent(!0))}}),Hotels:_.extend({},i,{_getStorageName:function(){var n=t.Services.Language.getLanguageSync().toLowerCase(),i=t.Services.Currency.getCurrencySync().toLowerCase(),r=t.Services.HomeCity.getHomeCitySync(),u=r.PlaceId.toLowerCase();return["hotels.saved.favorites.",n,".",i,".",u].join("")},fireUpdateBasketEvent:function(n){t.vent.trigger(t.VentActions.FavoritesBasket.UPDATE_HOTELS,n)},changeFavorite:function(n){var i=this.getFavorites(),r=_.find(i,function(t){return t.fingerprint===n.fingerprint});r&&n.favorite&&this.removeFavorite(n.fingerprint)&&this.fireUpdateBasketEvent(!1);r||n.favorite||(i.push(_.extend({},_.pick(n,"name","fingerprint","description","imageUrl","stars","distance","distanceKm","hasPool","hasParking","hasGym","hasWiFi","rating","ratingDesc","ratingClass","agentImageUrl","destination","destinationText","checkin","checkout","guests","rooms","link"),{priceWithCurrency:n.wrappedPrice,priceWithoutCurrency:t.Utils.Ui.ceilPrice(n.priceWithoutCurrency),timestamp:(new Date).getTime(),soldOut:!1})),this.setFavorites(i),this.fireUpdateBasketEvent(!0))}}),CarHire:_.extend({},i,{_getStorageName:function(){var n=t.Services.Language.getLanguageSync().toLowerCase(),i=t.Services.Currency.getCurrencySync().toLowerCase(),r=t.Services.HomeCity.getHomeCitySync(),u=r.PlaceId.toLowerCase();return["carhire.saved.favorites.",n,".",i,".",u].join("")},fireUpdateBasketEvent:function(n){t.vent.trigger(t.VentActions.FavoritesBasket.UPDATE_CARHIRE,n)},changeFavorite:function(n){var i=this.getFavorites(),r=_.find(i,function(t){return t.fingerprint===n.fingerprint}),u;r&&n.favorite&&this.removeFavorite(n.fingerprint)&&this.fireUpdateBasketEvent(!1);r||n.favorite||(u=_.extend(_.pick(n,"vehicle","pickupPlace","dropoffPlace","pickupDate","pickupTime","dropoffDate","dropoffTime","ageGroup","sameDropoffPlace","pickupPlaceText","dropoffPlaceText","seats","air_conditioning","manual","car_class_id","value_add","fingerprint"),{image:{url:n.image.url},webSite:{name:n.webSite.name,image_url:n.webSite.image_url},carClass:{name:n.carClass.name},priceWithoutCurrency:t.Utils.Ui.ceilPrice(n.price_all_days),priceWithCurrency:n.wrappedPrice,timestamp:(new Date).getTime(),soldOut:!1}),i.push(u),this.setFavorites(i),this.fireUpdateBasketEvent(!0))}})}});App.module("Utils",function(n,t){function i(n){var u,f,i,e,r;return t.Settings.config.isMsn?t.Utils.Ui.isWidget()?t.Settings.config.searchUrl:t.Settings.config.homeUrl:(u=t.Utils.Ui.isWidget()?t.Settings.redirect:t.Utils.Location.getBaseHref(),f=t.Services.Language.getDisplayLanguageSync(),i=u+f+"/"+n+"/",t.Utils.Ui.isPreview()&&(i+="preview/"),t.Utils.Ui.isWidget()||(e=new t.Utils.Uri(t.Utils.Location.getHref()),r=e.getQueryParam("host"),r&&(i+="?host="+r)),i)}n.WhiteLabelLocation={getFlightsPageUrl:function(){return i("flights")},getFlightsTabUrl:function(){return t.Settings.config.flightsUrl?t.Settings.config.flightsUrl:n.WhiteLabelLocation.getFlightsPageUrl()},getFlightsSearchPageUrl:function(n,r){var u=new t.Utils.Uri(i(t.Settings.flights_path?t.Settings.flights_path:"flights")),f;return u.setAnchorParams(n),u.setQueryParams(r),f=u.toString(),f.replace("#","#/result")},getFlightsLightRedirectUrl:function(n){var i=_.map(n,function(n,t){return t+"="+n}).join("&"),r,u;return i&&(i="?"+i),r=t.Utils.Location.getBaseHref(),u=t.Services.Language.getDisplayLanguageSync(),r+u+"/flights/redirect"+i},getHotelsPageUrl:function(){return i("hotels")},getHotelsSearchPageUrl:function(n){var u=_.map(n,function(n,t){return t+"="+n}).join("&"),r=i(t.Settings.hotels_path?t.Settings.hotels_path:"hotels")+"#/result?"+u;return t.Settings.home_country&&(r+="&home_country="+t.Settings.home_country),r},getCarHirePageUrl:function(){return i("carhire")},getCarHireSearchPageUrl:function(n,r){var u=new t.Utils.Uri(i(t.Settings.carhire_path?t.Settings.carhire_path:"carhire")),f;return t.Settings.home_country&&(r.home_country=t.Settings.home_country),u.setAnchorParams(n),u.setQueryParams(r),f=u.toString(),f.replace("#","#/result")}};n.ShareLocation={getBaseShareUrl:function(n,t,i){var r=_.map(t,function(n,t){return t+"="+n}).join("&");return n.match(/\/$/)&&(n=n.slice(0,-1)),i?n+"/shared/"+i+"?"+r:n+"/shared?"+r},getMainShareUrl:function(n,t){return this.getBaseShareUrl(n,t)},getResultShareUrl:function(n,t){return this.getBaseShareUrl(n,t,"result")},getItineraryShareUrl:function(n,t){return this.getBaseShareUrl(n,t,"itinerary")},getCalendarShareUrl:function(n,t){return this.getBaseShareUrl(n,t,"calendar")}};n.Location={getHref:function(){return window.location.href},getFullPathName:function(){return window.location.origin+window.location.pathname},getPlainPlaceId:function(n){return typeof n!="string"?"":(_.each(t.Dictionaries.LocationSchemas,function(t){n=n.replace("-"+t,"")}),n)},getBaseHref:function(){var n=document.getElementsByTagName("base"),t=null;return n.length>0&&(t=n[0].href),t},setHref:function(n){window.location.href=n},reload:function(n){n?window.location.reload(!0):window.location.reload()},redirect:function(n){window.location.replace(n)},homeRedirect:function(n){if(!t.Utils.Ui.isWidget()){n=n||"";var r=$("base").attr("href"),i=new t.Utils.Uri(r||window.location.href);i.anchor(n);this.redirect(i.toString())}}}});App.module("Utils",function(n,t){n.RoutesFilter={getRoutes:function(){return t.Utils.Ui.isWidget()?window.AppConfigSettings.routes:t.Settings.config.routes},hasPredefinedRoutes:function(){return n.RoutesFilter.getRoutes()&&n.RoutesFilter.getRoutes().length},locationsAsDropdown:function(){return(t.Utils.Ui.isWidget()?window.AppConfigSettings.locationsAsDropdown:t.Settings.config.locationsAsDropdown)&&n.RoutesFilter.hasPredefinedRoutes()},isAvailiableOrigin:function(t){return!n.RoutesFilter.hasPredefinedRoutes()||_.contains(n.RoutesFilter.getOrigins(),t)},isAvailiableDestination:function(t,i){return!n.RoutesFilter.hasPredefinedRoutes()||_.contains(n.RoutesFilter.getDestinations(t),i)},getOrigins:function(){return _.pluck(n.RoutesFilter.getRoutes(),"code")},getDestinations:function(t){var r=n.RoutesFilter.getRoutes(),i,u;if(t){if(i=_.findWhere(n.RoutesFilter.getRoutes(),{code:t}),_.isUndefined(i))return[];r=[i]}return u=_.reduce(r,function(n,t){return n.concat(_.pluck(t.destinations,"code"))},[]),_.uniq(u)},hasPredefinedCarriers:function(){return t.Settings.config.carriers&&t.Settings.config.carriers.length}}}),function(){var n=function(n,t){this.element=n;this.$element=$(n);this.index=t||0;this.init()};n.prototype.init=function(){this.setIndex();this.$element.on("focus.makeEditable",$.proxy(this._onFocus,this)).on("blur",$.proxy(this._onBlur,this))};n.prototype.setIndex=function(n){this.index=n||this.index;this.$element.attr("tabindex",this.index)};n.prototype._onFocus=function(){$(document).on("keydown.makeEditable",$.proxy(this._onKeyDown,this))};n.prototype._onKeyDown=function(n){n.which===13&&this.$element.trigger("click")};n.prototype._onBlur=function(){$(document).off("keydown.makeEditable")};n.prototype.destroy=function(){this.$element.off(".makeEditable").removeAttr("tabindex")};$.fn.makeFocusable=function(t){return this.each(function(){var r=$(this),i=r.data("makeFocusable");i?typeof t=="number"&&i.setIndex(t):r.data("makeFocusable",i=new n(this,t))})}}(),function(n){App.module("Services",function(t){function i(){this._agents=[];this._flags={}}function u(){}function r(n){this.account=n;this._initializeGAClient()}i.prototype.addTrackingAgent=function(n){if(!n||typeof n.processEvent!="function")throw new Error("agent cannot be null and should have processEvent function");this._agents.push(n)};i.prototype.getAgents=function(){return this._agents};i.prototype.trackEvent=function(n,t,i,r){if(!n||!t)return null;var u={category:n,action:t,label:i,value:r};return _.map(this._agents,function(n){n.processEvent(u)})};i.prototype.trackPageView=function(n){return _.map(this._agents,function(t){t.trackPageView(n)})};i.prototype.setAbTesting=function(n){return _.map(this._agents,function(t){t.setAbTesting&&typeof t.setAbTesting=="function"&&t.setAbTesting(n)})};i.prototype.setFlag=function(n,t){this._flags[n]=t};i.prototype.getFlag=function(n){return this._flags[n]?this._flags[n]:null};i.prototype.decorateUrl=function(n){return ga&&_.isFunction(ga.getAll)&&(this.trackers=this.trackers||ga.getAll()),window.gaplugins&&_.isFunction(window.gaplugins.Linker)&&this.trackers&&(this.linker=this.linker||new window.gaplugins.Linker(this.trackers[0]),n=this.linker.decorate(n)),n};u.prototype.processEvent=function(n){var t=new Date;console.log(_.template("%c[<%= time %>] Event: <%= event.category %>.<%= event.action %> : <%= event.label %> : <%= event.value %>",{time:t.getHours().toString()+":"+t.getMinutes().toString()+":"+t.getSeconds().toString()+"::"+t.getMilliseconds().toString(),event:n}),"color: blue")};u.prototype.trackPageView=function(n){this.processEvent({category:"pageView",action:n,label:"",value:""})};r.prototype._initializeGAClient=function(){if(n.ga===null||n.ga===undefined)throw new Error("google analytics not loaded?");n.ga("create",this.account.accountId,{name:this.account.name});this.trackerName=this.account.name};r.prototype.processEvent=function(t){if(!(n.ga&&t))return!1;n.ga(this.trackerName+".send","event",t.category,t.action,t.label,{eventValue:t.value,dimension1:"2.0"})};r.prototype.trackPageView=function(t){n.ga(this.trackerName+".send","pageview",{page:t,dimension1:"2.0"})};r.prototype.setAbTesting=function(t){n.ga(this.trackerName+".set","dimension2",t)};t.TrackingService=i;t.TrackingService.Agents={Console:u,GoogleAnalytics:r};t.TrackingServiceInitializer={initialize:function(n){var t,i,r;n.tracking=new n.Services.TrackingService;t=new n.Services.TrackingService.Agents.Console;n.tracking.addTrackingAgent(t);n.Settings.gaId&&(i={accountId:n.Settings.gaId,name:"Skyscanner"},r=new n.Services.TrackingService.Agents.GoogleAnalytics(i),n.tracking.addTrackingAgent(r))}}})}(window);App.module("Behaviours",function(n,t,i){n.DropdownKeysControl=i.Marionette.Behavior.extend({_inArrowPressHander:function(n){var i=this.view.$el.find(".js-control-item:visible"),f=i.filter(":focus"),r=i.index(f),u=i.length-1,t=0;r===-1?t=n?0:u:(t=n?r+1:r-1,t=t>u?0:t,t=t<0?u:t);i.get(t).focus()},_onKeyDown:function(n){switch(n.keyCode){case 38:case 40:n.preventDefault();this._inArrowPressHander(n.keyCode===40);break;case 27:this.view.close();this.view.focus();break;case 32:n.preventDefault();this.view.$el.find(".js-control-item:focus").trigger("click")}},_onButtonArrowPress:function(n){if(!this.view.opened){var t=this.view.collection.indexOf(this.view.model),i=this.view.collection.at(n?t+1:t-1);i&&this.view.select(i)}},_onButtonKeyDown:function(n){(n.keyCode===38||n.keyCode===40)&&(n.preventDefault(),this._onButtonArrowPress(n.keyCode===40))},_onViewOpen:function(){$(document).on("keydown."+this.view.cid,_.bind(this._onKeyDown,this))},_onViewClose:function(){$(document).off("keydown."+this.view.cid)},onRender:function(){this.view.ui.toggleContainer.on("keydown."+this.view.cid,_.bind(this._onButtonKeyDown,this));this.view.on("open",_.bind(this._onViewOpen,this));this.view.on("close",_.bind(this._onViewClose,this))},onBeforeDestroy:function(){this.view.ui.toggleContainer.off("keydown."+this.view.cid,_.bind(this._onButtonKeyDown,this))}})});App.module("Behaviours",function(n,t,i){n.ViewUnwrap=i.Marionette.Behavior.extend({onRender:function(){this.view.$el=this.view.$el.children();this.view.$el.unwrap();this.view.setElement(this.view.$el)}})});App.module("Behaviours",function(n,t,i){n.PlaceSelectorTracking=i.Marionette.Behavior.extend({onTrackChange:function(n){this.trackAutosuggestEvent(n)},trackAutosuggestEvent:function(n){var i=this.view.options.trackingLabel||"autosuggest";t.Services.Language.getLanguage().done(_.bind(function(r){var u=this.getTrackingDetailsString(r,n.placeValue,n.placeId,n.itemIndex);t.tracking.trackEvent("home",i,u)},this))},getTrackingDetailsString:function(n,t,i,r){return r=parseInt(r,10),r=_.isNaN(r)||r<0?"undefined":r,i=i||"undefined",t=t||"undefined",n+"_"+t+"_"+i+"_"+r}})});App.module("Views",function(n,t,i){n.DefaultDropdownItemView=i.Marionette.ItemView.extend({template:"#dropdown-item-template",events:{"click @ui.anchor":"onAnchorClick"},ui:{anchor:".js-dropdown-item"},modelEvents:{},onAnchorClick:function(n){n.preventDefault();this.trigger("item:selected",this.model)},onRender:function(){this.$el=this.$el.children();this.$el.unwrap();this.setElement(this.$el);this.$el.i18n()}});n.DefaultDropdownHeaderView=i.Marionette.ItemView.extend({template:"#dropdown-header-template",ui:{toggleName:".js-dropdown-toggle-name"},modelEvents:{change:function(){this.render()}},onRender:function(){this.$el.i18n()},initialize:function(){}});n.DropdownView=i.Marionette.CompositeView.extend({template:"#dropdown-template",templateHelpers:{tabindex:0,label:"",ariaLabel:""},childView:n.DefaultDropdownItemView,headerView:n.DefaultDropdownHeaderView,childViewContainer:".js-dropdown-items-container",opened:!1,isModal:!1,ui:{headerContainer:".js-header-container",toggleContainer:".js-dropdown-toggle",itemsContainerWrapper:".js-dropdown-container-wrapper"},events:{"click @ui.toggleContainer":"onToggleClick"},childEvents:{"item:selected":function(n,t){this.select(t)}},onToggleClick:function(n){(n.preventDefault(),typeof this.disabled=="boolean"&&this.disabled)||(t.GlobalEvents.trigger("global:click",n),this.toggle())},select:function(n,t){(t=t||!1,n.get("disabled"))||(this.selected&&!_.isEqual(this.selected.attributes,n.attributes)&&(this.selected.set(n.attributes),this.headerView.model.set(n.attributes),t||this.trigger("change",n.attributes)),this.model=n,this.close(),this.focus())},getValue:function(){return this.selected},onRender:function(){this.$el=this.$el.children();this.$el.unwrap();this.setElement(this.$el);this.className&&this.$el.addClass(this.className);typeof this.headerView=="function"&&(this.headerView=new this.headerView({model:this.selected.clone()}));this.ui.headerContainer.html(this.headerView.render().$el);this.onAfterRender&&typeof this.onAfterRender=="function"&&this.onAfterRender()},open:function(){t.GlobalEvents.on("global:update-results",this._adjustPosition,this);this.ui.toggleContainer.addClass("selected").attr("aria-expanded",!0);this.ui.itemsContainerWrapper.css({visibility:"hidden"}).addClass("active");this._adjustPosition();this.ui.itemsContainerWrapper.css("visibility","visible");this.opened=!0;this.trigger("open",this);this.onOpen&&this.onOpen()},focus:function(){this.ui.toggleContainer.focus()},close:function(){t.GlobalEvents.off("global:update-results",this._adjustPosition,this);this.ui.toggleContainer.removeClass("selected").attr("aria-expanded",!1);this.ui.itemsContainerWrapper.removeClass("active");this.opened=!1;this.trigger("close",this);this.onClose&&this.onClose()},toggle:function(){this.opened?this.close():this.open();this.trigger("toggle",this)},_adjustPosition:function(){var n=this.ui.itemsContainerWrapper.css({marginTop:"auto"}).closest(".application"),i=n.offset()||{},r=n.height(),u=this.ui.itemsContainerWrapper.offset(),f=this.ui.itemsContainerWrapper.outerHeight(),t=i.top+r-(u.top+f+10);t<0&&this.ui.itemsContainerWrapper.css("margin-top",t+"px")},_bindGlobalClose:function(){t.GlobalEvents.on("global:click",_.bind(this._onGlobalClick,this))},_onGlobalClick:function(n){this.$el.find(".js-dropdown-toggle").hasClass("selected")&&!this.isModal&&(this.$el.is(n.target)||this.$el.has(n.target).length!==0||(this.close(),this.trigger("toggle",this)))},_bindEvents:function(){this._bindGlobalClose()},onBeforeRenderCollection:function(){this.trigger("before:render-dropdown")},initialize:function(n){n;this.model=n&&n.model?n.model:new i.Model;this.collection=n&&n.collection?n.collection:new i.Collection;this.selected=this.getInitialState&&typeof this.getInitialState=="function"?this.getInitialState().clone():this.model.clone();this.templateHelpers.label=n&&n.label?n.label:"";this.templateHelpers.tabindex=n&&n.tabindex?n.tabindex:0;this.templateHelpers.ariaLabel=n&&n.ariaLabel?n.ariaLabel:"";this._bindEvents();this.onAfterInitialize&&typeof this.onAfterInitialize=="function"&&this.onAfterInitialize()}})});App.module("Views",function(n,t){n.MonthSelectorView=t.Views.DropdownView.extend({headerView:t.Views.DefaultDropdownHeaderView.extend({template:"#month-selector-template"}),childView:t.Views.DefaultDropdownItemView.extend({template:"#month-selector-item-template",events:{click:function(){return this.trigger("item:selected",this.model),!1}}})})});App.module("Views",function(n,t,i){n.DatePickerView=i.Marionette.View.extend({settings:{opts:{firstDay:1,format:t.Settings.dateFormat.toLowerCase(),clear:"",min:moment().format(t.Settings.dateFormat),max:moment().add(1,"year").format(t.Settings.dateFormat),selectMonths:!0,selectYears:!0,render:!0,klass:{navPrev:"ss-icon-arrow-left ss-icon",navNext:"ss-icon-arrow-right ss-icon",navDisabled:"picker__nav--disabled"}}},ui:{input:"input",cover:".search-date-cover"},events:{"click .search-date-cover, .ss-icon-plus":"open","click .js-button-clear":"clearValue","keydown .search-date-cover, .ss-icon-plus":"_open"},renderDateCover:function(n){var u,f,e;if(n){var i=moment(n,t.Settings.dateFormat),o=moment.months()[i.get("month")],s=moment.monthsShort()[i.get("month")],h=moment.weekdays()[i.format("d")],r=i.format("D");r<10&&(r="0"+r.toString());u="";f="";_.each(moment.months(),function(n){n.length>10&&(u="hide")});f=u==="hide"?f:"hide";e='<span class="offscreen">'+this.ui.cover.attr("data-label")+'<\/span><div class="month"><span class="js-full-month tablet-hide mobile-hide '+u+'">'+o+'<\/span><span class="js-short-month tablet-show-inline mobile-show-inline '+f+'">'+s+'<\/span><\/div><div class="day">'+r+'<\/div><div class="dayofweek">'+h+"<\/div>";this.ui.cover.html(e)}else this.ui.cover.html('<span class="offscreen">'+$.t("aria.search.addreturn")+'<\/span><div class="ss-icon-plus ss-icon"><\/div>')},getButtonsSettings:function(){return{depart:[{key:"today",days:0},{key:"nextday",days:1},{key:"3days",days:3},{key:"5days",days:5},{key:"1week",days:7},{key:"2weeks",days:14}],backreturn:[{key:"sameday",days:0},{key:"nextday",days:1},{key:"3days",days:3},{key:"5days",days:5},{key:"1week",days:7},{key:"2weeks",days:14}]}},addButtons:function(){var n=$(this.options.pickadateContainer());n.find(".picker__footer button.btn-day").off("click");n.find(".picker__footer").empty();var r=this,f=[],u,e=this.getButtonsSettings();this.type==="return"?(f=e.backreturn,u=this.getPointOfReference()):(f=e.depart,u=this.getPointOfReference());_.each(f,_.bind(function(r){var f={},o=new $.Deferred,e=moment(u).add(r.days,"days");f.day=e.get("date");f.day<10&&(f.day="0"+f.day.toString());f.month=moment.monthsShort()[e.get("month")];f.id="depart";f.item=r;f.value=e.format(moment.localeData()._skyscannerFormat.ShortDate);f.valueAria=e.format("DD MMMM");t.Services.Language.getLanguage().done(function(t){f.biggerFont=t==="ja-JP";var r=i.Marionette.Renderer.render("#date-button-template",f);n.find(".picker__footer").append(r)}).fail(function(){o.reject()})},this));n.find(".picker__footer button.btn-day").on("touchstart click",function(n){var f;n.preventDefault();var e=$(this).data("days"),i=$(this).data("key"),o=moment(u).add(e,"days");r.ui.input.pickadate("picker").set("select",o.format("YYYY-MM-DD"));t.tracking.setFlag(r.type==="depart"?"Datechooser-from":"Datechooser-to",i);f=r.type==="depart"?"Datechooser-from":"Datechooser-to";t.tracking.trackEvent("home",f,i);r.animatedClosing();$(".js-search-form-overlay").removeClass("show");r.close();n.stopPropagation()});n.find(".picker__footer").i18n()},addAccInput:function(){var f=$(this.options.pickadateContainer()),e=f.find(".picker__header"),o=i.Marionette.Renderer.render("#acc-datepicker-template"),t=$(o).i18n(),s=moment(this.picker.get("min")).year(),h=moment(this.picker.get("max")).year(),c,r,u,n;for(c=t.find("[name=acc-days]"),r=t.find("[name=acc-months]"),n=0;n<12;n++)r.append("<option value='"+n+"'>"+moment.months(n)+"<\/option>");for(u=t.find("[name=acc-years]"),n=s;n<=h;n++)u.append("<option value="+n+">"+n+"<\/option>");t.insertAfter(e);t.on("touchstart click",".acc-ok",_.bind(this._validateAccInput,this));t.on("keydown",".acc-input",function(n){(n.keyCode===13||n.keyCode===32)&&n.stopPropagation()})},accOpen:function(){var t=$(this.options.pickadateContainer()),n=this.picker.get()?moment(this.picker.get()):moment(this.getPointOfReference());t.find("[name=acc-days]").val(n.date()).end().find("[name=acc-months]").val(n.month()).end().find("[name=acc-years]").val(n.year()).end().find(".acc-error").empty().end().find(".acc-input:first").focus()},_validateAccDate:function(n){var t=moment(this.picker.get("min").obj),i=moment(this.picker.get("max").obj);return n.isValid()?n.isBefore(t)?"past":n.isAfter(i)?"future":void 0:"invalid"},_validateAccInput:function(){function o(n){return String(n).length===1?"0"+n:n}var n=$(this.options.pickadateContainer()).find(".acc-elements"),t=n.find(".acc-error"),i,r,u,f,e;u=n.find("[name=acc-days]").val();f=parseInt(n.find("[name=acc-months]").val(),10)+1;e=n.find("[name=acc-years]").val();i=e+"-"+o(f)+"-"+o(u);t.empty();n.removeClass("with-dp-errors");r=this._validateAccDate(moment(i));r&&n.closest(".acc-mode").addClass("with-dp-errors");switch(r){case"invalid":t.append("<p role='alert'>"+$.t("aria.search.acc.error.invalid")+"<\/p>");break;case"past":t.append("<p role='alert'>"+$.t("aria.search.acc.error.past")+"<\/p>");break;case"future":t.append("<p role='alert'>"+$.t("aria.search.acc.error.future")+"<\/p>");break;default:this.ui.input.pickadate("picker").set("select",moment(i).format("YYYY-MM-DD"));this.close()}},createCustomHeader:function(){var o=$(this.options.pickadateContainer()),f=this,h=o.find(".picker__header"),c=o.find(".picker__header .picker__select--month"),b=o.find(".picker__header .picker__select--year"),l=moment(this.settings.opts.min),a=moment(this.settings.opts.max),e={month:a.month(),year:a.year()},s={month:l.month(),year:l.year()},n,u,v,y;c.hide();b.hide();var k=function(){var n=_.range(s.year,e.year);return n.push(e.year),n}(),r=[],d=c.find("option");if(_.each(k,function(n){_.each(d,function(t){var i=parseInt($(t).attr("value"),10),u=!1;switch(n){case s.year:i>=s.month&&(u=!0);break;case e.year:i<=e.month&&(u=!0);break;default:u=!0}u&&r.push({month:i,year:n,text:$(t).text(),value:moment(new Date(n,i,1)).format(moment.localeData()._skyscannerFormat.MonthYear)})})}),u=this.ui.input.pickadate("picker").get("highlight"),t.Utils.Ui.isMobileDevice()){n=$("<select />");n.html(_.map(r,function(n,t){return _.template('<option data-value="<%= value %>" value="<%= index %>"><%= text %><\/option>',{value:n.month+","+n.year,index:t,text:moment(new Date(n.year,n.month,1)).format(moment.localeData()._skyscannerFormat.MonthYear)})}).join(""));v=_.indexOf(r,_.find(r,function(n){return u.year===n.year&&u.month===n.month}));y=n.find("option[value='"+v+"']");y.attr("selected","selected");n.on("change",function(){var i=n.find(":selected"),t=i.data("value");return t=t.split(","),f.picker.set("highlight",[parseInt(t[1],10),parseInt(t[0],10),f.picker.get("highlight").date]),!0})}else{var p=new i.Collection(r),g=p.find(function(n){return n.get("month")===u.month&&n.get("year")===u.year}),w=new t.Views.MonthSelectorView({events:{"click .js-dropdown-toggle":"onToggleClick"},collection:p,model:g});w.on("change",function(n){f.picker.set("highlight",[n.year,n.month,f.picker.get("highlight").date])});n=w.render().$el}h.find(".js-header-month-selector").remove();h.prepend($('<div class="picker__header-month-selector js-header-month-selector"><\/div>').html(n))},getHeaderText:function(n){return"search.datepicker.headers."+n},isOpened:!1,accMode:!1,_open:function(n){(n.keyCode===13||n.keyCode===32)&&this.open(n)},open:function(n){var i,r=$(this.options.pickadateContainer());return n.stopPropagation(),n.preventDefault(),this.accMode=n.shiftKey||n.altKey,this.picker.$root.addClass("active"),r[this.accMode?"addClass":"removeClass"]("acc-mode"),$(".js-datedepart-dialog, .js-datereturn-dialog").removeClass("hide-month-select"),$(".js-datedepart-dialog .picker__header select, .js-datereturn-dialog .picker__header select").removeAttr("disabled"),t.GlobalEvents.trigger("global:click",{target:$(t.Utils.Ui.bodySelector),wltype:"jsclick:datepicker",pickadateContainer:this.options.pickadateContainer()}),this.$el.addClass("selected"),this.trigger("block:form"),i=!t.Utils.Ui.isMobileView(),this.picker.open(i),this.isOpened=!0,this.accMode&&this.accOpen(),!1},close:function(){this.isOpened&&(this.isOpened=!1,$(".js-datedepart-dialog, .js-datereturn-dialog").addClass("hide-month-select"),$(".js-datedepart-dialog .picker__header select, .js-datereturn-dialog .picker__header select").attr("disabled","disabled"),this.picker.$root.removeClass("active"),this.$el.removeClass("selected"),this.trigger("unblock:form"),this.ui.input.blur(),this.ui.cover.focus())},getValue:function(){return this.picker.get()},getSelectObject:function(){return this.picker.get("select")},setValue:function(n){_.isString(n)?this.picker.set("select",n,{format:t.Settings.dateFormat.toLowerCase()}):_.isObject(n)&&this.picker.set("select",n)},setHighlightedDate:function(n){this.picker.set("highlight",n,{format:t.Settings.dateFormat.toLowerCase()})},clearValue:function(n){n.preventDefault();this.model.set("date","");t.tracking.trackEvent("home","TripType","OneWay")},_initPicker:function(n){var i=null;n&&(i=this.picker.get("open")||this.isOpened,this.picker.stop(),this.render());this.ui.input.pickadate(_.extend(this.settings.opts,{container:this.options.pickadateContainer(),onSet:_.bind(function(){t.tracking.setFlag(this.type==="depart"?"Datechooser-from":"Datechooser-to","Single");var n=this.picker.get();n&&this.model.set("date",n)},this),onOpen:_.bind(function(){$(this.options.pickadateContainer()).find(".picker").show()},this),onRender:_.bind(function(){this.picker&&this.onRender()},this),onClose:_.bind(function(){return this.close(),!1},this)}));this.picker=this.ui.input.pickadate("picker");n&&i&&($(".js-datedepart-dialog, .js-datereturn-dialog").removeClass("hide-month-select"),$(".js-datedepart-dialog .picker__header select, .js-datereturn-dialog .picker__header select").removeAttr("disabled"),this.$el.addClass("selected"),this.trigger("block:form"),this.picker.open(!1),this.isOpened=!0)},animatedClosing:function(){var n=$(this.options.pickadateContainer());n.find(".picker.picker--opened").fadeOut(300,_.bind(function(){this.picker.close(!1);this.close()},this))},initialize:function(n){this.settings.opts.firstDay=t.Culture.culture.calendar.firstDay;this.setElement(n.el);this.bindUIElements();this.type=n.type;this.model=new i.Model;this.getPointOfReference=n.getPointOfReference;this.model.on("change:date",_.bind(function(){var n=this.model.get("date");n?(this.ui.input.attr("data-active","true"),this.$el.removeClass("inactive").addClass("active")):(this.ui.input.attr("data-active","false"),this.$el.removeClass("active").addClass("inactive"),this.picker.clear());this.renderDateCover(this.model.get("date"));this.trigger("set",n,this.picker.get("select"))},this));this._initPicker();t.Utils.Ui.on("breakpoint:change",this._initPicker,this);var r=$(this.options.pickadateContainer())},onRender:function(){var n=$(this.options.pickadateContainer()),u,r,i,f;this.createCustomHeader();this.addButtons();this.addAccInput();n.find(".picker__day.picker__day--infocus").on("touchstart click",_.bind(function(n){var i,r;if(n.preventDefault(),i=$(n.target),i.hasClass("picker__day--disabled"))return!1;this.ui.input.pickadate("picker").set("select",moment(i.data("pick")).format("YYYY-MM-DD"));r=this.type==="depart"?"Datechooser-from":"Datechooser-to";t.tracking.trackEvent("home",r,"Single");this.animatedClosing();n.stopPropagation()},this));u=$('<div class="calendar_header" data-i18n="'+this.getHeaderText(this.type)+'"><\/div>');r=$('<button class="btn-close invert" aria-label="'+$.t("aria.common.close")+'"><i class="ss-icon-close ss-icon"><\/i><\/button>');n.find(".picker__header").before(u).before(r);n.find(".picker__header").attr("aria-hidden",!0);r.on("click",_.bind(function(n){n.stopPropagation();n.preventDefault();this.picker&&this.picker.close&&this.animatedClosing()},this));this.$el.find("input").css({"font-size":"16px"});this.$el.i18n();n.i18n();i=this.$el.find("input");f=i.attr("aria-owns");i.removeAttr("aria-owns");i.attr("aria-controls",f)}})});App.module("Views",function(n,t,i){function r(n){n.onselectstart=function(){return!1};n.style.MozUserSelect="none";n.style.KhtmlUserSelect="none";n.unselectable="on"}n.PlusMinisViewModel=Brace.Model.extend({namedAttributes:{icon:"string",value:"number",maxValue:"number",minValue:"number"},defaultValues:{icon:"",value:0,maxValue:10,minValue:0},increase:function(){var n=this.getValue();n<this.getMaxValue()&&this.setValue(n+1)},decrease:function(){var n=this.getValue();n>this.getMinValue()&&this.setValue(n-1)},set:function(n,t){return n.hasOwnProperty("value")?(n.value>this.getMaxValue()&&(n.value=this.getMaxValue()),n.value<this.getMinValue()&&(n.value=this.getMinValue())):n==="value"&&(t>this.getMaxValue()&&(t=this.getMaxValue()),t<this.getMinValue()&&(t=this.getMinValue())),i.Model.prototype.set.call(this,n,t)},initialize:function(n){this.setValue(n.value)}});n.PlusMinusView=i.Marionette.ItemView.extend({template:"#plus-minus-view-template",buttonsShown:!1,behaviors:{ViewUnwrap:{}},events:{keydown:function(n){switch(n.which){case 40:n.preventDefault();this.model.decrease();break;case 38:n.preventDefault();this.model.increase()}},click:function(){this.buttonsShown?this.hideActionBtns():this.showActionBtns()},"click .js-plus":function(n){n.stopPropagation();this.model.increase()},"click .js-minus":function(n){n.stopPropagation();this.model.decrease()}},modelEvents:{"change:value":function(n){this.ui.countIndicator.html(n.getValue().toString())}},ui:{plusBtn:".js-plus",minusBtn:".js-minus",countIndicator:".js-count-indicator",cover:".plus-minus-selector"},showActionBtns:function(){this.$el.addClass("active");this.buttonsShown=!0},hideActionBtns:function(){this.$el.removeClass("active");this.buttonsShown=!1},onRender:function(){r(this.ui.plusBtn[0]);r(this.ui.minusBtn[0]);this.ui.cover.makeFocusable(1);this.ui.plusBtn.makeFocusable(1);this.ui.minusBtn.makeFocusable(1);t.GlobalEvents.on("global:click",_.bind(function(n){this.$el.is(n.target)||this.$el.has(n.target).length!==0||this.hideActionBtns()},this))},initialize:function(){}})});App.module("Views",function(n,t,i){var r=Brace.Model.extend({namedAttributes:{type:"string",products:["string"]}});n.WhiteLabelSelectorView=i.Marionette.ItemView.extend({template:"#white-label-selector-template",behaviors:{ViewUnwrap:{}},ui:{flightsLink:'[data-tab="flights"]',hotelsLink:'[data-tab="hotels"]',carhireLink:'[data-tab="carhire"]',poweredByLink:'[data="poweredByLink"]'},events:{"click @ui.flightsLink":"onFlightsTabClickHandler","click @ui.hotelsLink":"onHotelsTabClickHandler","click @ui.carhireLink":"onCarHireTabClickHandler"},onFlightsTabClickHandler:function(n){return(t.GlobalEvents.trigger("global:click",n),t.tracking.trackEvent("home","Tab_Flights"),$(".js-errors").hide(),t.Utils.Ui.isWidget())?(window.SSWLWidget.loadWidget("flights"),this.destroy(),!1):AppSettings.config.isMsn?!0:this.model.getType()==="flights"?(t.Router.navigate("/",{trigger:!0}),!1):!0},onHotelsTabClickHandler:function(n){return(t.GlobalEvents.trigger("global:click",n),t.tracking.trackEvent("home","Tab_Hotels"),$(".js-errors").hide(),t.Utils.Ui.isWidget())?(window.SSWLWidget.loadWidget("hotels"),this.destroy(),!1):this.model.getType()==="hotels"?(t.Router.navigate("/",{trigger:!0}),!1):!0},onCarHireTabClickHandler:function(n){return(t.GlobalEvents.trigger("global:click",n),t.tracking.trackEvent("home","Tab_CarHire"),$(".js-errors").hide(),t.Utils.Ui.isWidget())?(window.SSWLWidget.loadWidget("carhire"),this.destroy(),!1):this.model.getType()==="carhire"?(t.Router.navigate("/",{trigger:!0}),!1):!0},updateLinksHref:function(){var n,i;this.ui.flightsLink.length&&this.ui.flightsLink.attr("href",t.Utils.WhiteLabelLocation.getFlightsTabUrl());this.ui.hotelsLink.length&&this.ui.hotelsLink.attr("href",t.Utils.WhiteLabelLocation.getHotelsPageUrl());this.ui.carhireLink.length&&this.ui.carhireLink.attr("href",t.Utils.WhiteLabelLocation.getCarHirePageUrl());n="http://www.skyscanner.net";this.ui.poweredByLink.attr("href",n);i=this;t.Services.Session.getToken().done(function(r){n="http://partners.api.skyscanner.net/apiservices/referral/v1.0?UserCountry="+t.Services.HomeCity.getMarketSync()+"&UserCurrency="+t.Services.Currency.getCurrencySync()+"&UserLocale="+t.Services.Language.getLanguageSync()+"&apikey="+r;i.ui.poweredByLink.attr("href",n)})},onRender:function(){t.Utils.Ui.isWidget()||this.updateLinksHref();this.$el.i18n()},initialize:function(n){this.model=new r({type:n.type,products:n.products})}})});App.module("Flights.Models",function(n){var t=["Economy","PremiumEconomy","Business","First"];n.SearchStateModel=Brace.Model.extend({namedAttributes:{originplace:"string",originplaceText:"string",destinationplace:"string",destinationplaceText:"string",outbounddate:"string",inbounddate:"string",country:"string",currency:"string",locale:"string",locationSchema:"string",adults:"number",children:"number",infants:"number",cabinclass:"string",shared:"boolean",originCityCode:"string",originCountryCode:"string",originCountryName:"string",originplaceCityCode:"string",destinationCityCode:"string",destinationCountryCode:"string",destinationCountryName:"string",itinerary:"string",groupPricing:"boolean",includeAgents:"string"},defaults:function(){return{originplace:"",originplaceText:"",destinationplace:"",destinationplaceText:"",outbounddate:"",inbounddate:"",country:"",currency:"",locale:"",locationSchema:"",adults:0,children:0,infants:0,cabinclass:"",groupPricing:!0}},validate:function(){var t=new $.Deferred,i=n.SearchStateModel.validate(this.toJSON());return _.isEmpty(i)?t.resolve(this):t.reject(i),t.promise()}});n.SearchStateModel.validate=function(i){var r={},f;(i.originplace===""||i.destinationplace==="")&&(r[n.SearchStateModel.ValidationErrors.EMPTY_PLACE.key]=$.i18n.t(n.SearchStateModel.ValidationErrors.EMPTY_PLACE.message));i.originplace!==""&&i.originplace===i.destinationplace&&(r[n.SearchStateModel.ValidationErrors.SAME_PLACE.key]=$.i18n.t(n.SearchStateModel.ValidationErrors.SAME_PLACE.message));i.adults=parseInt(i.adults,10)||1;i.children=parseInt(i.children,10)||0;i.infants=parseInt(i.infants,10)||0;i.adults<1&&(i.adults=1);i.adults+i.children>9&&(r[n.SearchStateModel.ValidationErrors.MAX_8_PASSENGERS.key]=$.i18n.t(n.SearchStateModel.ValidationErrors.MAX_8_PASSENGERS.message));i.adults<i.infants&&(i.infants=i.adults,r[n.SearchStateModel.ValidationErrors.TOO_MANY_INFANTS.key]=$.i18n.t(n.SearchStateModel.ValidationErrors.TOO_MANY_INFANTS.message));f=_.some(_.map(t,function(n){return n===i.cabinclass}));f||(i.cabinclass=_.first(t));var u=!1,e=!1,o=App.Utils.Date.today();return(!_.isString(i.outbounddate)||_.isEmpty(i.outbounddate)||!App.Utils.Date.validFormat(i.outbounddate)||i.outbounddate<o)&&(u=!0),_.isEmpty(i.inbounddate)||(!_.isString(i.inbounddate)||!App.Utils.Date.validFormat(i.inbounddate)||i.inbounddate<o||u===!1&&i.inbounddate<i.outbounddate)&&(e=!0),u&&(i.outbounddate=App.Utils.Date.getFriday(),(u||!_.isEmpty(i.inbounddate))&&(i.inbounddate=""),r[n.SearchStateModel.ValidationErrors.INCORRECT_DATES.key]=$.i18n.t(n.SearchStateModel.ValidationErrors.INCORRECT_DATES.message)),e&&(i.inbounddate="",r[n.SearchStateModel.ValidationErrors.INCORRECT_DATES.key]=$.i18n.t(n.SearchStateModel.ValidationErrors.INCORRECT_DATES.message)),r};n.SearchStateModel.ValidationErrors={EMPTY_PLACE:{key:"empty_place",message:"search.errors.select-origin-and-destination",isValidationError:!0,weight:900},SAME_PLACE:{key:"same_place",message:"search.errors.same-places",isValidationError:!0,weight:800},MAX_8_PASSENGERS:{key:"max_8_passengers",message:"search.errors.max-9-passengers",isValidationError:!1,weight:700},TOO_MANY_INFANTS:{key:"too_many_infants",message:"search.errors.number-of-infants-higher-number-of-adults",isValidationError:!1,weight:300},INCORRECT_DATES:{key:"incorrect_dates",message:"search.errors.incorrect-dates",isValidationError:!0,weight:200}}});App.module("Flights.SearchForm",function(n,t){n.CabinClassDropdownView=t.Views.DropdownView.extend({headerView:t.Views.DefaultDropdownHeaderView.extend({template:"#cabinclass-dropdown-header-template"}),childView:t.Views.DefaultDropdownItemView.extend({template:"#cabinclass-dropdown-list-item-template"}),behaviors:{DropdownKeysControl:{}}})});App.module("Flights.SearchForm",function(n,t,i,r){n.DateFormView=r.View.extend({_bindEvents:function(){this.departView.on("set",_.bind(function(n,i){var r=this.returnView.getValue(),u=this.returnView.getSelectObject();r!==""&&n!==""&&i.pick>u.pick?(r=n,this.returnView.setValue(i),this.model.set({outbounddate:n,inbounddate:r})):this.model.set({outbounddate:n});r===""&&this.returnView.setHighlightedDate(t.Utils.Date.addDay(n));this.trigger("change",this.model.attributes)},this));this.returnView.on("set",_.bind(function(n,i){this.model.get("inbounddate")===""&&t.tracking.trackEvent("home","TripType","Return");var r=this.departView.getValue(),u=this.departView.getSelectObject();r!==""&&n!==""&&u.pick>i.pick?(r=n,this.departView.setValue(i),this.model.set({outbounddate:r,inbounddate:n})):this.model.set({inbounddate:n});n===""&&this.returnView.setHighlightedDate(t.Utils.Date.addDay(r));this.trigger("change",this.model.attributes)},this));this.model.get("outbounddate")&&this.departView.setValue(this.model.get("outbounddate"));this.model.get("inbounddate")&&this.returnView.setValue(this.model.get("inbounddate"))},_initializeViews:function(){var n=this;this.departView=new t.Views.DatePickerView({el:".js-search-date-depart",pickadateContainer:function(){return t.Utils.Ui.isMobileView()&&!t.Utils.Ui.isWidget()?".js-datedepart-dialog":".js-search-date-depart"},type:"depart",getPointOfReference:function(){return t.Utils.Date.today()}});this.departView.model.on("change:buttonTitle",function(t){n.trigger("setButtonTitle",t.get("buttonTitle"))});this.departView.on("block:form",this.onBlockForm,this);this.departView.on("unblock:form",this.onUnblockForm,this);this.returnView=new t.Views.DatePickerView({el:".js-search-date-return",pickadateContainer:function(){return t.Utils.Ui.isMobileView()&&!t.Utils.Ui.isWidget()?".js-datereturn-dialog":".js-search-date-return"},type:"return",getPointOfReference:_.bind(function(){return this.departView.getValue()||t.Utils.Date.today()},this)});this.returnView.model.on("change:buttonTitle",function(t){n.trigger("setButtonTitle",t.get("buttonTitle"))});this.returnView.on("block:form",this.onBlockForm,this);this.returnView.on("unblock:form",this.onUnblockForm,this)},onBlockForm:function(){this.trigger("block:form")},onUnblockForm:function(){this.trigger("unblock:form")},close:function(){this.departView.picker.close(!1);this.returnView.picker.close(!1)},initialize:function(n){this.model=new i.Model;this.model.set("inbounddate",n.inbounddate);this.model.set("outbounddate",n.outbounddate);this._initializeViews();this._bindEvents()}})});App.module("Flights.SearchForm",function(n,t){n.PaxDropdownView=t.Views.DropdownView.extend({headerView:t.Views.DefaultDropdownHeaderView.extend({template:"#pax-dropdown-header-template"}),childView:t.Views.DefaultDropdownItemView.extend({template:"#pax-dropdown-list-item-template"}),behaviors:{DropdownKeysControl:{}}})});App.module("Flights.SearchForm",function(n,t,i){n.PeopleSelectorView=i.Marionette.View.extend({views:{adultsView:null,childrenView:null,infantsView:null},ui:{adultsViewContainer:".js-people-selector__adults",childrenViewContainer:".js-people-selector__children",infantsViewContainer:".js-people-selector__infants"},_initializeAdultsView:function(){var r=new i.Collection(_.without(t.Dictionaries.PaxCount,_.findWhere(t.Dictionaries.PaxCount,{value:0}))),u=r.find(_.bind(function(n){return n.get("value")===this.model.get("adults")},this))||r.first();u.set("icon","ss-icon-adult");this.views.adultsView=new n.PaxDropdownView({model:u,collection:r,tabindex:1,ariaLabel:$.t("aria.search.pax-adults")});this.ui.adultsViewContainer.html(this.views.adultsView.render().$el);this.model.on("change:adults",_.bind(function(n){n.get("adults")!==this.views.adultsView.model.get("value")&&this.views.adultsView.select(r.find(function(t){return t.get("value")===n.get("adults")}))},this));this.views.adultsView.on("change",_.bind(function(n){t.tracking.trackEvent("home","PaxChoice","Adult_"+n.value);this.model.set("adults",n.value)},this))},_initializeChildrenView:function(){var r=new i.Collection(t.Dictionaries.PaxCount),u=r.find(_.bind(function(n){return n.get("value")===this.model.get("children")},this))||r.first();u.set("icon","ss-icon-teen");this.views.childrenView=new n.PaxDropdownView({model:u,collection:r,tabindex:1,ariaLabel:$.t("aria.search.pax-children")});this.ui.childrenViewContainer.html(this.views.childrenView.render().$el);this.model.on("change:children",_.bind(function(n){n.get("children")!==this.views.childrenView.model.get("value")&&this.views.childrenView.select(r.find(function(t){return t.get("value")===n.get("children")}))},this));this.views.childrenView.on("change",_.bind(function(n){t.tracking.trackEvent("home","PaxChoice","Child_"+n.value);this.model.set("children",n.value)},this))},_initializeInfantsView:function(){var r=new i.Collection(t.Dictionaries.PaxCount),u=r.find(_.bind(function(n){return n.get("value")===this.model.get("infants")},this))||r.first();u.set("icon","ss-icon-child");this.views.infantsView=new n.PaxDropdownView({model:u,collection:r,tabindex:1,ariaLabel:$.t("aria.search.pax-infants")});this.ui.infantsViewContainer.html(this.views.infantsView.render().$el);this.model.on("change:infants",_.bind(function(n){n.get("infants")!==this.views.infantsView.model.get("value")&&this.views.infantsView.select(r.find(function(t){return t.get("value")===n.get("infants")}))},this));this.views.infantsView.on("change",_.bind(function(n){t.tracking.trackEvent("home","PaxChoice","Infant_"+n.value);this.model.set("infants",n.value)},this))},initialize:function(n){this.setElement(n.el);this.bindUIElements();this.model=new i.Model({adults:1,children:0,infants:0});this.model.set(n.provider());this._initializeAdultsView();this._initializeChildrenView();this._initializeInfantsView();this.model.on("change",function(t){n.resolver(t.attributes)});this.on("update",_.bind(function(){this.model.set(n.provider())},this))}})});App.module("Flights.SearchForm",function(n,t,i,r){var u=function(n){return n?n.replace("-"+t.Dictionaries.LocationSchema,""):n},f=function(n){return n?(n=t.Utils.Location.getPlainPlaceId(n),n.length>3?$.i18n.t("search.place.any-airport"):n):n};n.PlaceModel=i.Model.extend({defaults:function(){return{PlaceName:"",PlaceId:"",CityId:"",CountryId:"",CountryName:"",ShowPlaceId:"",Active:!1,HasParent:!1}},initialize:function(){this.set("PlaceId",u(this.get("PlaceId")));this.set("CityId",u(this.get("CityId")));this.set("CountryId",u(this.get("CountryId")));this.set("ShowPlaceId",f(this.get("PlaceId")))}});n.PlacesCollection=i.Collection.extend({model:n.PlaceModel});n.PlaceItemView=r.ItemView.extend({tagName:"li",className:"dropdown-item",template:"#autocomplete-place-item-template",events:{mousedown:function(n){return n.stopImmediatePropagation(),this._select(n),!1},click:function(n){return n.stopImmediatePropagation(),this._select(n),!1}},modelEvents:{select:"_select","change:Active":"_onActiveChange"},_onActiveChange:function(){this.model.get("Active")===!0?this.$el.addClass("active"):this.$el.removeClass("active")},_select:function(){this.trigger("item:select",{PlaceName:this.model.get("PlaceName"),PlaceId:this.model.get("PlaceId"),CityId:this.model.get("CityId"),CountryId:this.model.get("CountryId"),CountryName:this.model.get("CountryName"),ShowPlaceId:this.model.get("ShowPlaceId")})},onRender:function(){this.model.get("HasParent")===!0&&this.$el.addClass("indent")},initialize:function(){}});n.PlaceListView=r.CompositeView.extend({template:"#autocomplete-place-template",childView:n.PlaceItemView,childViewContainer:"ul",ui:{input:"input",placeId:".js-placeid",list:".js-dropdown-items",loading:".js-loading",notFound:".js-not-found",cover:".js-autocomplete-place-cover"},behaviors:{ViewUnwrap:{},PlaceSelectorTracking:{}},events:{"input @ui.input":"onInput","textchange @ui.input":"onInput","blur @ui.input":"onInputBlur","focus @ui.input":"onInputFocus","keydown @ui.input":"onInputKeydown","keyup @ui.input":"onInputKeyup","mousedown @ui.notFound":"onNotFoundClick","click @ui.cover":"onCoverClick","mousedown @ui.cover":"onCoverMousedown","focus @ui.cover":"onCoverMousedown","mouseup @ui.input":function(n){n.preventDefault();this._globalClickPropagation(n)},click:function(n){this.ui.input.focus();this._globalClickPropagation(n)}},onFocusOut:function(){setTimeout(_.bind(function(){this.ui.input.blur()},this),500)},_globalClickPropagation:function(n){t.GlobalEvents.trigger("global:click",n)},childEvents:{"item:select":"onItemSelect"},getValue:function(){return{PlaceName:this.model.get("PlaceName"),PlaceId:this.model.get("PlaceId"),CityId:this.model.get("CityId")}},setValue:function(n){this.select(u(n.PlaceId),n.PlaceName,f(n.PlaceId),u(n.CityId),"","")},showPlaces:function(n){var t=_.pluck(_.filter(n,function(n){return n.CityId===n.PlaceId}),"PlaceId");_.each(n,function(n){n.HasParent=_.contains(t,n.CityId)&&n.CityId!==n.PlaceId});this.collection.reset(n);this.moveCursor(1);this.toggleLoading(!1);this.ui.list.addClass("active")},hideDropdown:function(n){this.trigger("hide:dropdown");var i=t.Utils.Ui.isMobileView()?t.Utils.Ui.isFirefox()?500:300:1;setTimeout(_.bind(function(){this.collection.reset();n||this.ui.notFound.hide();this.toggleLoading(!1);this.ui.list.removeClass("active")},this),i)},onCoverMousedown:function(n){n.preventDefault();n.stopImmediatePropagation();this._globalClickPropagation(n);this.$el.addClass("active");this.ui.input.trigger("focus")},onCoverClick:function(n){n.preventDefault();n.stopImmediatePropagation();this._globalClickPropagation(n);this.$el.addClass("active");this.ui.input.trigger("focus")},onNotFoundClick:function(){return this.ui.input.val("").focus(),this.hideDropdown(),this.ui.notFound.hide(),!1},onItemSelect:function(n,t){return this.select(t.PlaceId,t.PlaceName,t.ShowPlaceId,t.CityId,t.CountryId,t.CountryName),!0},select:function(n,t,i,r,u,f){var e,o,s;return this.blurTimeout&&(clearTimeout(this.blurTimeout),delete this.blurTimeout),this.model.get("PlaceId")!==n&&this.model.get("PlaceId")!==""&&(e=this.ui.input.val(),o=this.collection.indexOf(_.find(this.collection.models,function(t){return t.get("PlaceId")===n})),this.triggerMethod("TrackChange",{placeValue:e,placeId:n,itemIndex:o})),this.model.set({PlaceName:t,PlaceId:n,CityId:r,CountryId:u,CountryName:f}),s=t?t+" <span class='place-selector__cover-id'>("+i+")<span>":this.options.placeholder,this.ui.cover.html(s),this.ui.input.val(t),this.ui.input.data("prev",t),this.trackEvent=!1,this.hideDropdown(),!0},onInputBlur:function(){this.trigger("blur:input");var n=t.Utils.Ui.isMobileView()?t.Utils.Ui.isFirefox()?600:400:this._asDropdown?300:100;this.blurTimeout=setTimeout(_.bind(function(){if(this._scrolling){this._scrolling=!1;this.ui.input.focus();return}if(this.$el.removeClass("active"),this.hasBeenChanged){if(this.ui.input.val()==="")this.setDefault();else{var n=this.getSelectedModel();n?this.select(n.get("PlaceId"),n.get("PlaceName"),n.get("ShowPlaceId"),n.get("CityId"),n.get("CountryId"),n.get("CountryName")):(this.trackEvent&&(this.triggerMethod("TrackChange",{placeValue:this.ui.input.val()}),this.trackEvent=!1),this.setDefault())}this.hasBeenChanged=!1}this.$el.parent().removeClass("active")},this),n)},setDefault:function(){this.ui.input.val(this.model.get("PlaceName"));this.hideDropdown()},clear:function(){this.model.set({PlaceId:"",PlaceName:"",CityId:""});this.ui.input.val("");this.ui.cover.html(this.options.placeholder);this.hideDropdown()},onEnter:function(){var n=this.getSelectedModel();return n?(n.trigger("select"),n.set("Active",!1)):this.setDefault(),this.hideDropdown(),!0},getSelectedModel:function(){if(this.collection.length>0){var n=_.find(this.collection.models,function(n){return n.get("Active")===!0});return n?n:null}return null},moveCursor:function(n){var r,i,t;return this.collection.length>0&&(r=this.getSelectedModel(),i=null,r?(r.set("Active",!1),t=this.collection.indexOf(r),t=t===0&&n<0?this.collection.length-1:t===this.collection.length-1&&n===1?0:t+n,i=this.collection.at(t),i.set("Active",!0)):(i=this.collection.models[0],i.set("Active",!0))),!1},onInputKeydown:function(n){if(_.contains(["13","27","38","40"],n.keyCode.toString())){n.preventDefault();n.stopPropagation();switch(n.keyCode){case 13:return this.onEnter();case 27:return this.setDefault();case 38:return this.moveCursor(-1);case 40:return this.moveCursor(1)}}return n.keyCode===8&&(this.hasBeenChanged=!0),n.keyCode===9&&(this.hasBeenChanged=!0),this.ui.input.data("prev",this.ui.input.val()),!0},onChangeSelection:function(){this.$el.addClass("active");this.$el.parent().addClass("active");setTimeout(_.bind(function(){this.ui.input.select()},this),200)},onInputFocus:function(){this.trigger("focus:input");this.$el.addClass("active");this.ui.input.get(0).setSelectionRange?this.ui.input.get(0).setSelectionRange(0,9999):this.ui.input.select();this.selectedInput=!0;this.ui.loading.hasClass("js-spin-activated")===!1&&(this.spinner=t.Utils.Spin(this.ui.loading),this.ui.loading.addClass("js-spin-activated"));this.$el.parent().addClass("active");var n=this.trimQuery(this.ui.input.val());!n.length&&this.model.get("locationsAsDropdown")&&this.onInput()},onInputKeyup:function(n){if(!_.contains(["13","27","38","40"],n.keyCode.toString())&&(this.ui.input.data("prev",this.ui.input.val()),(t.Utils.Ui.isWidget()&&t.Utils.Ui.isIE8()||this.model.get("locationsAsDropdown")&&(t.Utils.Ui.isIE9()||t.Utils.Ui.isIE8()))&&this.onInput(),window.ltIE9))this.onInput(!0)},trimQuery:function(n){var t=n.replace(/^[\s\uFEFF\xA0]+/g,"");return t.replace(/[\s\uFEFF\xA0]+$/g," ")},onInput:function(){if(this.trigger("change:input"),this.timer&&clearTimeout(this.timer),this.ui.input.data("dropdown-open")!==1){this.selectedInput&&(t.Utils.Ui.isMobileView()||t.Utils.Ui.isTabletView())&&(this.ui.input.val(this.ui.input.val().charAt(0)),this.selectedInput=!1);this.trackEvent=!0;this.hasBeenChanged=!0;var n=this.trimQuery(this.ui.input.val());return n.length<2&&!this.model.get("locationsAsDropdown")?(this.hideDropdown(),!1):(this.toggleLoading(!0),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(_.bind(function(){var i=++this.lastRequestId;this.model.get("locationsAsDropdown")&&!n.length?t.Services.PlacesApi.getPlacesByIds(this.getPredefinedAvailablePlaces()).done(_.bind(function(n){if(i===this.lastRequestId){this._asDropdown=!0;this.onGetPlaces(n)}},this)):t.Services.PlacesApi.getAutoSuggestPlaces(n).done(_.bind(function(t){var f,r,e;if(i===this.lastRequestId&&(this._asDropdown=!1,f=this.trimQuery(this.ui.input.val()),f.trim()===n.trim())){if(r=this.getPredefinedAvailablePlaces(),r){e=_.filter(t.Places,function(n){return _.contains(r,u(n.PlaceId))});this.onGetPlaces({Places:e});return}this.onGetPlaces(t)}},this))},this),100),!1)}},onGetPlaces:function(n){n.Places.length>0?(this.ui.notFound.hide(),this.showPlaces(n.Places)):(this.hideDropdown(!0),this.ui.notFound.show())},getPredefinedAvailablePlaces:function(){if(t.Utils.RoutesFilter.hasPredefinedRoutes()){if(this.options.type==="origin")return t.Utils.RoutesFilter.getOrigins();if(this.options.type==="destination"){var n=this.options.originplaceView&&this.options.originplaceView.getValue().PlaceId;return t.Utils.RoutesFilter.getDestinations(u(n))}}return null},toggleLoading:function(n){n?this.ui.loading.show():this.ui.loading.hide()},onRender:function(){if(this.ui.input.data("dropdown-open",1),this.$el.i18n(),setTimeout(_.bind(function(){this.ui.input.data("dropdown-open",0)},this),10),this.model.get("PlaceId")!==""&&this.select(this.model.get("PlaceId"),this.model.get("PlaceName"),f(this.model.get("PlaceId")),this.model.get("CityId"),this.model.get("CountryId"),this.model.get("CountryName")),t.Utils.Ui.isWinPhone()&&(this.ui.input.addClass("needsclick"),this.ui.cover.addClass("needsclick")),!t.Utils.Ui.isMobileView())this.ui.list.on("scroll",_.bind(function(){this._scrolling=!0;setTimeout(_.bind(function(){this._scrolling=!1},this),500)},this))},onGlobalClick:function(n){if(n&&n.target){var i=$(n.target);i.parents(".js-place-selector").length||(this.hasBeenChanged=!0,!t.Utils.Ui.isFirefox()&&t.Utils.Ui.isMobileView()&&this.onInputBlur())}return!1},initialize:function(){this.model=new i.Model({PlaceName:"",PlaceId:"",CityId:"",CountryId:"",CountryName:"",locationsAsDropdown:t.Utils.RoutesFilter.locationsAsDropdown()});this.collection=new n.PlacesCollection;this.hasBeenChanged=!1;this.lastRequestId=0;this.options.placeholder=this.options.placeholder||$.i18n.t("search.place.placeholder");this.templateHelpers=this.templateHelpers||{};this.templateHelpers.placeholder=this.options.placeholder;t.GlobalEvents.on("global:click",this.onGlobalClick,this)}})});App.module("Flights.SearchForm",function(n,t,i){var r=Brace.Model.extend({namedAttributes:{errors:"object"}});n.SearchFormErrorView=i.Marionette.ItemView.extend({template:"#search-form-error-template",ui:{message:".js-search-form-error-message"},events:{click:function(){return this.hide(),!1}},behaviors:{ViewUnwrap:{}},hide:function(){this.$el.hide()},show:function(){this.$el.show()},initialize:function(n){this.model=new r({errors:n.errors});this.model.on("change:errors",this.render,this)}})});App.module("Flights.SearchForm",function(n,t,i,r){n.SearchFormView=r.ItemView.extend({model:t.Flights.Models.SearchStateModel,template:"#search-form-template",templateHelpers:{isLongTitles:function(){return t.Utils.Ui.isWidget()&&(t.Culture.culture.name==="tl-PH"||t.Culture.culture.name==="ru-RU")||t.Culture.locale==="tl-PH"||t.Culture.locale==="ru-RU"},showSwap:function(){return!t.Utils.RoutesFilter.hasPredefinedRoutes()}},ui:{peopleSelector:".js-people-selector",cabinClassSelector:".js-cabin-class-selector",originPlaceSelector:".js-originplace",destinationPlaceSelector:".js-destinationplace",whiteLabelSelector:".js-white-label-selector",error:".js-search-form-error",infoPanel:".js-search-info",shortLabel:".js-short-label",search:"#search",switchPlaces:".js-switch-places",searchButton:".js-search-button",poweredByLink:".js-powered-by"},events:{"click .js-switch-places":"swapPlaces","click @ui.searchButton":"onSearchButtonClick","keydown @ui.searchButton":"onSearchButtonKeyDown","click .js-search-overlay":"onOverlayClick","click @ui.poweredByLink":"onPoweredByClick"},modelEvents:{change:"_updateSearchLink"},behaviors:{ViewUnwrap:{}},_initializePlacesSelector:function(){this.originplaceView=new n.PlaceListView({type:"origin",trackingLabel:"Auto_Departure",placeholder:$.i18n.t("search.place.origin.placeholder")});this.destinationplaceView=new n.PlaceListView({type:"destination",trackingLabel:"Auto_Arrival",originplaceView:this.originplaceView,placeholder:$.i18n.t("search.place.destination.placeholder")});this.originplaceView.model.on("change",_.bind(function(n){this.model.set({originplaceText:n.get("PlaceName"),originplace:n.get("PlaceId"),originCityCode:n.get("CityId"),originCountryCode:n.get("CountryId"),originCountryName:n.get("CountryName")});this.checkDestinations()},this));this.model.on("change:originplace",_.bind(function(n){n.get("originplace")!==this.originplaceView.model.get("PlaceId")&&(this.originplaceView.setValue({PlaceId:n.get("originplace"),PlaceName:n.get("originplaceText"),CityId:n.get("originCityCode"),CountryId:n.get("originCountryCode"),CountryName:n.get("originCountryName")}),this.checkDestinations())},this));this.ui.originPlaceSelector.html(this.originplaceView.render().$el);this.destinationplaceView.model.on("change",_.bind(function(n){this.model.set({destinationplaceText:n.get("PlaceName"),destinationplace:n.get("PlaceId"),destinationCityCode:n.get("CityId"),destinationCountryCode:n.get("CountryId"),destinationCountryName:n.get("CountryName")})},this));this.model.on("change:destinationplace",_.bind(function(n){n.get("destinationplace")!==this.destinationplaceView.model.get("PlaceId")&&this.destinationplaceView.setValue({PlaceId:this.model.get("destinationplace"),PlaceName:this.model.get("destinationplaceText"),CityId:this.model.get("destinationCityCode"),CountryId:this.model.get("destinationCountryCode"),CountryName:this.model.get("destinationCountryName")})},this));this.ui.destinationPlaceSelector.html(this.destinationplaceView.render().$el);this.model.get("originplace")&&this.originplaceView.setValue({PlaceId:this.model.get("originplace"),PlaceName:this.model.get("originplaceText"),CityId:this.model.get("originCityCode"),CountryId:this.model.get("originCountryCode"),CountryName:this.model.get("originCountryName")});this.model.get("destinationplace")&&this.destinationplaceView.setValue({PlaceId:this.model.get("destinationplace"),PlaceName:this.model.get("destinationplaceText"),CityId:this.model.get("destinationCityCode"),CountryId:this.model.get("destinationCountryCode"),CountryName:this.model.get("destinationCountryName")});this.originplaceView.on("change:focus",_.bind(function(){this.destinationplaceView.triggerMethod("change:selection")},this));this.destinationplaceView.on("change:focus",_.bind(function(){this.originplaceView.triggerMethod("change:selection")},this))},checkDestinations:function(){if(t.Utils.RoutesFilter.hasPredefinedRoutes()){var n=t.Utils.RoutesFilter.getDestinations(this.model.get("originplace"));_.contains(n,this.model.get("destinationplace"))||this.destinationplaceView.clear()}},swapPlaces:function(n){var i=this.originplaceView.getValue(),r=this.destinationplaceView.getValue();n.preventDefault();this.ui.switchPlaces.toggleClass("rotate");t.tracking.trackEvent("home","Auto_DepartureArrival_Switch");this.originplaceView.setValue(r);this.destinationplaceView.setValue(i)},_initializeCabinClassSelector:function(){var f=this.model.get("cabinclass"),u=new i.Collection(t.Dictionaries.CabinClasses),e=u.find(function(n){return n.get("value")===f})||u.first(),r=new n.CabinClassDropdownView({model:e,collection:u,tabindex:1,ariaLabel:$.t("aria.search.cabinclass")});this.cabinClassSelector=r;r.on("change",_.bind(function(n){this.model.set("cabinclass",n.value);t.tracking.trackEvent("home","CabinClassChoice",n.value)},this));this.model.on("change:cabinclass",_.bind(function(n){n.get("cabinclass")!==r.model.get("value")&&r.select(u.find(function(t){return t.get("value")===n.get("cabinclass")}))},this));this.ui.cabinClassSelector.html(r.render().$el)},_initializePeopleSelector:function(){var t=new n.PeopleSelectorView({el:this.ui.peopleSelector,provider:_.bind(function(){return{adults:parseInt(this.model.get("adults"),10),children:parseInt(this.model.get("children"),10),infants:parseInt(this.model.get("infants"),10)}},this),resolver:_.bind(function(n){this.model.set({adults:n.adults,children:n.children,infants:n.infants})},this)});this.peopleSelector=t;this.model.on("change:adults",function(){t.trigger("update")});this.model.on("change:children",function(){t.trigger("update")});this.model.on("change:infants",function(){t.trigger("update")})},blockShareButtons:function(){this.mainSharingView&&(this.mainSharingView.hideHover(),this.mainSharingView.$el.hide())},resetShareButtons:function(n){if(this.mainSharingView){this.mainSharingView.$el.show();_.extend(n,{destinationCityCode:this.model.get("destinationCityCode")});this.mainSharingView.onResetShareButtons(n)}},onDestroy:function(){this.mainSharingView&&this.mainSharingView.destroy();this.peopleSelector&&this.peopleSelector.destroy();this.cabinClassSelector&&this.cabinClassSelector.destroy();this.originplaceView&&this.originplaceView.destroy();this.destinationplaceView&&this.destinationplaceView.destroy();this.whiteLabelSelectorView&&this.whiteLabelSelectorView.destroy();t.Utils.Ui.off("orientation:change",this.onOrientationChange,this)},renderMainSharing:function(n){this.mainSharingView&&this.mainSharingView.destroy();this.mainSharingView=new t.Sharing.MainSharingView(n);$("#js-main-sharing").html(this.mainSharingView.render().$el);this.mainSharingView.onResetShareButtons(n)},onDomRefresh:function(n){var t=this.model.get("country");t!=="CN"&&this.renderMainSharing(n)},onChangeDate:function(n,i){n&&this.model.set("outbounddate",n.format(t.Settings.dateFormat));i&&this.model.set("inbounddate",i.format(t.Settings.dateFormat))},onSearchButtonKeyDown:function(n){n.which===32&&(n.preventDefault(),this.ui.searchButton.click())},onSearchButtonClick:function(n){var r=this.model.toJSON(),i=t.Flights.Models.SearchStateModel.validate(r);_.isEmpty(i)?(t.Utils.Ui.deactivateValidationErrors(this.$el),t.Utils.Ui.isWidget()||(n.preventDefault(),this.ui.searchButton.blur(),this.trigger("search",this.model))):(n.preventDefault(),this._showErrors(i))},_updateSearchLink:function(){var n,i;this.ui.searchButton.attr("href",t.Utils.WhiteLabelLocation.getFlightsSearchPageUrl(_.pick(this.model.toJSON(),"originplace","destinationplace","outbounddate","inbounddate","cabinclass","adults","children","infants")));n="http://www.skyscanner.net";this.ui.poweredByLink.attr("href",n);i=this;t.Services.Session.getToken().done(function(r){n="http://partners.api.skyscanner.net/apiservices/referral/v1.0?UserCountry="+t.Services.HomeCity.getMarketSync()+"&UserCurrency="+t.Services.Currency.getCurrencySync()+"&UserLocale="+t.Services.Language.getLanguageSync()+"&apikey="+r;i.ui.poweredByLink.attr("href",n)})},_showErrors:function(n){this.$el.is(":visible")&&_.isObject(n)&&!_.isEmpty(n)&&(t.Utils.Ui.showValidationErrors(this.$el,n,t.Flights.Models.SearchStateModel.ValidationErrors),n.too_many_infants&&this.model.set("infants",this.model.get("adults")))},_initializeDateSelectors:function(){var t=this;setTimeout(function(){var i=new n.DateFormView({inbounddate:t.model.get("inbounddate"),outbounddate:t.model.get("outbounddate")});t.dateFormView=i;i.on("change",function(n){t.model.set({outbounddate:n.outbounddate,inbounddate:n.inbounddate})});i.on("setButtonTitle",function(n){t.model.set("dateButton",n)});i.on("block:form",t.onBlockForm,t);i.on("unblock:form",t.onUnblockForm,t);t.model.on("change:outbounddate",_.bind(function(n){var t=i.departView.getValue();n.get("outbounddate")!==t&&i.departView.setValue(n.get("outbounddate"))},t));t.model.on("change:inbounddate",_.bind(function(n){var t=i.returnView.getValue();n.get("inbounddate")!==t&&i.returnView.setValue(n.get("inbounddate"))},t))},10)},_initializeWhiteLabelSelector:function(n){this.whiteLabelSelectorView=new t.Views.WhiteLabelSelectorView({type:"flights",products:n});this.ui.whiteLabelSelector.html(this.whiteLabelSelectorView.render().$el)},_initializeShortLabel:function(){this.searchShortLabelView=new n.ShortLabelView({el:this.ui.shortLabel,model:new i.Model({flight:{}})});this.searchShortLabelView.on("show",_.bind(function(){this.ui.search.addClass("mobile-hide")},this));this.searchShortLabelView.on("hide",_.bind(function(){this.ui.search.removeClass("mobile-hide");this.originplaceView.triggerMethod("focus:out");this.destinationplaceView.triggerMethod("focus:out")},this))},onRender:function(){this.$el.i18n();this._initializeDateSelectors();this._initializePlacesSelector();this._initializeCabinClassSelector();this._initializePeopleSelector();this._initializeShortLabel();this._updateSearchLink();t.Settings.config.products&&t.Settings.config.products.length>0&&this._initializeWhiteLabelSelector(t.Settings.config.products);this._showErrors(this.options.errors);this.setScrollingTransformations()},onOrientationChange:function(){t.Utils.Ui.showValidationErrors(this.$el,this.options.errors,t.Flights.Models.SearchStateModel.ValidationErrors)},onBlockForm:function(){$(".js-search-form-overlay").addClass("show")},onUnblockForm:function(){$(".js-search-form-overlay").removeClass("show")},onHideShortlabel:function(){this.searchShortLabelView.hide()},onShowShortlabel:function(){this.searchShortLabelView.show(_.pick(this.model.toJSON(),"originplace","destinationplace","originplaceText","destinationplaceText","inbounddate","outbounddate"))},onShowErrors:function(n){this._showErrors(n)},setScrollingTransformations:function(){if(!t.Utils.Ui.isWidget()){this.$window=$(window);this.$container=$(".js-search-container-fluid");this.$window.off("resize.searchForm").on("resize.searchForm",_.bind(this.onWindowResize,this));this.onWindowResize();this.$window.off("scroll.searchForm").on("scroll.searchForm",_.bind(this.onWindowScroll,this))}},onWindowScroll:function(){var n=this.$container.hasClass("top-fixed");if(!this._isMobile&&t.Router.isResultsPage()){var i=this.$window.scrollTop(),u=t.Settings.config.showImageBanner?85:48,r=this.$container.offset().top+this.$container.outerHeight()-u;!n&&i>=r&&(this.cabinClassSelector&&this.cabinClassSelector.close(),this.dateFormView&&this.dateFormView.close(),this.originplaceView&&this.originplaceView.onInputBlur(),this.destinationplaceView&&this.destinationplaceView.onInputBlur(),this.$container.addClass("top-fixed"),t.Utils.Ui.trigger("search-container:toggle-top-fixed",!0));n&&i<r&&(this.$container.removeClass("top-fixed"),t.Utils.Ui.trigger("search-container:toggle-top-fixed",!1))}else n&&(this.$container.removeClass("top-fixed"),t.Utils.Ui.trigger("search-container:toggle-top-fixed",!1))},onWindowResize:function(){this._isMobile=t.Utils.Ui.isMobileView();this.onWindowScroll()},onOverlayClick:function(){var n=t.Settings.config.showImageBanner?-280:-210;$.scrollTo(this.$container,{duration:"500",over:"1",offset:{top:n}})},onPoweredByClick:function(){var n=this.ui.poweredByLink.attr("href");t.tracking.trackEvent("home","Logo_SearchPanel",n)},initialize:function(){t.Utils.Ui.on("orientation:change",this.onOrientationChange,this)}})});App.module("Flights.SearchForm",function(n,t,i,r){n.ShortLabelView=r.ItemView.extend({template:"#search-short-label-template",ui:{departCover:".js-label-depart-cover",returnCover:".js-label-return-cover",separator:".js-date-separator"},events:{click:function(){this.hide()}},wrapDate:function(n){var i={},u="",f="",e="",r="";return n&&(i=moment(n,t.Settings.dateFormat),u=i.get("year"),f=moment.monthsShort()[i.get("month")],e=moment.weekdaysShort()[i.format("d")],r=i.format("D"),r<10&&(r="0"+r.toString())),_.extend(i,{year:u,month:f,day:r,dayOfWeek:e}),i},show:function(n){n=_.extend(n,{formatted:{outbounddate:this.wrapDate(n.outbounddate),inbounddate:this.wrapDate(n.inbounddate)}});this.model.set("flight",n);this.render();this.$el.removeClass("mobile-hide").addClass("mobile-show");this.trigger("show")},hide:function(){this.$el.removeClass("mobile-show").addClass("mobile-hide");this.trigger("hide")},onRender:function(){this.model.get("flight").inbounddate||(this.ui.separator.hide(),this.ui.returnCover.hide());var n=null,i=this;_.each(["outbounddate","inbounddate"],function(r){var f;n=r==="outbounddate"?moment(i.model.get("flight").outbounddate,t.Settings.dateFormat):moment(i.model.get("flight").inbounddate,t.Settings.dateFormat);var e=n.get("year"),o=moment.monthsShort()[n.get("month")],s=moment.weekdaysShort()[n.format("d")],u=n.format("D");u<10&&(u="0"+u.toString());f="<span>"+s+" <strong> "+u+" "+o+"<\/strong> "+e+"<\/span>";r==="outbounddate"?i.ui.departCover.html(f):i.ui.returnCover.html(f)});this.$el.i18n()}})});App.WidgetTemplatesBase={whiteLabelSelectorTemplate:function(){return['<div class="search-tabs-box">',"<ul>",'<% if (_.contains(products, "flights")) { %>',"<li class=\"tab <% if (type === 'flights') { %> active <% } %>\">",'<a href="javascript:void(0);" data-tab="flights">','<i class="ss-icon-flights ss-icon"><\/i>','<span data-i18n="breadcrumbs.flights"><\/span>',"<\/a>","<\/li>","<% } %>",'<% if (_.contains(products, "hotels")) { %>',"<li class=\"tab <% if (type === 'hotels') { %> active <% } %>\">",'<a href="javascript:void(0);" data-tab="hotels">','<i class="ss-icon-hotels ss-icon"><\/i>','<span data-i18n="breadcrumbs.hotels"><\/span>',"<\/a>","<\/li>","<% } %>",'<% if (_.contains(products, "carhire")) { %>',"<li class=\"tab <% if (type === 'carhire') { %> active <% } %>\">",'<a href="javascript:void(0);" data-tab="carhire">','<i class="ss-icon-carhire ss-icon"><\/i>','<span data-i18n="breadcrumbs.carhire"><\/span>',"<\/a>","<\/li>","<% } %>","<\/ul>",'<div class="powered-by-search-top mobile-hide">',"<div>",'<a class="powered-by-logo js-powered-by" target="_blank" href="http://www.skyscanner.net"><span','data-i18n="search-result.proudly-powered-by" class="proudly-powered-by"><\/span> <span class="logo-img" alt="logo"> <\/span><\/a>',"<\/div>","<\/div>","<\/div>"].join("")},searchFormErrorTemplate:function(){return['<div class="search-error">','<i class="ss-icon-info ss-icon"><\/i>','<span class="js-search-form-error-message">',"<% _.each(errors, function(value, key) { %>","<div><%= value %><\/div>","<% }); %>","<\/span>","<\/div>"].join("")},dropdownTemplate:function(){return'<div class="dropdown">'+"<% if (label) { %>"+'<span class="dropdown-label js-dropdown-label"><%= label %><\/span>'+"<% } %>"+'<button class="button-reset js-dropdown-toggle js-header-container dropdown-toggle" tabindex="<%= tabindex %>" data-toggle="dropdown" role="button" aria-expanded="false" <% if (typeof(ariaLabel) !== "undefined") { %> aria-label="<%= ariaLabel %>"<% } %> ><\/button>'+'<div class="dropdown-items js-dropdown-container-wrapper"><ul class="js-dropdown-items-container dropdown-items-container"><\/ul><\/div><\/div>'},dateButtonTemplate:function(){return'<button class="btn-day picker__button--<%= item.key %>" type="button" aria-controls="<%= id %>" data-key="<%= item.key %>" data-days="<%=item.days%>">'+'<span data-i18n="search.datepicker.buttons.<%= item.key %>" class="caption"><\/span><br />'+"<span><%= day %> <%= month %><\/span><\/button>"},monthSelectorItemTemplate:function(){return'<li class="dropdown-item js-dropdown-item js-control-item">'+'<span data-value="<%= year %>-<%= month %>"><%= text %>, <%= year %><\/span>'+"<\/li>"},monthSelectorTemplate:function(){return'<span class="js-dropdown-toggle-name dropdown-accent"><%= text %>, <%= year %><\/span>'},accDatePickerTemplate:function(){return'<div class="acc-elements"><select class="acc-input" aria-label="" data-i18n="[aria-label]aria.search.acc.select.day" name="acc-days"> <option value="1">1<\/option> <option value="2">2<\/option> <option value="3">3<\/option> <option value="4">4<\/option> <option value="5">5<\/option> <option value="6">6<\/option> <option value="7">7<\/option> <option value="8">8<\/option> <option value="9">9<\/option> <option value="10">10<\/option> <option value="11">11<\/option> <option value="12">12<\/option> <option value="13">13<\/option> <option value="14">14<\/option> <option value="15">15<\/option> <option value="16">16<\/option> <option value="17">17<\/option> <option value="18">18<\/option> <option value="19">19<\/option> <option value="20">20<\/option> <option value="21">21<\/option> <option value="22">22<\/option> <option value="23">23<\/option> <option value="24">24<\/option> <option value="25">25<\/option> <option value="26">26<\/option> <option value="27">27<\/option> <option value="28">28<\/option> <option value="29">29<\/option> <option value="30">30<\/option> <option value="31">31<\/option> <\/select><select class="acc-input" aria-label="" data-i18n="[aria-label]aria.search.acc.select.month" name="acc-months"><\/select><select class="acc-input" aria-label="" data-i18n="[aria-label]aria.search.acc.select.year" name="acc-years"><\/select><div aria-live="assertive" aria-atomic="true" class="acc-error"><\/div><button class="acc-input acc-ok" aria-label="" data-i18n="aria.search.acc.button.ok"><\/button><\/div>'}};App.WidgetSearchFormBase={renderContainer:function(n,t){function u(n,t){var i=n.width();i>=992?t.$el.removeClass("tablet").removeClass("phone").addClass("desktop"):i<992&&i>=r?t.$el.removeClass("desktop").removeClass("phone").addClass("tablet"):t.$el.removeClass("desktop").removeClass("tablet").addClass("phone")}function f(n,t){var i=n.width();i>=r?t.$el.removeClass("desktop").removeClass("phone").addClass("tablet"):t.$el.removeClass("desktop").removeClass("tablet").addClass("phone")}var r=App.Settings.config.isMsn?924:768,e=$(n.container),i;if(e.length===0)throw new Error("Cannot find desired container for widget");else{e.html(t.render().$el);i=$(window);switch(n.type){case"large":n.responsive==="true"?(u(i,t),i.resize(_.bind(function(){u(i,t)},this))):t.$el.addClass("desktop");break;case"medium":App.Settings.responsive==="true"?(f(i,t),i.resize(_.bind(function(){f(i,t)},this))):t.$el.addClass("tablet");break;case"compact":t.$el.addClass("phone")}}}};App.module("Services",function(n,t,i,r,u){n.PlacesApi={getAutoSuggestPlaces:function(n){var i=new u.Deferred;return u.when(t.Services.Currency.getCurrency(),t.Services.Market.getMarket(),t.Services.Language.getLanguage()).done(function(r,f,e){var o=_.template("<%= url %>apiservices/xd/autosuggest/v1.0/"+"<%= country %>/"+"<%= currency %>/"+"<%= locale %>/"+"?includeAirports=true&includeCities=true&includeCountries=false&query=<%= query %>",{url:t.Settings.skyApiUrl,country:f,currency:r,locale:e,query:encodeURIComponent(n)});u.ajax({url:o,type:"get",dataType:"jsonp"}).done(function(n){i.resolve(n)}).fail(function(){Logger("api-service").error(_.template("Can't obtain data from <%= url %>",{url:o}));i.reject()})}).fail(function(){i.reject()}),i.promise()},getPlaceById:function(n,i){i=i||{};var r=new u.Deferred;return u.when(function(){return i.currency?(new u.Deferred).resolve(i.currency):t.Services.Currency.getCurrency()}(),function(){return i.market?(new u.Deferred).resolve(i.market):t.Services.Market.getMarket()}(),function(){return i.locale?(new u.Deferred).resolve(i.locale):t.Services.Language.getLanguage()}()).then(function(i,f,e){var o=["<%= url %>apiservices/xd/autosuggest/v1.0/<%= country %>/<%= currency %>/","<%= locale %>/?includeAirports=true&includeCities=true&includeCountries=false&id=<%= id %>"],s;o[0]=_.template(o[0],{url:t.Settings.skyApiUrl,country:f,currency:i});o[1]=_.template(o[1],{locale:e,id:n});s=o.join("");u.ajax({url:s,type:"get",dataType:"jsonp"}).done(function(n){n.Places&&n.Places.length>0?r.resolve(n.Places[0]):(Logger("api-service").error(_.template("Received unexpected data structure from <%= url %>. Received object: <%= data %>",{url:s,data:JSON.stringify(n)})),r.reject())}).fail(function(){Logger("api-service").error(_.template("Can't obtain data from <%= url %>",{url:s}));r.reject()})}),r.promise()},getPlacesByIds:function(i){var r=new u.Deferred,f=function(n){r.resolve(n)};return u.when(t.Services.Currency.getCurrency(),t.Services.Market.getMarket(),t.Services.Language.getLanguage()).done(function(t,r,u){var l=i.length,e=0,o={},a,s,h,c;for(o.Places=[],a=(new Date).getTime(),c=0;c<l;c++)n.PlacesApi.getPlaceById(i[c],{currency:t,market:r,locale:u}).done(function(n){n&&o.Places.push(n);e++;e>=l&&(f(o),s=(new Date).getTime(),h=s-a,console.log("Process data is done. Spent "+h+"ms"))}).fail(function(){e++;e>=l&&(f(o),s=(new Date).getTime(),h=s-a,console.log("Process data is done. Spent "+h+"ms"))})}),r.promise()}}});App.WidgetTemplates=function(){function n(){return['<div id="ss-wl-search-widget" style="min-height: 185px; visibility: hidden"> <!--[if lte IE 9]> <div class="ie9"> <![endif]-->','<div class="its-a-widget">','<section id="search-wrapper" class="search-wrapper container" role="search">','<div class="js-search-form-error"><\/div>','<div class="js-white-label-selector"><\/div>','<div class="clearfix"><\/div>','<div class="fixed-overlay js-search-overlay"><\/div>','<div class="js-search-info"><\/div>','<div class="js-short-label mobile-show"><\/div>','<div id="search" class="container-search flights-search-control">','<div class="places-control">','<div class="js-context-error context-error empty-place-error js-error-empty_place" data-i18n="search.errors.select-origin-and-destination"><\/div>','<div class="js-context-error context-error same-place-error js-error-same_place" data-i18n="search.errors.same-places"><\/div>','<div class="js-originplace field-box flex"><\/div>','<div class="js-destinationplace field-box flex"><\/div>',"<% if (showSwap()) { %>",'<button class="js-switch-places btn-switch btn-reset" tabindex="1" data-i18n="[aria-label]aria.search.swap" aria-label="Swap origin and destination">','<span class="ss-icon ss-icon-swap"><\/span>',"<\/button>","<% } %>","<\/div>",'<div class="dates-control">','<div class="js-context-error context-error dates-error js-error-incorrect_dates" data-i18n="search.errors.incorrect-dates"><\/div>','<div id="search-date-depart" class="js-search-date-depart search-date field-box">','<div class="field-cover-bg">','<div class="date-caption field-box__caption" data-i18n="search.datepicker.headers.depart"><\/div>','<input id="date-depart" class="search-date-depart" data-date="" type="text" tabindex="-1" />','<button aria-describedby="BtnDescHelp" tabindex="1" class="search-date-cover" data-label="" data-i18n="[data-label]search.datepicker.headers.depart"><\/button>',"<\/div>","<\/div>",'<div id="search-date-return" class="js-search-date-return search-date field-box inactive">','<div class="field-cover-bg">','<div class="date-caption field-box__caption" data-i18n="search.datepicker.headers.return"><\/div>','<div class="date-caption field-box__caption inactive" data-i18n="search.datepicker.headers.add-return"><\/div>','<input id="date-return" class="search-date-return" data-date="" type="text" data-active="false" tabindex="-1" />','<button aria-describedby="BtnDescHelp" tabindex="1" class="search-date-cover" data-label="" data-i18n="[data-label]search.datepicker.headers.return">','<span class="offscreen" data-i18n="aria.search.addreturn"><\/span><div class="ss-icon-plus ss-icon"><\/div>',"<\/button>",'<button class="btn-close return-btn-close-wrapper js-button-clear" tabindex="1" data-i18n="[aria-label]aria.search.clear" aria-label="One way only"><i class="ss-icon-close ss-icon"><\/i><\/button>',"<\/div>","<\/div>",'<p id="BtnDescHelp" class="offscreen" data-i18n="aria.search.datehelper"><\/p>',"<\/div>",'<div id="people-and-class">','<div class="js-context-error context-error adults-error js-error-max_8_passengers" data-i18n="search.errors.max-9-passengers"><\/div>','<div class="people-selector field-box js-people-selector">','<div class="js-context-error context-error people-not-number-error js-error-people_count_should_be_number" data-i18n="search.errors.people-count-should-be-a-number"><\/div>','<div class="people-selector__item js-people-selector__adults first-child" data-i18n="[title]search.title.adults-pax"><\/div> ','<div class="people-selector__item js-people-selector__children" data-i18n="[title]search.title.children-pax"><\/div> ','<div class="js-context-error context-error too-many-infants-error js-error-too_many_infants" data-i18n="search.errors.number-of-infants-higher-number-of-adults"><\/div>','<div class="people-selector__item js-people-selector__infants last-child" data-i18n="[title]search.title.infants-pax"><\/div>',"<\/div>",'<div class="js-context-error context-error cabin-class-error js-error-incorrect_cabin_class" data-i18n="search.errors.incorrect-cabin-class"><\/div>','<div id="service-class" class="field-box js-cabin-class-selector">',"<\/div>","<\/div>",'<a href="#" role="button" class="field-box search-button js-search-button" tabindex="1" data-i18n="[aria-label]aria.search.search" aria-label="Search">','<span class="ss-icon ss-icon-search"><\/span>',"<\/a>",'<div class="powered-by-search-bottom hide mobile-show">',"<div>",'<a class="powered-by-logo js-powered-by" target="_blank" href="http://www.skyscanner.net">','<span data-i18n="search-result.proudly-powered-by"><\/span>','<span class="logo-img" alt="logo"><\/span>',"<\/a>","<\/div>","<\/div>","<\/div>","<\/section>","<\/div>","<!--[if lte IE 9]> <\/div> <![endif]-->","<\/div>"].join("")}function t(){return['<div class="place-selector js-place-selector">','<div class="place-selector__root clearfix">','<a href="#" tabindex="1" class="place-selector__cover text-ellipsis js-autocomplete-place-cover"><%= placeholder %><\/a>','<div class="place-selector__content">','<input tabindex="1" class="place-selector__input js-place-input" size="1" type="text" placeholder="<%= placeholder %>" autocomplete="off" value="<%= PlaceName %>" />','<div class="place-selector__loading-spinner js-loading" style="display: none;"><\/div>','<div class="place-selector__dropdown dropdown">','<div class="place-selector__not-found js-not-found" style="display: none;">','<div data-i18n="search.place.not-found"><\/div>',"<\/div>",'<ul class="dropdown-items js-dropdown-items"><\/ul>',"<\/div>","<\/div>","<\/div>","<\/div>"].join("")}function i(){return'<span class="place-name"><%= PlaceName %><\/span><span class="place-id"><%= ShowPlaceId %><\/span>'}function r(){return'<div class="dropdown-item js-dropdown-item js-control-item"><%= value %><\/div>'}function u(){return'<span class="js-dropdown-toggle-name"><%= value %><\/span><b class="ss-icon ss-icon-triangle-down"><\/b><b class="ss-icon ss-icon-triangle-up"><\/b>'}function f(){return'<span class="js-dropdown-toggle-name" data-i18n="<%= name %>"><\/span> <b class="ss-icon ss-icon-triangle-down"><\/b><b class="ss-icon ss-icon-triangle-up"><\/b>'}function e(){return"<li>"+'<a href role="menuitem" class="dropdown-item js-dropdown-item js-control-item" data-value="<%= value %>" data-i18n="<%= name %>"><\/a>'+"<\/li>"}function o(){return'<i class="ss-icon pax-icon <%= icon %>"><\/i> '+'<span class="js-dropdown-toggle-name"><%= name %><\/span> '+'<b class="ss-icon ss-icon-triangle-down"><\/b><b class="ss-icon ss-icon-triangle-up"><\/b>'}function s(){return"<li>"+'<a href role="menuitem" class="dropdown-item js-dropdown-item js-control-item" data-value="<%= value %>"><%= name %><\/a>'+"<\/li>"}return{get:function(h){switch(h){case"#search-form-template":return n();case"#autocomplete-place-template":return t();case"#autocomplete-place-item-template":return i();case"#dropdown-template":return App.WidgetTemplatesBase.dropdownTemplate();case"#dropdown-item-template":return r();case"#dropdown-header-template":return u();case"#cabinclass-dropdown-header-template":return f();case"#cabinclass-dropdown-list-item-template":return e();case"#date-button-template":return App.WidgetTemplatesBase.dateButtonTemplate();case"#month-selector-item-template":return App.WidgetTemplatesBase.monthSelectorItemTemplate();case"#month-selector-template":return App.WidgetTemplatesBase.monthSelectorTemplate();case"#pax-dropdown-header-template":return o();case"#pax-dropdown-list-item-template":return s();case"#search-form-error-template":return App.WidgetTemplatesBase.searchFormErrorTemplate();case"#white-label-selector-template":return App.WidgetTemplatesBase.whiteLabelSelectorTemplate();case"#acc-datepicker-template":return App.WidgetTemplatesBase.accDatePickerTemplate();default:throw new Error("Template "+h+" is not supported");}}}}();App.module("Flights.SearchState",function(n,t){n.Provider={place:function(n){var i=new $.Deferred,r=function(n){var i=new $.Deferred,r={PlaceId:"",PlaceName:"",CityId:"",CountryId:"",CountryName:""};return n?t.Services.PlacesApi.getPlaceById(n).done(function(n){i.resolve({PlaceId:n.PlaceId,PlaceName:n.PlaceName,CityId:n.CityId?n.CityId.replace("-"+t.Dictionaries.LocationSchema,""):n.PlaceId,CountryId:n.CountryId?n.CountryId.replace("-"+t.Dictionaries.LocationSchema,""):"",CountryName:n.CountryName?n.CountryName:""})}).fail(function(){i.resolve(r)}):i.resolve(r),i.promise()};return t.Utils.RoutesFilter.isAvailiableOrigin(n.originplace)||(n.originplace=""),t.Utils.RoutesFilter.isAvailiableDestination(n.originplace,n.destinationplace)||(n.destinationplace=""),$.when(r(n.originplace),r(n.destinationplace)).done(_.bind(function(t,r){t.PlaceId!==""&&(n.originplaceText=t.PlaceName,n.originplaceCityCode=t.CityId,n.originCountryCode=t.CountryId,n.originCountryName=t.CountryName);r.PlaceId!==""&&(n.destinationplaceText=r.PlaceName,n.destinationCityCode=r.CityId,n.destinationCountryCode=r.CountryId,n.destinationCountryName=r.CountryName);i.resolve(n)},this)),i.promise()}}});App.module("Flights.SearchForm",function(n,t){function r(n,r){t.WidgetSearchFormBase.renderContainer(t.Settings,new i({model:n,errors:r}));n.on("change",function(n){t.Utils.StateStorage.Flights.set(n.toJSON())})}var i=n.SearchFormView.extend({_updateSearchLink:function(){var n=_.pick(this.model.toJSON(),"originplace","destinationplace","outbounddate","inbounddate","cabinclass","adults","children","infants"),i={};t.Settings.currency&&!t.Settings.currencyHomeBased&&(n.currency=t.Settings.currency);t.Settings.homecity&&(n.homecity=t.Settings.homecity);t.Settings.mock_data&&(i.mock_data=t.Settings.mock_data);t.Settings.host&&(i.host=t.Settings.host);this.ui.searchButton.attr("href",t.Utils.WhiteLabelLocation.getFlightsSearchPageUrl(n,i));this.ui.searchButton.attr("target",t.Settings.newWindow?"_blank":"_self")}});n.on("start",function(){var i=t.Utils.StateStorage.Flights.get(),n=t.Settings;i=_.isEmpty(i)?{originplaceText:"",originplace:n.origin||"",destinationplaceText:"",destinationplace:n.destination||"",outbounddate:t.Utils.Date.getFriday(),inbounddate:"",country:n.market||"UK",currency:n.currency||"GBP",locale:n.language||"en-GB",locationSchema:"-sky",adults:1,children:0,infants:0,cabinclass:"Economy"}:i;n.origin&&(i.originplace=n.origin.toUpperCase(),i.originplaceText="");n.destination&&(i.destinationplace=n.destination.toUpperCase(),i.destinationplaceText="");var f=function(){var t=new $.Deferred,i=_.template("<%= url %>/clientip",{url:n.domain});return $.ajax({url:i,type:"GET",dataType:"jsonp",jsonp:"callback"}).done(function(n){n?t.resolve(n):t.reject()}).fail(function(){t.reject()}),t.promise()},e=function(){var i=new $.Deferred;return f().done(function(r){var u="<%= url %>apiservices/xd/autosuggest/v1.0/UK/GBP/"+"<%= locale %>/"+"?query=<%= ip %>-ip";t.Services.Language.getLanguage().done(function(t){var f=_.template(u,{url:n.skyApiUrl,locale:t,ip:r});$.ajax({url:f,type:"get",dataType:"jsonp"}).done(function(n){n.Places&&n.Places.length>0?i.resolve(n.Places[0]):i.reject()}).fail(function(){i.reject()})}).fail(function(){i.reject()})}).fail(function(){console.log("Error getting userIp");i.reject()}),i.promise()},u=function(n){t.Flights.SearchState.Provider.place(n).done(function(n){var i=t.Flights.Models.SearchStateModel.validate(n),u=new t.Flights.Models.SearchStateModel(n);r(u,i)}).fail(function(){console.log("Error getting destination")})};n.geoLocalization&&!n.origin?e().done(function(n){i.originplace=n.PlaceId;i.originplaceText=n.PlaceName;u(i)}).fail(function(){console.log("getOriginPlace failed")}):u(i)})});App.start();window._define_&&(window.define=window._define_,delete window._define_) })(window, jQuery);