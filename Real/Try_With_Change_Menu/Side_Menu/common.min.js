var ua=window.navigator.userAgent;

if(/Android/.test(ua)&&/Linux; U;/.test(ua)&&!/Chrome/.test(ua)&&($("html").addClass("androidbrowser"),$("#androidbrowser-alert").show()),/iPhone/.test(ua)){
ua.match(/iPhone OS (\w+){1,3}/g);
var osv=(RegExp.$1.replace(/_/g,"")+"00").slice(0,23);
800>osv&&$("html").addClass("iOS7")}
else if(/iPad/.test(ua)){ua.match(/CPU OS (\w+){1,3}/g);
var osv=(RegExp.$1.replace(/_/g,"")+"00").slice(0,3);800>osv&&$("html").addClass("iOS7")}

var initedMap=!1;
$(function(){
var s=[{name:"top","class":"is-top",fire:"toTop"},{name:"about","class":"is-about",fire:"toAbout"},{name:"works","class":"is-works",fire:"toWorks"},{name:"special","class":"is-special",fire:"toSpecial"},{name:"recruit","class":"is-recruit",fire:"toRecruit"},{name:"contact","class":"is-contact",fire:"toContact"}],l=s.length,d=0,c=l-1,u=0,f=0,m=736,p=$(" .menu-btn");
p.on({click:function(e){e.preventDefault();var i=p.attr("class");i.match(/is-open/)?(p.removeClass("menu-btn--is-open"),$(this).removeClass("menu-btn--is-open"),$(this).addClass("menu-btn--is-close"),$("html").removeClass("menu--open")):(p.addClass("menu-btn--is-open"),$(this).removeClass("menu-btn--is-close"),$(this).addClass("menu-btn--is-open"),$("html").addClass("menu--open"))}}),$("#main,nav .sp-only a").click(function(){p.hasClass("menu-btn--is-open")&&p.addClass("menu-btn--is-close").removeClass("menu-btn--is-open"),$("html").removeClass("menu--open")}),$.fn.removeis=function(){$("body").removeClass(function(e,i){return(i.match(/\bis-\S+/g)||[]).join(" ")})};

var v=1e3;
$(" .pc-only > li").off("click").on("click",function(e){e.preventDefault(),c=d,d=$(this).index();var i=s[d];$("body").removeis(),$("body").addClass(i["class"]+" is-moving"),setTimeout(function(){$("body").removeClass("is-moving")},v)}),$("#main .localNav > li").off("click").on("click",function(e){e.preventDefault();for(var i=0;l>i;++i){var n=s[i];if($(this).hasClass(n.fire)){c=d,d=i,$("body").removeis(),$("body").addClass(n["class"]+" is-moving"),setTimeout(function(){$("body").removeClass("is-moving")},v);break}}});

var h=$("#window"),w=h.children("article"),g=h.next(".closeBtn"),k=h.children(".window__about"),b=h.children(".window__works"),C=h.children(".window__special"),_=h.children(".window__recruit"),y=$("#stage"),x=y.children(".stage__about"),T=y.children(".stage__works"),q=y.children(".stage__special"),M=y.children(".stage__recruit");

$("#stage .more, #stage .works__image a").click(function(){h.addClass("window--is-open"),$("html").addClass("window--open")}),x.find(".more").click(function(){k.addClass("article--is-open"),initMap()}),T.find(".more, .works__image a").click(function(){b.addClass("article--is-open")}),q.find(".more").click(function(){C.addClass("article--is-open")}),M.find(".more").click(function(){_.addClass("article--is-open")}),h.add(g).click(function(){h.removeClass("window--is-open"),$("html").removeClass("window--open"),b.removeClass("works--is-detail"),setTimeout(function(){$("#works__list").fadeIn(400)},200),$(".backBtn").removeClass("is-show"),setTimeout(function(){w.removeClass("article--is-open")},400)}),w.click(function(e){e.stopPropagation()}),$("#works__list li").click(function(){b.addClass("works--is-detail"),$("#works__list").fadeOut(0),$(".backBtn").addClass("is-show")}),$(".backBtn").click(function(){b.removeClass("works--is-detail"),setTimeout(function(){$("#works__list").fadeIn(400)},200),$(".backBtn").removeClass("is-show")});});