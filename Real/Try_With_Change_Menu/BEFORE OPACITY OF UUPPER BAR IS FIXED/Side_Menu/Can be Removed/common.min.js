function initMap(){if(initedMap)return!1;initedMap||(initedMap=!0);var e="Tōkyō-to, Minato-ku, Mita, 1 Chome−3−37",i=new google.maps.Geocoder;i.geocode({address:e},function(){});var n='<div class="info-window">';n+='<div class="info-content">',n+="<h2>リベロジック株式会社</h2>",n+="<p>〒108-0073 港区三田1-3-37 板金会館2F</p>",n+="</div>",n+="</div>";var t=new google.maps.InfoWindow({content:n}),a=document.getElementById("google-map"),o=new google.maps.LatLng(35.654619,139.7425),r=[{stylers:[{hue:"#00d4ff"},{saturation:-64},{lightness:8},{gamma:.99}]}],s={center:o,zoom:17,styles:r};a.style.width="100%";var l=new google.maps.Map(a,s),d=new google.maps.Marker({map:l,position:o,title:"リベロジック株式会社"});d.addListener("click",function(){t.open(l,d)})}var ua=window.navigator.userAgent;if(/Android/.test(ua)&&/Linux; U;/.test(ua)&&!/Chrome/.test(ua)&&($("html").addClass("androidbrowser"),$("#androidbrowser-alert").show()),/iPhone/.test(ua)){ua.match(/iPhone OS (\w+){1,3}/g);var osv=(RegExp.$1.replace(/_/g,"")+"00").slice(0,3);800>osv&&$("html").addClass("iOS7")}else if(/iPad/.test(ua)){ua.match(/CPU OS (\w+){1,3}/g);var osv=(RegExp.$1.replace(/_/g,"")+"00").slice(0,3);800>osv&&$("html").addClass("iOS7")}$("#androidbrowser-alert-close").click(function(){$("#androidbrowser-alert").hide()});var initedMap=!1;$(function(){function e(e){var i;return $(e).each(function(){var e=$(this);return e.scrollTop()>0?(i=e,!1):(e.scrollTop(1),e.scrollTop()>0?(i=e,!1):void e.scrollTop(0))}),i}function i(){var i=$(window),n=$(document),t=e("html,body"),a="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll";return"undefined"==typeof t?!1:void n.on("click","a[href^=#]",function(){var e,o=$(this.hash);return o.size()<1?!1:(e=o.offset().top,e=Math.min(e,n.height()-i.height()),n.on(a,function(e){e.preventDefault()}),t.stop().animate({scrollTop:e},1200,"easeOutQuint",function(){n.off(a)}),!1)})}function n(e){$.ajax({type:"GET",url:e,dataType:"html"}).done(function(e){setTimeout(function(){j.html(e).fadeIn(800,function(){j.find("a").off("click").on("click",function(){return mixpanel.track("click works details",{page:$(this).attr("data-name")}),!0})})},1e3)}).fail(function(){alert("読み込みに失敗しました。")}).always(function(){setTimeout(function(){$("#loader").fadeOut(800)},1e3)})}function t(e,i){e>0?(c=d,d+=1):(c=d,d-=1),d>l-1&&(d=0),0>d&&(d=l-1),$("html").hasClass("window--open")&&g.trigger("click"),"undefined"!=typeof i&&null!==i&&i>=0&&5>=i&&(d=i),$("."+s[d].fire).trigger("click")}function a(){t(1)}function o(){t(-1)}function r(){var e=$(window).width();e>m?$(document).off("mousewheel").on("mousewheel",function(e){if(h.hasClass("window--is-open")===!1){if(u=e.timeStamp-f,f=e.timeStamp,$("body").hasClass("is-moving"))return!1;if($("form").find(":focus").blur(),50>u)return!1;e.deltaY>0&&o(),e.deltaY<0&&a()}}).on("keyup",function(e){var i=$("form").find(":focus");if(i.length>0)return!1;if(h.hasClass("window--is-open")===!1&&"textarea"!==e.target.nodeName.toLowerCase()){e.preventDefault();var n=e.keyCode;(38===n||33===n)&&o(),(40===n||34===n)&&a()}}):($(document).off("mousewheel keyup"),i())}var s=[{name:"top","class":"is-top",fire:"toTop"},{name:"about","class":"is-about",fire:"toAbout"},{name:"works","class":"is-works",fire:"toWorks"},{name:"special","class":"is-special",fire:"toSpecial"},{name:"recruit","class":"is-recruit",fire:"toRecruit"},{name:"contact","class":"is-contact",fire:"toContact"}],l=s.length,d=0,c=l-1,u=0,f=0,m=736,p=$(" .menu-btn");p.on({click:function(e){e.preventDefault();var i=p.attr("class");i.match(/is-open/)?(p.removeClass("menu-btn--is-open"),$(this).removeClass("menu-btn--is-open"),$(this).addClass("menu-btn--is-close"),$("html").removeClass("menu--open")):(p.addClass("menu-btn--is-open"),$(this).removeClass("menu-btn--is-close"),$(this).addClass("menu-btn--is-open"),$("html").addClass("menu--open"))}}),$("#main,nav .sp-only a").click(function(){p.hasClass("menu-btn--is-open")&&p.addClass("menu-btn--is-close").removeClass("menu-btn--is-open"),$("html").removeClass("menu--open")}),$.fn.removeis=function(){$("body").removeClass(function(e,i){return(i.match(/\bis-\S+/g)||[]).join(" ")})};var v=1e3;$(" .pc-only > li").off("click").on("click",function(e){e.preventDefault(),c=d,d=$(this).index();var i=s[d];$("body").removeis(),$("body").addClass(i["class"]+" is-moving"),setTimeout(function(){$("body").removeClass("is-moving")},v)}),$("#main .localNav > li").off("click").on("click",function(e){e.preventDefault();for(var i=0;l>i;++i){var n=s[i];if($(this).hasClass(n.fire)){c=d,d=i,$("body").removeis(),$("body").addClass(n["class"]+" is-moving"),setTimeout(function(){$("body").removeClass("is-moving")},v);break}}});var h=$("#window"),w=h.children("article"),g=h.next(".closeBtn"),k=h.children(".window__about"),b=h.children(".window__works"),C=h.children(".window__special"),_=h.children(".window__recruit"),y=$("#stage"),x=y.children(".stage__about"),T=y.children(".stage__works"),q=y.children(".stage__special"),M=y.children(".stage__recruit");$("#stage .more, #stage .works__image a").click(function(){h.addClass("window--is-open"),$("html").addClass("window--open")}),x.find(".more").click(function(){k.addClass("article--is-open"),initMap()}),T.find(".more, .works__image a").click(function(){b.addClass("article--is-open")}),q.find(".more").click(function(){C.addClass("article--is-open")}),M.find(".more").click(function(){_.addClass("article--is-open")}),h.add(g).click(function(){h.removeClass("window--is-open"),$("html").removeClass("window--open"),b.removeClass("works--is-detail"),setTimeout(function(){$("#works__list").fadeIn(400)},200),$(".backBtn").removeClass("is-show"),setTimeout(function(){w.removeClass("article--is-open")},400)}),w.click(function(e){e.stopPropagation()}),$("#works__list li").click(function(){b.addClass("works--is-detail"),$("#works__list").fadeOut(0),$(".backBtn").addClass("is-show")}),$(".backBtn").click(function(){b.removeClass("works--is-detail"),setTimeout(function(){$("#works__list").fadeIn(400)},200),$(".backBtn").removeClass("is-show")});var j=$("#works__detail .detail__contents");$("#works__list a").click(function(e){$("#loader").fadeIn(100),e.preventDefault();var i=$(this).attr("href");j.fadeOut(0,function(){n(i)})});var O=0;$(window).on("load resize",function(){O>0&&clearTimeout(O),O=setTimeout(function(){r()},300)}),$.validator.addMethod("is_kana",function(e,i){return this.optional(i)||/^([ァ-ヶーｧ-ﾝﾞﾟ]+)$/.test(e)},"カタカナで入力してください。"),$.validator.addMethod("is_age",function(e,i){return this.optional(i)||/^([0-9]{0,2})$/.test(e)},"半角数値で入力してください"),$.validator.addMethod("has_job",function(e,i){for(var n=["プロデューサー","プランナー","ディレクター","ウェブデザイナー","フロントエンドエンジニア","マークアップエンジニア"],t=!1,a=0;a<n.length;++a)if(e===n[a]){t=!0;break}return this.optional(i)||t},"募集職種からお選びください。"),$("#form-recruit .form-element span.error, #form-contact .form-element span.error").hide();var D=$("#form-recruit").validate({onfocusout:!1,onkeyup:!1,focusCleanup:!1,rules:{job:{required:!0},name:{required:!0},kana:{required:!0,is_kana:!0},age:{required:!0,is_age:!0},phone:{required:!0},email:{required:!0},career:{required:!0},msg:{required:!0}},messages:{job:{required:"必須項目です。"},name:{required:"氏名を入力してください。"},kana:{required:"フリガナを入力してください。"},age:{required:"年齢を入力してください。",digits:"半角数値で入力してください。",minlength:2},phone:{required:"電話番号を入力してください。",digits:"半角数値で入力してください。"},email:{required:"メールアドレスを入力してください。",email:"正しいメールアドレスを入力してください。"},career:{required:"必須項目です。"},msg:{required:"必須項目です。"}},success:function(e){var i=$(e).attr("id");$("#form-recruit").find("."+i).hide()},errorPlacement:function(e,i){var n=e.attr("id"),t=e.text(),a=i.parent().parent().parent().find("span.error");a.removeClass(n).addClass(n),a.text(t),a.show()},submitHandler:function(e){var i=$(e);return i.valid()?void $.ajax({url:i.attr("action"),type:i.attr("method"),dataType:"json",data:i.serialize(),timeout:1e4}).fail(function(){i.fadeOut(500,function(){var e="メール送信に失敗しました。<br>";e+="下記メールアドレスまたは電話番号までご連絡頂きますようお願い致します。<br>",e+='メールアドレス：<a href="mailto:info@liberogic.jp">info@liberogic.jp</a><br>電話番号：03-6809-4366<br>',e+="営業時間：平日11:00〜20:00<br>",i.parent().append('<div class="complete" style="font-size:12px; line-height:3;">'+e+"</div>")})}).done(function(){i.fadeOut(500,function(){if(i.parent().find("p").hide(),i.parent().append('<div class="complete">Thank you!</div>'),ga("send","event","recruit_form","regist","recruit_form"),mixpanel){var e=i.find("input[name=email]").val();mixpanel.track("form entry",{page:"採用応募"}),mixpanel.identify(e),mixpanel.people.set({$job:i.find("input[name=job]").val(),$age:i.find("input[name=age]").val(),$phone:i.find("input[name=phone]").val(),$email:e,$created_at:new Date,$registed:"recruit"})}D.resetForm()}),setTimeout(function(){i.find("input[type=text], input[type=email], input[type=tel], textarea").val(""),i.parent().find("p").show(),i.parent().find(".complete").remove(),i.find(".error").hide(),i.fadeIn(500)},1e4)}):!1}}),S=$("#form-contact").validate({onfocusout:!1,onkeyup:!1,focusCleanup:!1,rules:{name:{required:!0},email:{required:!0},msg:{required:!0}},messages:{name:{required:"名前を入力してください。"},email:{required:"メールアドレスを入力してください。",email:"正しいメールアドレスを入力してください。"},msg:{required:"メッセージを入力してください。"}},success:function(e){var i=$(e).attr("id");$("#form-contact").find("."+i).hide()},errorPlacement:function(e,i){var n=e.attr("id"),t=e.text(),a=i.parent().parent().parent().find("span.error");a.removeClass(n).addClass(n),a.text(t),a.show()},submitHandler:function(e){var i=$(e);return i.valid()?void $.ajax({url:i.attr("action"),type:i.attr("method"),dataType:"json",data:i.serialize(),timeout:1e4}).fail(function(){i.fadeOut(500,function(){var e="メール送信に失敗しました。<br>";e+="下記メールアドレスまたは電話番号までご連絡頂きますようお願い致します。<br>",e+='メールアドレス：<a href="mailto:info@liberogic.jp">info@liberogic.jp</a><br>電話番号：03-6809-4366<br>',i.parent().append('<div class="complete" style="font-size:12px; line-height:3;">'+e+"</div>")})}).done(function(){i.fadeOut(500,function(){if(i.parent().append('<div class="complete">Thank you!</div>'),ga("send","event","contact_form","regist","contact_form"),mixpanel){var e=i.find("input[name=email]").val();mixpanel.track("form entry",{page:"お問い合わせ"}),mixpanel.identify(e),mixpanel.people.set({$email:e,$created_at:new Date,$registed:"contact"})}S.resetForm()}),setTimeout(function(){i.find("input[type=text], input[type=email], textarea").val(""),i.parent().find(".complete").remove(),i.find(".error").hide(),i.fadeIn(500)},5e3)}):!1}})});